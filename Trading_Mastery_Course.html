<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Trading Mastery: From Stocks to Options ‚Äî 7-Day Intensive</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #10b981;
      --primary-dark: #059669;
      --secondary: #fbbf24;
      --accent: #06b6d4;
      --danger: #ef4444;
      --warning: #f59e0b;
      --success: #22c55e;
      --bull: #22c55e;
      --bear: #ef4444;
      --gradient-1: linear-gradient(135deg, #10b981 0%, #06b6d4 100%);
      --gradient-2: linear-gradient(135deg, #f0abfc 0%, #f472b6 100%);
      --gradient-3: linear-gradient(135deg, #67e8f9 0%, #22d3ee 100%);
      --gradient-day: linear-gradient(135deg, #10b981 0%, #06b6d4 100%);
      --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
      --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.2);
      --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.2);
      --shadow-glow: 0 0 30px rgba(16, 185, 129, 0.2);
      --bg: #000000;
      --bg-secondary: #0a0a0a;
      --bg-tertiary: #111111;
      --text: #d4d4d8;
      --text-muted: #71717a;
      --text-heading: #fafafa;
      --border: rgba(255, 255, 255, 0.08);
      --border-subtle: rgba(255, 255, 255, 0.04);
      --card-bg: #0a0a0a;
      --code-bg: rgba(16, 185, 129, 0.15);
    }
    [data-theme="light"] {
      --bg: #fafafa; --bg-secondary: #ffffff; --bg-tertiary: #f4f4f5;
      --text: #3f3f46; --text-muted: #71717a; --text-heading: #18181b;
      --border: rgba(0,0,0,0.08); --border-subtle: rgba(0,0,0,0.04);
      --card-bg: #ffffff; --code-bg: rgba(16,185,129,0.08);
      --shadow-glow: 0 0 30px rgba(16,185,129,0.1);
      --primary: #059669; --primary-dark: #047857;
      --accent: #0891b2; --danger: #dc2626; --warning: #d97706;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    html { scroll-behavior:smooth; }
    body {
      font-family:'Inter',-apple-system,BlinkMacSystemFont,sans-serif;
      background:var(--bg); color:var(--text); line-height:1.65; font-size:16px;
      letter-spacing:-0.01em; transition:background .3s,color .3s;
      -webkit-font-smoothing:antialiased;
    }
    body::before {
      content:''; position:fixed; top:0; left:0; width:100%; height:100%;
      background:radial-gradient(ellipse at 20% 0%,rgba(16,185,129,0.06) 0%,transparent 50%),
                 radial-gradient(ellipse at 80% 100%,rgba(6,182,212,0.04) 0%,transparent 50%);
      pointer-events:none; z-index:-1;
    }
    [data-theme="light"] body::before {
      background:radial-gradient(ellipse at 20% 0%,rgba(5,150,105,0.04) 0%,transparent 50%),
                 radial-gradient(ellipse at 80% 100%,rgba(8,145,178,0.03) 0%,transparent 50%);
    }
    .top-controls {
      display:none;
    }
    .theme-toggle {
      position:fixed; top:0; right:20px; height:48px; z-index:1000;
      display:flex; align-items:center; gap:10px;
      background:none; border:none;
      border-radius:100px; padding:0; cursor:pointer; transition:all .2s;
    }
    .theme-toggle:hover { border-color:transparent; background:none; }
    .theme-toggle-track {
      width:40px; height:22px; background:var(--bg-tertiary); border-radius:11px;
      position:relative; transition:background .2s; border:1px solid var(--border);
    }
    .theme-toggle-thumb {
      width:16px; height:16px; background:var(--primary); border-radius:50%;
      position:absolute; top:2px; left:2px; transition:transform .2s;
      display:flex; align-items:center; justify-content:center; font-size:10px;
    }
    [data-theme="light"] .theme-toggle-thumb { transform:translateX(18px); }
    .theme-toggle-label { font-size:11px; font-weight:600; color:var(--text-muted); text-transform:uppercase; letter-spacing:.5px; }
    .toc-toggle {
      position:fixed; top:0; left:20px; z-index:1000;
      width:36px; height:48px;
      background:none; border:none; border-radius:10px;
      cursor:pointer; display:flex; align-items:center; justify-content:center; font-size:18px; transition:all .2s;
    }
    .toc-toggle:hover { border-color:var(--primary); background:var(--bg-tertiary); }
    .toc-sidebar {
      position:fixed; top:0; left:-320px; width:320px; height:100vh;
      background:var(--bg-secondary); border-right:1px solid var(--border);
      z-index:999; overflow-y:auto; transition:left .25s; padding:80px 20px 24px;
    }
    .toc-sidebar.open { left:0; }
    .toc-overlay {
      position:fixed; top:0; left:0; width:100%; height:100%;
      background:rgba(0,0,0,0.6); z-index:998; opacity:0; visibility:hidden; transition:all .25s;
    }
    .toc-overlay.open { opacity:1; visibility:visible; }
    .toc-header { font-family:'Space Grotesk',sans-serif; font-size:1.1rem; font-weight:700; color:var(--text-heading); margin-bottom:20px; padding-bottom:12px; border-bottom:1px solid var(--border); }
    .toc-section { margin-bottom:16px; }
    .toc-section-title { font-size:10px; font-weight:700; text-transform:uppercase; letter-spacing:1.2px; color:var(--primary); margin-bottom:6px; padding-left:12px; }
    .toc-link { display:block; padding:6px 12px; color:var(--text-muted); text-decoration:none; border-radius:6px; font-size:13px; transition:all .15s; border-left:2px solid transparent; }
    .toc-link:hover { background:var(--bg-tertiary); color:var(--text-heading); border-left-color:var(--primary); }
    .toc-link.day-link { font-weight:600; color:var(--text); }
    .toc-link.sub-link { padding-left:24px; font-size:12px; }
    .container { max-width:860px; margin:0 auto; padding:0 24px; }
    .container-wide { max-width:1200px; margin:0 auto; padding:0 24px; }
    /* Hero */
    .hero {
      min-height:100vh; display:flex; flex-direction:column; justify-content:center;
      align-items:center; text-align:center; padding:60px 24px; position:relative; overflow:hidden;
    }
    .hero::before {
      content:''; position:absolute; width:500px; height:500px;
      background:var(--gradient-day); border-radius:50%; filter:blur(150px);
      opacity:.15; top:-150px; right:-150px; animation:pulse 10s ease-in-out infinite;
    }
    @keyframes pulse { 0%,100%{transform:scale(1);opacity:.15} 50%{transform:scale(1.05);opacity:.2} }
    .hero-badge {
      display:inline-flex; align-items:center; gap:8px;
      background:rgba(16,185,129,0.1); border:1px solid rgba(16,185,129,0.2);
      padding:6px 14px; border-radius:100px; font-size:12px; font-weight:600;
      color:var(--primary); margin-bottom:20px; animation:fadeInUp .5s ease-out; letter-spacing:.3px;
    }
    .hero-badge::before { content:'üìà'; }
    .hero h1 {
      font-family:'Space Grotesk',sans-serif; font-size:clamp(2.5rem,6vw,3.5rem); font-weight:700;
      background:linear-gradient(135deg,var(--text-heading) 0%,var(--primary) 100%);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
      margin-bottom:20px; animation:fadeInUp .5s ease-out .1s both; letter-spacing:-0.02em;
    }
    .hero-subtitle { font-size:1.1rem; color:var(--text-muted); max-width:600px; margin-bottom:36px; animation:fadeInUp .5s ease-out .2s both; line-height:1.7; }
    .hero-stats { display:flex; gap:48px; flex-wrap:wrap; justify-content:center; animation:fadeInUp .5s ease-out .3s both; }
    .stat { text-align:center; }
    .stat-number { font-family:'Space Grotesk',sans-serif; font-size:2.25rem; font-weight:700; color:var(--primary); letter-spacing:-0.02em; }
    .stat-label { font-size:12px; color:var(--text-muted); text-transform:uppercase; letter-spacing:1px; font-weight:500; }
    @keyframes fadeInUp { from{opacity:0;transform:translateY(16px)} to{opacity:1;transform:translateY(0)} }

    /* Nav */
    .nav {
      position:sticky; top:0; background:rgba(0,0,0,0.85); backdrop-filter:blur(16px);
      -webkit-backdrop-filter:blur(16px); border-bottom:1px solid var(--border); padding:12px 0; z-index:100;
    }
    [data-theme="light"] .nav { background:rgba(250,250,250,0.85); }
    .nav-content { display:flex; justify-content:space-between; align-items:center; }
    .nav-logo { font-family:'Space Grotesk',sans-serif; font-weight:700; font-size:1.1rem; color:var(--text-heading); }
    .nav-items { display:flex; gap:6px; align-items:center; }
    .nav-day {
      width:32px; height:32px; border-radius:8px; display:flex; align-items:center; justify-content:center;
      font-weight:600; font-size:13px; background:var(--bg-secondary); color:var(--text-muted);
      text-decoration:none; transition:all .15s; border:1px solid var(--border-subtle);
    }
    .nav-day:hover { background:var(--primary); color:white; border-color:var(--primary); }
    .nav-dash-btn {
      padding:6px 14px; border-radius:8px; font-weight:600; font-size:13px;
      background:var(--primary); color:white; text-decoration:none; transition:all .15s;
      border:1px solid var(--primary); margin-left:12px; cursor:pointer;
    }
    .nav-dash-btn:hover { background:var(--primary-dark); border-color:var(--primary-dark); }

    /* Author Note */
    .author-note {
      background:rgba(239,68,68,0.06); border-left:3px solid var(--danger);
      padding:20px 24px; border-radius:0 8px 8px 0; margin:32px 0; position:relative;
    }
    .author-note::before {
      content:'‚ö†Ô∏è REAL TALK'; position:absolute; top:-10px; left:16px;
      background:var(--bg); padding:2px 10px; font-size:10px; font-weight:700;
      color:var(--danger); letter-spacing:1px; border-radius:4px;
    }
    /* Day Sections */
    .day-section { padding:64px 0; position:relative; }
    .day-header { display:flex; align-items:center; gap:20px; margin-bottom:32px; }
    .day-number {
      width:72px; height:72px; background:var(--gradient-day); border-radius:16px;
      display:flex; flex-direction:column; align-items:center; justify-content:center; color:white;
    }
    .day-number span:first-child { font-size:10px; text-transform:uppercase; letter-spacing:2px; opacity:.8; }
    .day-number span:last-child { font-family:'Space Grotesk',sans-serif; font-size:1.75rem; font-weight:700; }
    .day-title { font-family:'Space Grotesk',sans-serif; font-size:1.5rem; font-weight:700; color:var(--text-heading); letter-spacing:-0.01em; }
    .day-time { display:inline-flex; align-items:center; gap:6px; font-size:13px; color:var(--accent); margin-top:4px; font-weight:500; }
    .day-time::before { content:'‚è±Ô∏è'; }

    h2 { font-family:'Space Grotesk',sans-serif; font-size:1.35rem; font-weight:700; color:var(--text-heading); margin:48px 0 20px; padding-bottom:10px; border-bottom:1px solid var(--border); display:inline-block; letter-spacing:-0.01em; }
    h3 { font-size:1.1rem; font-weight:600; color:var(--text-heading); margin:32px 0 14px; }
    h4 { font-size:1rem; font-weight:600; color:var(--primary); margin:24px 0 10px; }

    /* Exercise Cards */
    .exercise {
      background:rgba(16,185,129,0.04); border:1px solid rgba(16,185,129,0.12);
      border-radius:12px; padding:24px; margin:20px 0; position:relative; overflow:hidden;
    }
    .exercise::before { content:''; position:absolute; top:0; left:0; width:3px; height:100%; background:var(--gradient-day); }
    .exercise-header { display:flex; align-items:center; gap:12px; margin-bottom:14px; }
    .exercise-badge { background:var(--primary); color:white; padding:3px 10px; border-radius:6px; font-size:11px; font-weight:600; text-transform:uppercase; letter-spacing:.5px; }
    .exercise-title { font-weight:600; color:var(--text-heading); font-size:1rem; }

    .pro-tip {
      background:rgba(6,182,212,0.06); border:1px solid rgba(6,182,212,0.15);
      border-radius:10px; padding:18px 22px; margin:20px 0; position:relative;
    }
    .pro-tip::before { content:'üí° PRO TIP'; font-size:10px; font-weight:700; color:var(--accent); letter-spacing:1px; display:block; margin-bottom:6px; }

    .warning {
      background:rgba(251,191,36,0.06); border:1px solid rgba(251,191,36,0.15);
      border-radius:10px; padding:18px 22px; margin:20px 0;
    }
    .warning::before { content:'‚ö†Ô∏è CRITICAL'; font-size:10px; font-weight:700; color:var(--warning); letter-spacing:1px; display:block; margin-bottom:6px; }

    /* Tables */
    table { width:100%; border-collapse:separate; border-spacing:0; margin:20px 0; background:var(--bg-secondary); border-radius:10px; overflow:hidden; border:1px solid var(--border); }
    thead { background:var(--bg-tertiary); }
    th { padding:12px 16px; text-align:left; font-weight:600; font-size:12px; text-transform:uppercase; letter-spacing:.5px; color:var(--text-muted); border-bottom:1px solid var(--border); }
    td { padding:12px 16px; border-bottom:1px solid var(--border-subtle); font-size:14px; }
    tr:last-child td { border-bottom:none; }
    tr:hover td { background:rgba(16,185,129,0.03); }

    pre,code { font-family:'JetBrains Mono',monospace; }
    code { background:var(--code-bg); padding:2px 6px; border-radius:4px; font-size:.85em; color:var(--primary); }
    pre { background:var(--bg-secondary); border:1px solid var(--border); border-radius:10px; padding:20px; overflow-x:auto; margin:16px 0; }
    pre code { background:none; padding:0; color:var(--text); font-size:13px; line-height:1.7; }

    .checklist { background:var(--bg-secondary); border:1px solid var(--border); border-radius:12px; padding:24px; margin:24px 0; }
    .checklist-header { display:flex; align-items:center; gap:12px; margin-bottom:16px; padding-bottom:14px; border-bottom:1px solid var(--border); }
    .checklist-icon { width:36px; height:36px; background:rgba(16,185,129,0.15); border-radius:8px; display:flex; align-items:center; justify-content:center; font-size:18px; }
    .checklist-title { font-weight:600; color:var(--text-heading); font-size:15px; }
    ul.task-list { list-style:none; padding:0; }
    ul.task-list li { display:flex; align-items:flex-start; gap:12px; padding:10px 0; border-bottom:1px solid var(--border-subtle); font-size:14px; }
    ul.task-list li:last-child { border-bottom:none; }
    ul.task-list input[type="checkbox"] { width:18px; height:18px; accent-color:var(--primary); cursor:pointer; flex-shrink:0; margin-top:1px; }
    ul,ol { padding-left:20px; margin:14px 0; }
    li { margin:6px 0; font-size:15px; }
    li::marker { color:var(--primary); }
    a { color:var(--primary); text-decoration:none; transition:all .15s; }
    a:hover { color:#6ee7b7; text-decoration:underline; text-underline-offset:3px; }
    strong { color:var(--text-heading); font-weight:600; }
    hr { border:none; height:1px; background:var(--border); margin:48px 0; }
    blockquote { background:rgba(16,185,129,0.04); border-left:3px solid var(--primary); padding:16px 20px; margin:20px 0; border-radius:0 8px 8px 0; font-style:italic; color:var(--text-muted); font-size:15px; }
    kbd { background:var(--bg-tertiary); border:1px solid var(--border); border-radius:5px; padding:3px 8px; font-family:'JetBrains Mono',monospace; font-size:12px; color:var(--text); }
    .progress-bar { height:3px; background:var(--bg-secondary); border-radius:2px; margin:32px 0; overflow:hidden; }
    .progress-fill { height:100%; background:var(--gradient-day); border-radius:2px; transition:width .4s; }
    .final-section { background:rgba(16,185,129,0.06); border:1px solid rgba(16,185,129,0.15); border-radius:16px; padding:40px; margin:48px 0; text-align:center; position:relative; overflow:hidden; }
    .final-section::before { content:''; position:absolute; top:-50%; left:-50%; width:200%; height:200%; background:radial-gradient(circle,rgba(16,185,129,0.05) 0%,transparent 70%); animation:rotate 30s linear infinite; }
    @keyframes rotate { from{transform:rotate(0deg)} to{transform:rotate(360deg)} }
    .final-section h2 { border:none; display:block; font-size:1.75rem; }
    /* ===== DASHBOARD STYLES ===== */
    .dashboard-section {
      padding:64px 0; display:none;
    }
    .dashboard-section.active { display:block; }
    .course-content { display:block; }
    .course-content.hidden { display:none; }

    .dash-header {
      display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:16px; margin-bottom:32px;
    }
    .dash-title { font-family:'Space Grotesk',sans-serif; font-size:1.75rem; font-weight:700; color:var(--text-heading); }
    .dash-controls { display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
    .dash-input {
      background:var(--bg-secondary); border:1px solid var(--border); border-radius:8px;
      padding:10px 14px; color:var(--text); font-size:14px; font-family:'Inter',sans-serif;
      outline:none; transition:border-color .2s; width:180px;
    }
    .dash-input:focus { border-color:var(--primary); }
    .dash-input::placeholder { color:var(--text-muted); }
    .dash-btn {
      padding:10px 20px; border-radius:8px; font-weight:600; font-size:14px;
      background:var(--primary); color:white; border:none; cursor:pointer; transition:all .15s;
    }
    .dash-btn:hover { background:var(--primary-dark); }
    .dash-btn.secondary { background:var(--bg-tertiary); color:var(--text); border:1px solid var(--border); }
    .dash-btn.secondary:hover { border-color:var(--primary); color:var(--primary); }
    .dash-btn.danger { background:transparent; color:var(--danger); border:1px solid rgba(239,68,68,0.3); }
    .dash-btn.danger:hover { background:rgba(239,68,68,0.1); }

    .watchlist-grid {
      display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:16px; margin-bottom:32px;
    }
    .stock-card {
      background:var(--bg-secondary); border:1px solid var(--border); border-radius:12px;
      padding:20px; transition:all .2s; cursor:pointer; position:relative;
    }
    .stock-card:hover { border-color:rgba(16,185,129,0.3); transform:translateY(-2px); }
    .stock-card.selected { border-color:var(--primary); box-shadow:0 0 20px rgba(16,185,129,0.15); }
    .stock-card-header { display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:12px; }
    .stock-symbol { font-family:'Space Grotesk',sans-serif; font-size:1.25rem; font-weight:700; color:var(--text-heading); }
    .stock-name { font-size:12px; color:var(--text-muted); margin-top:2px; }
    .stock-remove {
      background:none; border:none; color:var(--text-muted); cursor:pointer; font-size:16px;
      padding:4px; border-radius:4px; transition:all .15s; line-height:1;
    }
    .stock-remove:hover { color:var(--danger); background:rgba(239,68,68,0.1); }
    .stock-price { font-family:'Space Grotesk',sans-serif; font-size:1.5rem; font-weight:700; }
    .stock-change { font-size:13px; font-weight:600; margin-top:4px; }
    .stock-change.up { color:var(--bull); }
    .stock-change.down { color:var(--bear); }
    .stock-meta { display:flex; gap:16px; margin-top:12px; padding-top:12px; border-top:1px solid var(--border-subtle); }
    .stock-meta-item { font-size:11px; color:var(--text-muted); }
    .stock-meta-item span { color:var(--text); font-weight:500; }

    /* Chart Area */
    .chart-container {
      background:var(--bg-secondary); border:1px solid var(--border); border-radius:12px;
      padding:24px; margin-bottom:24px; min-height:500px; position:relative;
    }
    .chart-toolbar {
      display:flex; justify-content:space-between; align-items:center; margin-bottom:16px; flex-wrap:wrap; gap:12px;
    }
    .chart-symbol-display { font-family:'Space Grotesk',sans-serif; font-size:1.25rem; font-weight:700; color:var(--text-heading); }
    .chart-timeframes { display:flex; gap:4px; }
    .tf-btn {
      padding:6px 12px; border-radius:6px; font-size:12px; font-weight:600;
      background:var(--bg-tertiary); color:var(--text-muted); border:1px solid var(--border-subtle);
      cursor:pointer; transition:all .15s;
    }
    .tf-btn:hover { border-color:var(--primary); color:var(--text); }
    .tf-btn.active { background:var(--primary); color:white; border-color:var(--primary); }
    .interval-select {
      padding:6px 10px; border-radius:6px; font-size:12px; font-weight:600;
      background:var(--bg-tertiary); color:var(--text-muted); border:1px solid var(--border-subtle);
      cursor:pointer; outline:none; font-family:'Inter',sans-serif;
    }
    .interval-select:focus { border-color:var(--primary); }
    .chart-types { display:flex; gap:4px; }
    .ct-btn {
      padding:6px 10px; border-radius:6px; font-size:14px;
      background:var(--bg-tertiary); color:var(--text-muted); border:1px solid var(--border-subtle);
      cursor:pointer; transition:all .15s;
    }
    .ct-btn:hover { border-color:var(--primary); }
    .ct-btn.active { background:var(--primary); color:white; border-color:var(--primary); }
    #mainChart { width:100%; height:420px; }

    /* Indicators panel */
    .indicators-panel {
      display:flex; gap:8px; flex-wrap:wrap; margin-bottom:16px;
    }
    .ind-toggle {
      padding:5px 12px; border-radius:6px; font-size:11px; font-weight:600;
      background:var(--bg-tertiary); color:var(--text-muted); border:1px solid var(--border-subtle);
      cursor:pointer; transition:all .15s; text-transform:uppercase; letter-spacing:.5px;
    }
    .ind-toggle:hover { border-color:var(--primary); }
    .ind-toggle.active { background:rgba(16,185,129,0.15); color:var(--primary); border-color:rgba(16,185,129,0.3); }

    .volume-chart { width:100%; height:100px; margin-top:8px; }

    /* Responsive */
    @media(max-width:768px) {
      body { font-size:15px; }
      .hero h1 { font-size:2rem; }
      .hero-stats { gap:32px; }
      .day-header { flex-direction:column; align-items:flex-start; }
      .nav-items .nav-day { display:none; }
      .exercise,.checklist { padding:18px; }
      .watchlist-grid { grid-template-columns:1fr; }
      .chart-toolbar { flex-direction:column; align-items:flex-start; }
      #mainChart { height:300px; }
    }
    @media print { body{background:white;color:black} .nav,.hero::before,.dashboard-section{display:none} }

    /* Interactive Prompt Box */
    .prompt-box {
      background:rgba(16,185,129,0.04); border:1px solid rgba(16,185,129,0.2);
      border-radius:12px; padding:20px; margin:24px 0; position:relative;
    }
    .prompt-box-header {
      display:flex; align-items:center; justify-content:space-between;
      margin-bottom:14px; padding-bottom:12px; border-bottom:1px solid var(--border);
    }
    .prompt-box-title {
      display:flex; align-items:center; gap:8px;
      font-family:'Space Grotesk',sans-serif; font-weight:600; font-size:1rem; color:var(--text-heading);
    }
    .prompt-box-title::before { content:'ü§ñ'; font-size:1.1rem; }
    .copy-btn {
      display:flex; align-items:center; gap:6px; background:var(--primary); color:white;
      border:none; padding:8px 16px; border-radius:6px; font-weight:600; font-size:13px;
      cursor:pointer; transition:all .15s;
    }
    .copy-btn:hover { background:var(--primary-dark); }
    .copy-btn.copied { background:var(--success); }
    .prompt-content {
      background:var(--bg-tertiary); border:1px solid var(--border); border-radius:8px;
      padding:14px; max-height:180px; overflow-y:auto;
      font-family:'JetBrains Mono',monospace; font-size:12px; line-height:1.6;
      color:var(--text-muted); white-space:pre-wrap;
    }
    .prompt-content::-webkit-scrollbar { width:6px; }
    .prompt-content::-webkit-scrollbar-track { background:transparent; }
    .prompt-content::-webkit-scrollbar-thumb { background:var(--border); border-radius:3px; }
    .prompt-content::-webkit-scrollbar-thumb:hover { background:var(--primary); }
    .prompt-hint { margin-top:10px; font-size:12px; color:var(--text-muted); font-style:italic; }

    /* Day Schedule Breakdown */
    .day-schedule {
      background:var(--bg-secondary); border:1px solid var(--border); border-radius:10px;
      padding:16px 20px; margin:16px 0 28px; display:flex; flex-wrap:wrap; gap:8px 16px; align-items:center;
    }
    .day-schedule-label {
      font-size:11px; font-weight:700; text-transform:uppercase; letter-spacing:.8px;
      color:var(--primary); white-space:nowrap;
    }
    .day-schedule-item {
      display:inline-flex; align-items:center; gap:6px; font-size:13px; color:var(--text);
      background:var(--bg-tertiary); padding:5px 12px; border-radius:6px; border:1px solid var(--border-subtle);
    }
    .day-schedule-item .sch-icon { font-size:14px; }
    .day-schedule-item .sch-time { font-weight:600; color:var(--primary); font-size:12px; }

    /* ===== ENHANCED DASHBOARD STYLES ===== */
    /* Key Stats Panel */
    .stats-panel {
      display:grid; grid-template-columns:repeat(auto-fill,minmax(150px,1fr)); gap:12px;
      margin-bottom:20px; padding:16px; background:var(--bg-secondary); border:1px solid var(--border);
      border-radius:10px;
    }
    .stat-item { text-align:center; padding:8px; }
    .stat-item-label { font-size:10px; text-transform:uppercase; letter-spacing:.8px; color:var(--text-muted); font-weight:600; margin-bottom:4px; }
    .stat-item-value { font-family:'Space Grotesk',sans-serif; font-size:1rem; font-weight:700; color:var(--text-heading); }

    /* RSI / MACD sub-panels */
    .sub-indicator-panel {
      background:var(--bg-secondary); border:1px solid var(--border); border-radius:8px;
      padding:8px 16px; margin-top:8px; position:relative;
    }
    .sub-indicator-label {
      position:absolute; top:4px; left:12px; font-size:10px; font-weight:600;
      color:var(--text-muted); text-transform:uppercase; letter-spacing:.5px;
    }

    /* Crosshair tooltip */
    .chart-tooltip {
      position:absolute; background:var(--bg-secondary); border:1px solid var(--border);
      border-radius:8px; padding:10px 14px; font-size:12px; pointer-events:none;
      z-index:50; display:none; box-shadow:var(--shadow-lg); min-width:160px;
    }
    .chart-tooltip .tt-date { font-weight:600; color:var(--text-heading); margin-bottom:6px; font-size:11px; }
    .chart-tooltip .tt-row { display:flex; justify-content:space-between; gap:16px; padding:2px 0; }
    .chart-tooltip .tt-label { color:var(--text-muted); }
    .chart-tooltip .tt-val { font-weight:600; color:var(--text-heading); font-family:'JetBrains Mono',monospace; font-size:11px; }

    /* Comparison overlay toggle */
    .compare-bar {
      display:flex; align-items:center; gap:10px; margin-bottom:16px; flex-wrap:wrap;
    }
    .compare-input {
      background:var(--bg-tertiary); border:1px solid var(--border); border-radius:6px;
      padding:6px 10px; color:var(--text); font-size:12px; width:100px; outline:none;
      font-family:'Inter',sans-serif;
    }
    .compare-input:focus { border-color:var(--primary); }
    .compare-tag {
      display:inline-flex; align-items:center; gap:6px; background:rgba(168,85,247,0.15);
      border:1px solid rgba(168,85,247,0.3); border-radius:6px; padding:4px 10px;
      font-size:11px; font-weight:600; color:#a855f7;
    }
    .compare-tag button {
      background:none; border:none; color:#a855f7; cursor:pointer; font-size:14px; line-height:1; padding:0;
    }

    /* Drawing tools */
    .drawing-toolbar {
      display:flex; gap:4px; margin-left:auto;
    }
    .draw-btn {
      padding:5px 10px; border-radius:6px; font-size:11px; font-weight:600;
      background:var(--bg-tertiary); color:var(--text-muted); border:1px solid var(--border-subtle);
      cursor:pointer; transition:all .15s;
    }
    .draw-btn:hover { border-color:var(--primary); }
    .draw-btn.active { background:rgba(16,185,129,0.15); color:var(--primary); border-color:rgba(16,185,129,0.3); }

    /* Paper Trading Panel */
    .paper-trade-panel {
      background:var(--bg-secondary); border:1px solid var(--border); border-radius:12px;
      padding:20px; margin-top:20px;
    }
    .paper-trade-header {
      display:flex; justify-content:space-between; align-items:center; margin-bottom:16px;
      padding-bottom:12px; border-bottom:1px solid var(--border);
    }
    .paper-trade-title {
      font-family:'Space Grotesk',sans-serif; font-weight:700; font-size:1.1rem; color:var(--text-heading);
    }
    .paper-balance {
      font-family:'Space Grotesk',sans-serif; font-weight:700; font-size:1.25rem; color:var(--primary);
    }
    .paper-trade-controls {
      display:flex; gap:10px; align-items:flex-end; flex-wrap:wrap; margin-bottom:16px;
    }
    .pt-label {
      display:flex; flex-direction:column; gap:4px; font-size:10px; font-weight:600;
      color:var(--text-muted); text-transform:uppercase; letter-spacing:.5px;
    }
    .paper-trade-controls input, .paper-trade-controls select, .options-controls input, .options-controls select {
      background:var(--bg-tertiary); border:1px solid var(--border); border-radius:6px;
      padding:8px 12px; color:var(--text); font-size:13px; font-family:'Inter',sans-serif; outline:none;
    }
    .paper-trade-controls input:focus, .paper-trade-controls select:focus, .options-controls input:focus, .options-controls select:focus { border-color:var(--primary); }
    .trade-btn-buy {
      padding:8px 20px; border-radius:6px; font-weight:700; font-size:13px;
      background:var(--bull); color:white; border:none; cursor:pointer; transition:all .15s;
    }
    .trade-btn-buy:hover { filter:brightness(1.1); }
    .trade-btn-sell {
      padding:8px 20px; border-radius:6px; font-weight:700; font-size:13px;
      background:var(--bear); color:white; border:none; cursor:pointer; transition:all .15s;
    }
    .trade-btn-sell:hover { filter:brightness(1.1); }
    .trade-btn-reset {
      padding:8px 14px; border-radius:6px; font-weight:600; font-size:12px;
      background:var(--bg-tertiary); color:var(--text-muted); border:1px solid var(--border);
      cursor:pointer; transition:all .15s; margin-left:auto;
    }
    .trade-btn-reset:hover { border-color:var(--danger); color:var(--danger); }

    /* Positions & Trade History */
    .positions-grid {
      display:grid; grid-template-columns:1fr 1fr; gap:16px; margin-top:16px;
    }
    @media(max-width:768px) { .positions-grid { grid-template-columns:1fr; } }
    .positions-box {
      background:var(--bg-tertiary); border:1px solid var(--border-subtle); border-radius:10px; padding:14px;
    }
    .positions-box-title {
      font-size:11px; font-weight:700; text-transform:uppercase; letter-spacing:.8px;
      color:var(--text-muted); margin-bottom:10px;
    }
    .position-row {
      display:flex; justify-content:space-between; align-items:center; padding:6px 0;
      border-bottom:1px solid var(--border-subtle); font-size:13px;
    }
    .position-row:last-child { border-bottom:none; }
    .position-symbol { font-weight:700; color:var(--text-heading); }
    .position-detail { color:var(--text-muted); font-size:12px; }
    .position-pnl { font-weight:700; font-family:'JetBrains Mono',monospace; font-size:12px; }
    .pnl-positive { color:var(--bull); }
    .pnl-negative { color:var(--bear); }
    .trade-history-row {
      display:flex; justify-content:space-between; align-items:center; padding:5px 0;
      border-bottom:1px solid var(--border-subtle); font-size:12px;
    }
    .trade-history-row:last-child { border-bottom:none; }
    .trade-type-buy { color:var(--bull); font-weight:700; }
    .trade-type-sell { color:var(--bear); font-weight:700; }
    .trade-type-close { color:var(--accent); font-weight:700; }

    /* Options Trading */
    .paper-tabs { display:flex; gap:0; margin-bottom:16px; }
    .paper-tab {
      padding:8px 20px; font-size:13px; font-weight:700; cursor:pointer; border:1px solid var(--border);
      background:var(--bg-tertiary); color:var(--text-muted); transition:all .15s;
      font-family:'Space Grotesk',sans-serif;
    }
    .paper-tab:first-child { border-radius:8px 0 0 8px; }
    .paper-tab:last-child { border-radius:0 8px 8px 0; }
    .paper-tab.active { background:var(--primary); color:#fff; border-color:var(--primary); }
    .paper-tab:not(.active):hover { color:var(--text-heading); }
    .options-controls { display:flex; gap:8px; align-items:flex-end; flex-wrap:wrap; margin-bottom:16px; }
    .option-greeks {
      display:flex; gap:12px; flex-wrap:wrap; margin-top:8px; padding:10px 14px;
      background:var(--bg-tertiary); border-radius:8px; border:1px solid var(--border-subtle);
    }
    .greek-item { font-size:12px; color:var(--text-muted); }
    .greek-item span { font-weight:700; color:var(--text-heading); font-family:'JetBrains Mono',monospace; }
    .option-position-row {
      padding:8px 0; border-bottom:1px solid var(--border-subtle); font-size:13px;
    }
    .option-position-row:last-child { border-bottom:none; }
    .option-pos-header { display:flex; justify-content:space-between; align-items:center; }
    .option-pos-details { display:flex; gap:14px; flex-wrap:wrap; margin-top:4px; font-size:11px; color:var(--text-muted); }
    .option-badge {
      display:inline-block; padding:2px 8px; border-radius:4px; font-size:11px; font-weight:700;
    }
    .option-badge.call { background:rgba(16,185,129,0.15); color:var(--bull); }
    .option-badge.put { background:rgba(239,68,68,0.15); color:var(--bear); }
    .est-premium-display {
      font-family:'JetBrains Mono',monospace; font-size:14px; font-weight:700;
      color:var(--primary); padding:6px 12px; background:var(--bg-tertiary);
      border-radius:6px; border:1px solid var(--border-subtle); min-width:80px; text-align:center;
    }

    /* Dashboard Guide Section */
    .dash-guide-section {
      background:rgba(6,182,212,0.04); border:1px solid rgba(6,182,212,0.15);
      border-radius:12px; padding:24px; margin:20px 0;
    }
    .dash-guide-section h4 { color:var(--accent); }
    .feature-grid {
      display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); gap:16px; margin:16px 0;
    }
    .feature-card {
      background:var(--bg-secondary); border:1px solid var(--border); border-radius:10px; padding:16px;
    }
    .feature-card-icon { font-size:1.5rem; margin-bottom:8px; }
    .feature-card-title { font-weight:700; color:var(--text-heading); font-size:14px; margin-bottom:6px; }
    .feature-card-desc { font-size:13px; color:var(--text-muted); line-height:1.5; }
  </style>
</head>
<body>

<div class="toc-overlay" id="tocOverlay"></div>

<!-- Table of Contents Sidebar -->
<nav class="toc-sidebar" id="tocSidebar">
  <div class="toc-header">üìö Table of Contents</div>
  <div class="toc-section">
    <div class="toc-section-title">Getting Started</div>
    <a href="#" class="toc-link" onclick="scrollToHero()">Introduction</a>
    <a href="#prerequisites" class="toc-link">Prerequisites</a>
    <a href="#dashboard-anchor" class="toc-link" onclick="event.preventDefault();openDashboardTab()">üìä Live Dashboard ‚Üó</a>
  </div>
  <div class="toc-section">
    <div class="toc-section-title">Day 1</div>
    <a href="#day1" class="toc-link day-link">Market Foundations</a>
    <a href="#day1" class="toc-link sub-link">What Is a Stock?</a>
    <a href="#day1" class="toc-link sub-link">Fundamental Analysis</a>
    <a href="#day1" class="toc-link sub-link">Market Catalysts</a>
    <a href="#day1" class="toc-link sub-link">Order Types</a>
  </div>
  <div class="toc-section">
    <div class="toc-section-title">Day 2</div>
    <a href="#day2" class="toc-link day-link">Reading Candlestick Charts</a>
    <a href="#day2" class="toc-link sub-link">Anatomy of a Candle</a>
    <a href="#day2" class="toc-link sub-link">Key Patterns</a>
    <a href="#day2" class="toc-link sub-link">Chart Patterns</a>
    <a href="#day2" class="toc-link sub-link">Multi-Timeframe Analysis</a>
    <a href="#day2" class="toc-link sub-link">Volume Analysis</a>
  </div>
  <div class="toc-section">
    <div class="toc-section-title">Day 3</div>
    <a href="#day3" class="toc-link day-link">Technical Analysis</a>
    <a href="#day3" class="toc-link sub-link">Support & Resistance</a>
    <a href="#day3" class="toc-link sub-link">Moving Averages</a>
    <a href="#day3" class="toc-link sub-link">RSI & MACD</a>
  </div>
  <div class="toc-section">
    <div class="toc-section-title">Day 4</div>
    <a href="#day4" class="toc-link day-link">Options Fundamentals</a>
    <a href="#day4" class="toc-link sub-link">Calls & Puts</a>
    <a href="#day4" class="toc-link sub-link">The Greeks</a>
    <a href="#day4" class="toc-link sub-link">Implied Volatility</a>
    <a href="#day4" class="toc-link sub-link">Options Chain</a>
  </div>
  <div class="toc-section">
    <div class="toc-section-title">Day 5</div>
    <a href="#day5" class="toc-link day-link">Options Strategies</a>
    <a href="#day5" class="toc-link sub-link">Covered Calls</a>
    <a href="#day5" class="toc-link sub-link">Spreads</a>
    <a href="#day5" class="toc-link sub-link">Iron Condors</a>
    <a href="#day5" class="toc-link sub-link">The Wheel Strategy</a>
    <a href="#day5" class="toc-link sub-link">Anatomy of a Trade</a>
  </div>
  <div class="toc-section">
    <div class="toc-section-title">Day 6</div>
    <a href="#day6" class="toc-link day-link">Risk Management & Psychology</a>
    <a href="#day6" class="toc-link sub-link">Position Sizing</a>
    <a href="#day6" class="toc-link sub-link">Tax Implications</a>
    <a href="#day6" class="toc-link sub-link">Stop Losses</a>
    <a href="#day6" class="toc-link sub-link">Trading Psychology</a>
  </div>
  <div class="toc-section">
    <div class="toc-section-title">Day 7</div>
    <a href="#day7" class="toc-link day-link">Building Your Trading Plan</a>
    <a href="#day7" class="toc-link sub-link">Strategy Selection</a>
    <a href="#day7" class="toc-link sub-link">Journaling</a>
    <a href="#day7" class="toc-link sub-link">Going Live</a>
  </div>
  <div class="toc-section">
    <div class="toc-section-title">Reference</div>
    <a href="#glossary" class="toc-link">Glossary</a>
    <a href="#patterns-ref" class="toc-link">Candlestick Patterns</a>
    <a href="#greeks-cheat" class="toc-link">The Greeks Cheatsheet</a>
    <a href="#mistakes" class="toc-link">Common Mistakes</a>
    <a href="#rules-of-the-game" class="toc-link">Timeless Rules</a>
    <a href="#dashboard-guide" class="toc-link">üìä Dashboard Guide</a>
    <a href="#resources" class="toc-link">Resources</a>
  </div>
</nav>
<!-- Hero Section -->
<section class="hero">
  <div class="hero-badge">7-Day Intensive Program</div>
  <h1>Trading Mastery Plan</h1>
  <p class="hero-subtitle">From zero to confident trader. Master stocks, candlestick charts, and options strategies through hands-on practice every single day. No paper trading without purpose ‚Äî only deliberate skill building.</p>
  <div class="hero-stats">
    <div class="stat"><div class="stat-number">7</div><div class="stat-label">Days</div></div>
    <div class="stat"><div class="stat-number">40+</div><div class="stat-label">Hours</div></div>
    <div class="stat"><div class="stat-number">20+</div><div class="stat-label">Exercises</div></div>
    <div class="stat"><div class="stat-number">‚àû</div><div class="stat-label">Profit Potential</div></div>
  </div>
</section>

<!-- Sticky Navigation -->
<nav class="nav">
  <div class="container nav-content">
    <div class="nav-logo">üìà Trading Mastery</div>
    <div class="nav-items">
      <a href="#day1" class="nav-day" onclick="showCourse()">1</a>
      <a href="#day2" class="nav-day" onclick="showCourse()">2</a>
      <a href="#day3" class="nav-day" onclick="showCourse()">3</a>
      <a href="#day4" class="nav-day" onclick="showCourse()">4</a>
      <a href="#day5" class="nav-day" onclick="showCourse()">5</a>
      <a href="#day6" class="nav-day" onclick="showCourse()">6</a>
      <a href="#day7" class="nav-day" onclick="showCourse()">7</a>
      <button class="nav-dash-btn" onclick="openDashboardTab()">üìä Dashboard ‚Üó</button>
    </div>
  </div>
</nav>

<!-- TOC Toggle (left) -->
<button class="toc-toggle" id="tocToggle" aria-label="Open table of contents">üìë</button>
<!-- Theme Toggle (right) -->
<button class="theme-toggle" id="themeToggle" aria-label="Toggle dark/light theme">
  <span class="theme-toggle-label">Theme</span>
  <div class="theme-toggle-track"><div class="theme-toggle-thumb">üåô</div></div>
</button>
<!-- ==================== COURSE CONTENT ==================== -->
<div class="course-content" id="courseContent">
<main class="container">

<!-- Author's Note -->
<div class="author-note">
  <p><strong>I've been trading for over 20 years and have seen thousands of traders blow up their accounts.</strong> The #1 mistake? Jumping into options before understanding how stocks move. Every day here builds on the last with <strong>mandatory exercises</strong>. Skip them and you'll donate your money to Wall Street. Period.</p>
</div>

<!-- Disclaimer -->
<div class="warning">
  <strong>DISCLAIMER:</strong> This course is for educational purposes only. Trading involves substantial risk of loss. Past performance does not guarantee future results. Never trade with money you cannot afford to lose. This is not financial advice.
</div>

<!-- Prerequisites -->
<section id="prerequisites">
<h2>üìã Before You Begin</h2>
<p><em>Set these up before Day 1. No excuses.</em></p>

<div class="checklist">
  <div class="checklist-header">
    <div class="checklist-icon">üõ†Ô∏è</div>
    <div class="checklist-title">Required Setup</div>
  </div>
  <ul class="task-list">
    <li><label><input type="checkbox" /> Paper trading account (ThinkorSwim, Webull, or TradingView paper)</label></li>
    <li><label><input type="checkbox" /> TradingView free account for charting</label></li>
    <li><label><input type="checkbox" /> Trading journal (spreadsheet or notebook)</label></li>
    <li><label><input type="checkbox" /> $0 real money at risk during this course</label></li>
    <li><label><input type="checkbox" /> Quiet workspace with dual monitors (recommended)</label></li>
  </ul>
</div>
</section>

<hr />

<!-- ==================== DAY 1 ==================== -->
<section class="day-section" id="day1">
  <div class="day-header">
    <div class="day-number"><span>Day</span><span>1</span></div>
    <div>
      <div class="day-title">Market Foundations & How Stocks Work</div>
      <div class="day-time">5‚Äì6 hours</div>
    </div>
  </div>
  <div class="progress-bar"><div class="progress-fill" style="width:14%"></div></div>

  <div class="day-schedule">
    <span class="day-schedule-label">How to spend your time ‚Üí</span>
    <span class="day-schedule-item"><span class="sch-icon">üìñ</span> Read material <span class="sch-time">30 min</span></span>
    <span class="day-schedule-item"><span class="sch-icon">ü§ñ</span> AI tutoring session <span class="sch-time">1.5 hr</span></span>
    <span class="day-schedule-item"><span class="sch-icon">üîç</span> Research stocks (fundamentals + catalysts) <span class="sch-time">1 hr</span></span>
    <span class="day-schedule-item"><span class="sch-icon">üìù</span> Paper trading exercises <span class="sch-time">1.5 hr</span></span>
    <span class="day-schedule-item"><span class="sch-icon">üìì</span> Journal + reflection <span class="sch-time">30 min</span></span>
  </div>

  <h3>What Is a Stock?</h3>
  <p>A stock represents fractional ownership in a company. When you buy a share of Apple (AAPL), you literally own a tiny piece of that company ‚Äî its assets, earnings, and future growth.</p>
  
  <table>
    <thead><tr><th>Concept</th><th>What It Means</th><th>Why It Matters</th></tr></thead>
    <tbody>
      <tr><td><strong>Share</strong></td><td>One unit of ownership</td><td>The building block of every trade</td></tr>
      <tr><td><strong>Market Cap</strong></td><td>Share price √ó total shares</td><td>Tells you the company's total value</td></tr>
      <tr><td><strong>Float</strong></td><td>Shares available for public trading</td><td>Low float = more volatile moves</td></tr>
      <tr><td><strong>Volume</strong></td><td>Number of shares traded per day</td><td>High volume = easier to enter/exit</td></tr>
      <tr><td><strong>Bid/Ask</strong></td><td>Highest buy price / lowest sell price</td><td>The spread is your first cost</td></tr>
      <tr><td><strong>Spread</strong></td><td>Difference between bid and ask</td><td>Tight spread = liquid stock</td></tr>
    </tbody>
  </table>

  <h3>Market Structure</h3>
  <p>The stock market isn't one place ‚Äî it's a network of exchanges (NYSE, NASDAQ) and dark pools. Understanding the flow of orders is fundamental.</p>
  
  <h4>Market Hours (Eastern Time)</h4>
  <table>
    <thead><tr><th>Session</th><th>Time</th><th>Character</th></tr></thead>
    <tbody>
      <tr><td>Pre-Market</td><td>4:00 AM ‚Äì 9:30 AM</td><td>Low volume, wide spreads, gap reactions</td></tr>
      <tr><td><strong>Opening Bell</strong></td><td>9:30 AM ‚Äì 10:30 AM</td><td>Highest volatility, most opportunity</td></tr>
      <tr><td>Mid-Day</td><td>10:30 AM ‚Äì 2:00 PM</td><td>Choppy, low volume "dead zone"</td></tr>
      <tr><td><strong>Power Hour</strong></td><td>3:00 PM ‚Äì 4:00 PM</td><td>Institutional positioning, strong moves</td></tr>
      <tr><td>After-Hours</td><td>4:00 PM ‚Äì 8:00 PM</td><td>Earnings reactions, thin liquidity</td></tr>
    </tbody>
  </table>

  <div class="pro-tip">
    <strong>The first 15 minutes after open are for watching, not trading.</strong> Let the market show its hand. Amateurs rush in at 9:30. Professionals wait for the setup.
  </div>

  <h3>Fundamental Analysis ‚Äî What Moves Stock Prices</h3>
  <p>Technical analysis tells you <em>when</em> to trade. Fundamental analysis tells you <em>what</em> to trade. You need both.</p>

  <table>
    <thead><tr><th>Metric</th><th>What It Tells You</th><th>Good Sign</th><th>Red Flag</th></tr></thead>
    <tbody>
      <tr><td><strong>P/E Ratio</strong></td><td>Price relative to earnings</td><td>Below industry average</td><td>Extremely high with no growth to justify it</td></tr>
      <tr><td><strong>EPS (Earnings Per Share)</strong></td><td>Profit per share</td><td>Growing quarter over quarter</td><td>Declining or negative trend</td></tr>
      <tr><td><strong>Revenue Growth</strong></td><td>Is the business growing?</td><td>Consistent 10%+ YoY growth</td><td>Shrinking revenue with rising stock price</td></tr>
      <tr><td><strong>Debt-to-Equity</strong></td><td>How leveraged is the company?</td><td>Below 1.0 for most industries</td><td>Above 2.0 with declining earnings</td></tr>
      <tr><td><strong>Free Cash Flow</strong></td><td>Cash left after expenses</td><td>Positive and growing</td><td>Negative FCF burning through cash</td></tr>
      <tr><td><strong>Profit Margin</strong></td><td>How much of revenue becomes profit</td><td>Expanding margins</td><td>Shrinking margins despite revenue growth</td></tr>
    </tbody>
  </table>

  <div class="pro-tip">
    <strong>You don't need to be an accountant.</strong> Just check these 3 things before any swing trade or options play: Is EPS growing? Is revenue growing? Is the P/E reasonable for the sector? If all three are yes, the stock has a fundamental tailwind behind your technical setup.
  </div>

  <h3>Market Catalysts ‚Äî What Causes Big Moves</h3>
  <p>Stocks don't move randomly. These events create the volatility traders need:</p>
  <table>
    <thead><tr><th>Catalyst</th><th>Impact</th><th>How to Prepare</th></tr></thead>
    <tbody>
      <tr><td><strong>Earnings Reports</strong></td><td>Biggest single-day moves. Can gap 5-20%.</td><td>Check earnings calendar weekly. Never hold options through earnings unless it's your strategy.</td></tr>
      <tr><td><strong>Fed Meetings (FOMC)</strong></td><td>Interest rate decisions move the entire market</td><td>8 meetings/year. Market is volatile 2 days before and after. Reduce position size.</td></tr>
      <tr><td><strong>CPI / Jobs Report</strong></td><td>Inflation and employment data shift market sentiment</td><td>Released monthly. Pre-market volatility spike. Wait for dust to settle.</td></tr>
      <tr><td><strong>Sector News</strong></td><td>FDA approvals, oil prices, tech regulations</td><td>Know what sector your stock is in. One company's news moves the whole sector.</td></tr>
      <tr><td><strong>Analyst Upgrades/Downgrades</strong></td><td>Pre-market gaps, momentum shifts</td><td>Check pre-market news before trading. Don't chase the gap.</td></tr>
      <tr><td><strong>Stock Splits / Buybacks</strong></td><td>Sentiment boost, increased liquidity</td><td>Usually bullish short-term. Not a reason to buy alone.</td></tr>
    </tbody>
  </table>

  <div class="warning">
    <strong>Earnings are the most dangerous time for option holders.</strong> Implied volatility (IV) inflates before earnings and collapses after ‚Äî this is called "IV crush." Even if you're right about direction, IV crush can destroy your option's value. We'll cover this in depth on Day 4.
  </div>

  <h3>Order Types Every Trader Must Know</h3>
  <table>
    <thead><tr><th>Order Type</th><th>How It Works</th><th>When to Use</th></tr></thead>
    <tbody>
      <tr><td><strong>Market Order</strong></td><td>Executes immediately at best available price</td><td>When speed matters more than price</td></tr>
      <tr><td><strong>Limit Order</strong></td><td>Executes only at your specified price or better</td><td>Default for most trades ‚Äî always use this</td></tr>
      <tr><td><strong>Stop Loss</strong></td><td>Becomes market order when price hits trigger</td><td>Protecting against catastrophic loss</td></tr>
      <tr><td><strong>Stop Limit</strong></td><td>Becomes limit order when price hits trigger</td><td>More control but may not fill in fast moves</td></tr>
      <tr><td><strong>Trailing Stop</strong></td><td>Stop that moves with price by fixed amount/%</td><td>Locking in profits on a winning trade</td></tr>
    </tbody>
  </table>

  <div class="warning">
    <strong>NEVER use market orders on low-volume stocks or options.</strong> You will get filled at terrible prices. Limit orders are your best friend. Treat market orders like emergency exits only.
  </div>

  <div class="exercise">
    <div class="exercise-header">
      <span class="exercise-badge">Exercise</span>
      <span class="exercise-title">Paper Trade Setup & First Orders</span>
    </div>
    <ol>
      <li>Open your paper trading account</li>
      <li>Look up AAPL, MSFT, and SPY ‚Äî note the bid, ask, spread, and volume</li>
      <li>Place a <strong>limit buy</strong> order for 10 shares of SPY at $1 below current price</li>
      <li>Place a <strong>market buy</strong> order for 1 share of AAPL ‚Äî note the fill price vs. the price you saw</li>
      <li>Set a <strong>stop loss</strong> on your AAPL position at 2% below your entry</li>
      <li>Record everything in your trading journal: entry price, time, reasoning</li>
    </ol>
  </div>

  <!-- Day 1 Interactive Prompt -->
  <div class="prompt-box">
    <div class="prompt-box-header">
      <div class="prompt-box-title">Interactive Learning Session</div>
      <button class="copy-btn" onclick="copyPrompt(this, 'day1-prompt')">
        <span>üìã</span> Copy Prompt
      </button>
    </div>
    <div class="prompt-content" id="day1-prompt">## ROLE
You are a veteran Wall Street trader with 20+ years of experience who has profitably traded through every market cycle since the dot-com bubble. You specialize in teaching complete beginners.

## SUCCESS CRITERIA
Session is complete when I can:
- Explain what a stock is and how shares represent ownership
- Describe the difference between bid, ask, and spread
- Name all major market sessions and their characteristics
- Place limit orders, market orders, and stop losses correctly
- Explain why limit orders are preferred over market orders
- Evaluate a stock using fundamental metrics: P/E ratio, EPS, revenue growth, debt-to-equity, free cash flow, and profit margins
- Identify the 6 major market catalysts and explain how each moves stock prices
- Explain why earnings reports, FOMC meetings, and CPI data create volatility

## TEACHING METHOD
- Socratic: Ask questions, don't give answers directly
- One concept at a time, max 3 minutes per concept
- After each concept: I must explain it back in my own words
- Use real money analogies (buying a house, auction, etc.)
- If I'm wrong: ask guiding questions, don't correct immediately
- Always connect to risk: "How could this cost you money?"
- For fundamentals: use real company comparisons (e.g., compare P/E of a growth stock vs. value stock)
- For catalysts: reference recent real-world events to illustrate impact

## CONSTRAINTS
- If unsure about my knowledge level ‚Üí ask before assuming
- If I give a vague answer ‚Üí probe deeper with "What do you mean by...?"
- Never skip the "explain back" step
- No more than 2 concepts before a practical challenge
- Always emphasize: "Paper trade first, real money later"
- Never let me think a low P/E automatically means "cheap" ‚Äî context matters
- Always pair catalyst discussion with "How would you position BEFORE this event?"

## SESSION STRUCTURE
1. Assess my investing/trading background (3 questions max)
2. What is a stock ‚Üí challenge: explain ownership in your own words
3. Market structure ‚Üí challenge: name the best and worst times to trade
4. Order types deep-dive ‚Üí challenge: which order type for each scenario?
5. Bid/Ask/Spread ‚Üí challenge: calculate the cost of a spread on a real stock
6. Fundamental Analysis ‚Üí challenge: given P/E, EPS, debt-to-equity, and FCF for two companies, which is the better investment and why?
7. Market Catalysts ‚Üí challenge: here's a calendar of upcoming events ‚Äî which ones should a trader prepare for and how?
8. Place paper trades together ‚Üí I decide, you validate my reasoning
9. Verification: quiz me on 7 rapid-fire scenarios (including 2 on fundamentals and catalysts)
10. Reflection: summarize what we learned in 3 bullets

## PROGRESS TRACKING
After completing each milestone above, tell me:
"‚úÖ Milestone [N]/10 complete ‚Äî [N√ó10]% of Day 1 done!"

## OUTPUT FORMAT
Each teaching segment:
1. Brief explanation (2-3 sentences max)
2. Real-world analogy
3. "Now explain this back to me..."
4. Mini-challenge
5. Feedback + correction if needed
6. "Ready for next topic?" before proceeding

## SELF-CHECK (Run before each new topic)
‚òê Did student explain the concept correctly?
‚òê Did student complete the challenge?
‚òê Did student understand the risk implications?
‚òê Can student evaluate a stock using at least 4 fundamental metrics?
‚òê Can student name 3 upcoming catalysts and explain their expected impact?</div>
    <div class="prompt-hint">üí° Copy this prompt and paste it into ChatGPT, Claude, or any AI assistant for a personalized tutoring session on Day 1 material.</div>
  </div>

  <div class="checklist">
    <div class="checklist-header">
      <div class="checklist-icon">‚úÖ</div>
      <div class="checklist-title">Day 1 Completion Checklist</div>
    </div>
    <ul class="task-list">
      <li><label><input type="checkbox" /> Can explain what a stock is and how shares work</label></li>
      <li><label><input type="checkbox" /> Know all 5 order types and when to use each</label></li>
      <li><label><input type="checkbox" /> Understand market hours and session characteristics</label></li>
      <li><label><input type="checkbox" /> Can evaluate a stock using P/E, EPS, revenue growth, and debt-to-equity</label></li>
      <li><label><input type="checkbox" /> Can name 6 market catalysts and explain how to prepare for each</label></li>
      <li><label><input type="checkbox" /> Placed at least 3 paper trades with different order types</label></li>
      <li><label><input type="checkbox" /> Started trading journal with first entries</label></li>
    </ul>
  </div>
</section>
<hr />

<!-- ==================== DAY 2 ==================== -->
<section class="day-section" id="day2">
  <div class="day-header">
    <div class="day-number"><span>Day</span><span>2</span></div>
    <div>
      <div class="day-title">Reading Candlestick Charts Like a Pro</div>
      <div class="day-time">6‚Äì7 hours</div>
    </div>
  </div>
  <div class="progress-bar"><div class="progress-fill" style="width:28%"></div></div>

  <div class="day-schedule">
    <span class="day-schedule-label">How to spend your time ‚Üí</span>
    <span class="day-schedule-item"><span class="sch-icon">üìñ</span> Read material <span class="sch-time">30 min</span></span>
    <span class="day-schedule-item"><span class="sch-icon">ü§ñ</span> AI tutoring session <span class="sch-time">1.5 hr</span></span>
    <span class="day-schedule-item"><span class="sch-icon">üìä</span> Chart practice on TradingView <span class="sch-time">2 hr</span></span>
    <span class="day-schedule-item"><span class="sch-icon">üîé</span> Pattern hunting (multi-timeframe) <span class="sch-time">1.5 hr</span></span>
    <span class="day-schedule-item"><span class="sch-icon">üìì</span> Annotate screenshots + journal <span class="sch-time">30 min</span></span>
  </div>

  <h3>Anatomy of a Candlestick</h3>
  <p>Every candle tells a story of the battle between buyers and sellers during a specific time period. Learn to read them and you can read the market's mood.</p>

  <table>
    <thead><tr><th>Component</th><th>What It Shows</th><th>Key Insight</th></tr></thead>
    <tbody>
      <tr><td><strong>Body (Real Body)</strong></td><td>Distance between open and close</td><td>Large body = strong conviction</td></tr>
      <tr><td><strong>Upper Wick/Shadow</strong></td><td>High of period minus close (or open)</td><td>Long upper wick = sellers rejected higher prices</td></tr>
      <tr><td><strong>Lower Wick/Shadow</strong></td><td>Open (or close) minus low of period</td><td>Long lower wick = buyers stepped in at lows</td></tr>
      <tr><td><strong>Green/White Candle</strong></td><td>Close > Open (bullish)</td><td>Buyers won this period</td></tr>
      <tr><td><strong>Red/Black Candle</strong></td><td>Close < Open (bearish)</td><td>Sellers won this period</td></tr>
    </tbody>
  </table>

  <h3>Essential Single-Candle Patterns</h3>
  <table>
    <thead><tr><th>Pattern</th><th>Appearance</th><th>Signal</th><th>Reliability</th></tr></thead>
    <tbody>
      <tr><td><strong>Doji</strong></td><td>Tiny body, equal wicks</td><td>Indecision ‚Äî trend may reverse</td><td>‚≠ê‚≠ê‚≠ê</td></tr>
      <tr><td><strong>Hammer</strong></td><td>Small body top, long lower wick</td><td>Bullish reversal at support</td><td>‚≠ê‚≠ê‚≠ê‚≠ê</td></tr>
      <tr><td><strong>Shooting Star</strong></td><td>Small body bottom, long upper wick</td><td>Bearish reversal at resistance</td><td>‚≠ê‚≠ê‚≠ê‚≠ê</td></tr>
      <tr><td><strong>Marubozu</strong></td><td>Full body, no wicks</td><td>Extreme conviction in direction</td><td>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td></tr>
      <tr><td><strong>Spinning Top</strong></td><td>Small body, equal long wicks</td><td>Indecision, weakening trend</td><td>‚≠ê‚≠ê</td></tr>
    </tbody>
  </table>

  <h3>Multi-Candle Patterns That Actually Work</h3>
  <table>
    <thead><tr><th>Pattern</th><th>Candles</th><th>Signal</th><th>How to Trade It</th></tr></thead>
    <tbody>
      <tr><td><strong>Engulfing (Bullish)</strong></td><td>2</td><td>Reversal up</td><td>Enter on close of engulfing candle, stop below its low</td></tr>
      <tr><td><strong>Engulfing (Bearish)</strong></td><td>2</td><td>Reversal down</td><td>Short on close, stop above its high</td></tr>
      <tr><td><strong>Morning Star</strong></td><td>3</td><td>Bullish reversal</td><td>Enter on 3rd candle confirmation, stop below star</td></tr>
      <tr><td><strong>Evening Star</strong></td><td>3</td><td>Bearish reversal</td><td>Short on 3rd candle, stop above star</td></tr>
      <tr><td><strong>Three White Soldiers</strong></td><td>3</td><td>Strong bullish continuation</td><td>Enter on pullback after pattern completes</td></tr>
      <tr><td><strong>Three Black Crows</strong></td><td>3</td><td>Strong bearish continuation</td><td>Short on pullback after pattern completes</td></tr>
    </tbody>
  </table>

  <div class="pro-tip">
    <strong>Candlestick patterns are NOT standalone signals.</strong> A hammer at a major support level with high volume is a trade. A hammer in the middle of nowhere is noise. Always combine patterns with context: support/resistance, volume, and trend.
  </div>

  <h3>Volume ‚Äî The Truth Serum of the Market</h3>
  <p>Price tells you what happened. Volume tells you if it matters.</p>
  <ul>
    <li><strong>Rising price + rising volume</strong> = Healthy trend, likely to continue</li>
    <li><strong>Rising price + falling volume</strong> = Weak rally, potential reversal ahead</li>
    <li><strong>Falling price + rising volume</strong> = Strong selling, panic or capitulation</li>
    <li><strong>Falling price + falling volume</strong> = Weak selling, potential bottom forming</li>
    <li><strong>Volume spike on breakout</strong> = Confirmation ‚Äî the move is real</li>
    <li><strong>Volume spike on reversal candle</strong> = Smart money stepping in</li>
  </ul>

  <h3>Chart Patterns ‚Äî The Bigger Picture</h3>
  <p>Candlestick patterns show you micro-moves. Chart patterns show you macro-structure ‚Äî where price is likely headed over days or weeks.</p>

  <table>
    <thead><tr><th>Pattern</th><th>Type</th><th>What It Looks Like</th><th>Expected Move</th></tr></thead>
    <tbody>
      <tr><td><strong>Bull Flag</strong></td><td>Continuation</td><td>Sharp rally ‚Üí tight downward channel</td><td>Breakout upward, target = flagpole height</td></tr>
      <tr><td><strong>Bear Flag</strong></td><td>Continuation</td><td>Sharp drop ‚Üí tight upward channel</td><td>Breakdown, target = flagpole height</td></tr>
      <tr><td><strong>Ascending Triangle</strong></td><td>Bullish</td><td>Flat resistance + rising support</td><td>Breakout above resistance</td></tr>
      <tr><td><strong>Descending Triangle</strong></td><td>Bearish</td><td>Flat support + falling resistance</td><td>Breakdown below support</td></tr>
      <tr><td><strong>Head & Shoulders</strong></td><td>Reversal</td><td>Three peaks: middle highest</td><td>Bearish ‚Äî break below neckline, target = head-to-neckline distance</td></tr>
      <tr><td><strong>Inverse H&S</strong></td><td>Reversal</td><td>Three troughs: middle lowest</td><td>Bullish ‚Äî break above neckline</td></tr>
      <tr><td><strong>Double Top</strong></td><td>Reversal</td><td>Two peaks at same level, "M" shape</td><td>Bearish ‚Äî break below valley between peaks</td></tr>
      <tr><td><strong>Double Bottom</strong></td><td>Reversal</td><td>Two troughs at same level, "W" shape</td><td>Bullish ‚Äî break above peak between troughs</td></tr>
      <tr><td><strong>Rising Wedge</strong></td><td>Bearish</td><td>Converging trendlines, both rising</td><td>Breakdown ‚Äî momentum is fading</td></tr>
      <tr><td><strong>Falling Wedge</strong></td><td>Bullish</td><td>Converging trendlines, both falling</td><td>Breakout ‚Äî selling pressure exhausting</td></tr>
      <tr><td><strong>Cup & Handle</strong></td><td>Bullish</td><td>Rounded bottom + small pullback</td><td>Breakout above handle, target = cup depth</td></tr>
    </tbody>
  </table>

  <div class="pro-tip">
    <strong>Chart patterns need volume confirmation.</strong> A breakout from a bull flag on 3√ó average volume is a high-conviction trade. The same breakout on low volume is a trap. Always check volume before entering a pattern trade.
  </div>

  <h3>Multi-Timeframe Analysis ‚Äî How Pros Confirm Trades</h3>
  <p>Never trade on a single timeframe. Professionals use at least 2-3 timeframes to confirm their thesis:</p>
  <table>
    <thead><tr><th>Your Trading Style</th><th>Trend Timeframe</th><th>Entry Timeframe</th><th>Precision Timeframe</th></tr></thead>
    <tbody>
      <tr><td><strong>Day Trading</strong></td><td>Daily chart</td><td>15-minute chart</td><td>1-5 minute chart</td></tr>
      <tr><td><strong>Swing Trading</strong></td><td>Weekly chart</td><td>Daily chart</td><td>4-hour chart</td></tr>
      <tr><td><strong>Position Trading</strong></td><td>Monthly chart</td><td>Weekly chart</td><td>Daily chart</td></tr>
    </tbody>
  </table>
  <p><strong>The rule:</strong> Identify the trend on the higher timeframe. Find your entry on the middle timeframe. Fine-tune on the lower timeframe. <em>Never</em> trade against the higher timeframe trend.</p>

  <div class="exercise">
    <div class="exercise-header">
      <span class="exercise-badge">Exercise</span>
      <span class="exercise-title">Chart Reading Bootcamp</span>
    </div>
    <ol>
      <li>Open TradingView and pull up SPY on a <strong>daily</strong> timeframe</li>
      <li>Identify at least 5 candlestick patterns from the last 3 months</li>
      <li>For each pattern, note: what happened next? Did the signal work?</li>
      <li>Switch to a <strong>5-minute</strong> chart ‚Äî find 3 patterns from today's session</li>
      <li>Add volume bars and identify 2 instances where volume confirmed a move</li>
      <li>Screenshot your findings and paste them in your journal with annotations</li>
    </ol>
  </div>

  <!-- Day 2 Interactive Prompt -->
  <div class="prompt-box">
    <div class="prompt-box-header">
      <div class="prompt-box-title">Interactive Learning Session</div>
      <button class="copy-btn" onclick="copyPrompt(this, 'day2-prompt')">
        <span>üìã</span> Copy Prompt
      </button>
    </div>
    <div class="prompt-content" id="day2-prompt">## ROLE
You are a professional technical analyst and chart reading expert who has analyzed over 100,000 candlestick charts. You teach pattern recognition through deliberate practice.

## SUCCESS CRITERIA
Session is complete when I can:
- Identify all parts of a candlestick (body, wicks, open, close, high, low)
- Distinguish between bullish and bearish candles instantly
- Spot hammer, doji, engulfing, and morning/evening star patterns
- Explain what volume confirms and when it diverges
- Read a real chart and narrate the story the candles are telling
- Identify 11 chart patterns: bull/bear flags, ascending/descending triangles, head &amp; shoulders, inverse H&amp;S, double top/bottom, rising/falling wedge, cup &amp; handle
- Apply multi-timeframe analysis: choose the correct trend/entry/precision timeframes for day trading, swing trading, and position trading
- Explain why a pattern on a 5-min chart means something different than the same pattern on a weekly chart

## TEACHING METHOD
- Show me a pattern description, then quiz me on what it means
- Use the "What happened here?" approach ‚Äî describe a candle, I interpret
- Build complexity: single candles ‚Üí double ‚Üí triple ‚Üí chart patterns
- After each pattern: give me 3 scenarios, I identify which pattern it is
- Always ask: "Would you trade this? Why or why not?"
- For chart patterns: describe the shape, I name it and state the expected breakout direction
- For multi-timeframe: show me conflicting signals across timeframes and ask which one wins

## CONSTRAINTS
- Never show more than 2 new patterns before testing me
- If I confuse patterns ‚Üí go back and compare them side by side
- Always pair patterns with context: "Where on the chart does this matter?"
- Emphasize: patterns without context are meaningless noise
- Volume must be discussed with every pattern
- Chart patterns must include measured move targets ‚Äî not just "it breaks out"
- Multi-timeframe analysis is mandatory: never let me trade a pattern on a single timeframe

## SESSION STRUCTURE
1. Quick review: what do I already know about charts? (2 questions)
2. Candle anatomy ‚Üí challenge: describe what a long lower wick means
3. Single candle patterns ‚Üí challenge: identify 5 patterns from descriptions
4. Multi-candle patterns ‚Üí challenge: spot the reversal signal
5. Chart patterns ‚Üí challenge: I describe 5 chart setups, you identify the pattern, breakout direction, and measured move target
6. Volume analysis ‚Üí challenge: bullish or bearish? (4 scenarios with volume)
7. Multi-timeframe analysis ‚Üí challenge: given a daily uptrend, 4H pullback, and 15-min hammer ‚Äî what's the trade? What if the daily was a downtrend instead?
8. Live chart reading ‚Üí I narrate what I see on a real chart using multiple timeframes
9. Pattern + context quiz: 5 scenarios combining patterns with S/R levels and timeframe alignment
10. Reflection: "What's the one pattern you'd trade with real money today, and on which timeframe?"

## PROGRESS TRACKING
After completing each milestone above, tell me:
"‚úÖ Milestone [N]/10 complete ‚Äî [N√ó10]% of Day 2 done!"

## OUTPUT FORMAT
Each pattern taught:
1. Name and visual description (use text art if helpful)
2. What it signals and WHY (supply/demand explanation)
3. "Now describe this pattern back to me..."
4. Scenario quiz (is this pattern present? would you trade it?)
5. Volume confirmation check
6. Timeframe check: "What timeframe are you seeing this on? Does the higher timeframe agree?"
7. "Ready for the next pattern?" before proceeding

## SELF-CHECK
‚òê Can student identify the pattern without hints?
‚òê Does student understand WHY the pattern works (not just what it looks like)?
‚òê Does student check volume before making a trading decision?
‚òê Can student identify all 11 chart patterns and their breakout directions?
‚òê Can student apply multi-timeframe analysis to confirm or reject a trade setup?</div>
    <div class="prompt-hint">üí° Copy this prompt and paste it into ChatGPT, Claude, or any AI assistant for a personalized tutoring session on Day 2 material.</div>
  </div>

  <div class="checklist">
    <div class="checklist-header">
      <div class="checklist-icon">‚úÖ</div>
      <div class="checklist-title">Day 2 Completion Checklist</div>
    </div>
    <ul class="task-list">
      <li><label><input type="checkbox" /> Can identify all 5 single-candle patterns on a live chart</label></li>
      <li><label><input type="checkbox" /> Can spot engulfing, morning star, and evening star patterns</label></li>
      <li><label><input type="checkbox" /> Can identify 11 chart patterns and their expected breakout directions</label></li>
      <li><label><input type="checkbox" /> Can apply multi-timeframe analysis for day, swing, and position trading</label></li>
      <li><label><input type="checkbox" /> Understand volume confirmation and divergence</label></li>
      <li><label><input type="checkbox" /> Completed chart reading exercise with 8+ patterns identified</label></li>
      <li><label><input type="checkbox" /> Journal updated with annotated screenshots</label></li>
    </ul>
  </div>
</section>
<hr />

<!-- ==================== DAY 3 ==================== -->
<section class="day-section" id="day3">
  <div class="day-header">
    <div class="day-number"><span>Day</span><span>3</span></div>
    <div>
      <div class="day-title">Technical Analysis ‚Äî The Trader's Toolkit</div>
      <div class="day-time">6‚Äì7 hours</div>
    </div>
  </div>
  <div class="progress-bar"><div class="progress-fill" style="width:42%"></div></div>

  <div class="day-schedule">
    <span class="day-schedule-label">How to spend your time ‚Üí</span>
    <span class="day-schedule-item"><span class="sch-icon">üìñ</span> Read material <span class="sch-time">30 min</span></span>
    <span class="day-schedule-item"><span class="sch-icon">ü§ñ</span> AI tutoring session <span class="sch-time">1.5 hr</span></span>
    <span class="day-schedule-item"><span class="sch-icon">üìä</span> Add indicators to charts + practice <span class="sch-time">2 hr</span></span>
    <span class="day-schedule-item"><span class="sch-icon">üìù</span> Paper trade based on setups found <span class="sch-time">1.5 hr</span></span>
    <span class="day-schedule-item"><span class="sch-icon">üìì</span> Journal trades with reasoning <span class="sch-time">30 min</span></span>
  </div>

  <h3>Support & Resistance ‚Äî The Foundation of Every Trade</h3>
  <p>Support is a price level where buying pressure consistently overcomes selling pressure. Resistance is where selling overcomes buying. These are the most important lines on your chart.</p>

  <table>
    <thead><tr><th>Level Type</th><th>How to Identify</th><th>Trading Application</th></tr></thead>
    <tbody>
      <tr><td><strong>Horizontal S/R</strong></td><td>Multiple touches at same price</td><td>Buy at support, sell at resistance</td></tr>
      <tr><td><strong>Trendlines</strong></td><td>Connect swing highs or swing lows</td><td>Trade bounces off trendline</td></tr>
      <tr><td><strong>Round Numbers</strong></td><td>$50, $100, $200, etc.</td><td>Psychological levels ‚Äî expect reactions</td></tr>
      <tr><td><strong>Previous Day High/Low</strong></td><td>Yesterday's extreme prices</td><td>Key intraday levels for day traders</td></tr>
      <tr><td><strong>VWAP</strong></td><td>Volume-weighted average price</td><td>Institutional benchmark ‚Äî above = bullish bias</td></tr>
    </tbody>
  </table>

  <div class="warning">
    <strong>Support and resistance are ZONES, not exact lines.</strong> Don't expect price to bounce at $150.00 exactly. Think $149.50‚Äì$150.50. The more touches a level has, the stronger it is ‚Äî but also the more likely it eventually breaks.
  </div>

  <h3>Moving Averages ‚Äî Trend Direction at a Glance</h3>
  <table>
    <thead><tr><th>Moving Average</th><th>Period</th><th>Use Case</th></tr></thead>
    <tbody>
      <tr><td><strong>9 EMA</strong></td><td>Short-term</td><td>Scalping, intraday momentum</td></tr>
      <tr><td><strong>20 EMA</strong></td><td>Short-term</td><td>Swing trade entries, pullback buys</td></tr>
      <tr><td><strong>50 SMA</strong></td><td>Medium-term</td><td>Trend direction, institutional level</td></tr>
      <tr><td><strong>200 SMA</strong></td><td>Long-term</td><td>Bull vs. bear market dividing line</td></tr>
    </tbody>
  </table>

  <div class="pro-tip">
    <strong>The "Golden Cross" (50 SMA crossing above 200 SMA) and "Death Cross" (50 crossing below 200) are lagging signals.</strong> By the time they trigger, the move is often 60‚Äì70% done. Use them for confirmation, not entries.
  </div>

  <h3>RSI ‚Äî Relative Strength Index</h3>
  <p>RSI measures momentum on a 0‚Äì100 scale. It tells you if a stock is overbought or oversold.</p>
  <ul>
    <li><strong>Above 70</strong> = Overbought ‚Äî potential pullback coming</li>
    <li><strong>Below 30</strong> = Oversold ‚Äî potential bounce coming</li>
    <li><strong>RSI Divergence</strong> = Price makes new high but RSI doesn't ‚Üí weakening momentum</li>
    <li><strong>Best use:</strong> Combine with support/resistance. RSI oversold AT support = high-probability long</li>
  </ul>

  <h3>MACD ‚Äî Moving Average Convergence Divergence</h3>
  <p>MACD shows the relationship between two moving averages and generates signals through crossovers.</p>
  <ul>
    <li><strong>MACD Line crosses above Signal Line</strong> = Bullish momentum</li>
    <li><strong>MACD Line crosses below Signal Line</strong> = Bearish momentum</li>
    <li><strong>Histogram growing</strong> = Momentum accelerating</li>
    <li><strong>Histogram shrinking</strong> = Momentum fading</li>
    <li><strong>Zero line crossover</strong> = Trend change confirmation</li>
  </ul>

  <div class="exercise">
    <div class="exercise-header">
      <span class="exercise-badge">Exercise</span>
      <span class="exercise-title">Technical Analysis Lab</span>
    </div>
    <ol>
      <li>On TradingView, add these to SPY daily chart: 20 EMA, 50 SMA, 200 SMA, RSI(14), MACD</li>
      <li>Draw horizontal support and resistance lines at 3 key levels</li>
      <li>Find 2 instances where RSI divergence predicted a reversal</li>
      <li>Find 2 MACD crossover signals ‚Äî did they work? How much lag was there?</li>
      <li>Identify the current trend using moving average positions</li>
      <li>Paper trade: Enter a position based on a technical setup you identified. Document your reasoning.</li>
    </ol>
  </div>

  <!-- Day 3 Interactive Prompt -->
  <div class="prompt-box">
    <div class="prompt-box-header">
      <div class="prompt-box-title">Interactive Learning Session</div>
      <button class="copy-btn" onclick="copyPrompt(this, 'day3-prompt')">
        <span>üìã</span> Copy Prompt
      </button>
    </div>
    <div class="prompt-content" id="day3-prompt">## ROLE
You are a quantitative technical analyst who has built trading systems for hedge funds. You teach technical analysis as a probabilistic framework, not a crystal ball.

## SUCCESS CRITERIA
Session is complete when I can:
- Draw support and resistance zones (not lines) on any chart
- Explain why S/R works (order flow, institutional memory)
- Use 9 EMA, 20 EMA, 50 SMA, and 200 SMA correctly for different timeframes
- Interpret RSI for overbought/oversold AND divergence signals
- Read MACD crossovers, histogram, and zero-line crosses
- Combine 2+ indicators to form a trade thesis

## TEACHING METHOD
- Teach each indicator in isolation first, then combine
- For each indicator: what it measures, how to read it, when it fails
- Use "What would you do?" scenarios after each indicator
- Build toward confluence: "Now combine S/R + RSI + candle pattern"
- Always ask: "What would make this signal WRONG?"

## CONSTRAINTS
- Never present an indicator as infallible ‚Äî always discuss false signals
- If I over-rely on one indicator ‚Üí force me to add a second confirmation
- Emphasize: "Indicators are lagging ‚Äî price action leads"
- No more than 1 indicator before a practice scenario
- Always tie back to risk: "Where's your stop if this signal fails?"

## SESSION STRUCTURE
1. Assess: what indicators have I used before? (2 questions)
2. Support & Resistance ‚Üí challenge: identify 3 zones on a described chart
3. Moving Averages ‚Üí challenge: what's the trend? (4 scenarios)
4. RSI deep-dive ‚Üí challenge: overbought at resistance ‚Äî trade or wait?
5. MACD deep-dive ‚Üí challenge: interpret 3 MACD scenarios
6. Confluence exercise ‚Üí combine S/R + MA + RSI for a trade decision
7. False signal drill: I identify why 3 "good" signals actually failed
8. Build a complete trade thesis: entry, stop, target, reasoning

## PROGRESS TRACKING
After completing each milestone above, tell me:
"‚úÖ Milestone [N]/8 complete ‚Äî [round(N/8√ó100)]% of Day 3 done!"

## OUTPUT FORMAT
Each indicator taught:
1. What it measures (1 sentence)
2. How to read it (bullet points)
3. When it FAILS (critical ‚Äî most courses skip this)
4. "Explain this indicator's purpose back to me..."
5. Scenario challenge
6. "Ready for the next indicator?" before proceeding

## SELF-CHECK
‚òê Does student understand the indicator's limitations?
‚òê Can student combine multiple indicators for confluence?
‚òê Does student always define a stop loss with every trade idea?</div>
    <div class="prompt-hint">üí° Copy this prompt and paste it into ChatGPT, Claude, or any AI assistant for a personalized tutoring session on Day 3 material.</div>
  </div>

  <div class="checklist">
    <div class="checklist-header">
      <div class="checklist-icon">‚úÖ</div>
      <div class="checklist-title">Day 3 Completion Checklist</div>
    </div>
    <ul class="task-list">
      <li><label><input type="checkbox" /> Can draw support/resistance zones on any chart</label></li>
      <li><label><input type="checkbox" /> Understand all 4 key moving averages and their uses</label></li>
      <li><label><input type="checkbox" /> Can read RSI for overbought/oversold and divergence</label></li>
      <li><label><input type="checkbox" /> Can interpret MACD crossovers and histogram</label></li>
      <li><label><input type="checkbox" /> Can perform multi-timeframe analysis (weekly ‚Üí daily ‚Üí intraday)</label></li>
      <li><label><input type="checkbox" /> Completed technical analysis lab with documented trades</label></li>
    </ul>
  </div>
</section>
<hr />

<!-- ==================== DAY 4 ==================== -->
<section class="day-section" id="day4">
  <div class="day-header">
    <div class="day-number"><span>Day</span><span>4</span></div>
    <div>
      <div class="day-title">Options Fundamentals ‚Äî Understanding the Instrument</div>
      <div class="day-time">6‚Äì8 hours</div>
    </div>
  </div>
  <div class="progress-bar"><div class="progress-fill" style="width:57%"></div></div>

  <div class="day-schedule">
    <span class="day-schedule-label">How to spend your time ‚Üí</span>
    <span class="day-schedule-item"><span class="sch-icon">üìñ</span> Read material <span class="sch-time">45 min</span></span>
    <span class="day-schedule-item"><span class="sch-icon">ü§ñ</span> AI tutoring session (Greeks + IV) <span class="sch-time">2 hr</span></span>
    <span class="day-schedule-item"><span class="sch-icon">üîç</span> Explore options chains on broker <span class="sch-time">1.5 hr</span></span>
    <span class="day-schedule-item"><span class="sch-icon">üìù</span> Paper trade first option + track Greeks <span class="sch-time">1.5 hr</span></span>
    <span class="day-schedule-item"><span class="sch-icon">üìì</span> Journal with Greeks snapshot <span class="sch-time">30 min</span></span>
  </div>

  <h3>What Are Options?</h3>
  <p>An option is a <strong>contract</strong> that gives you the right (but not the obligation) to buy or sell a stock at a specific price before a specific date. Think of it as a reservation on a stock's price.</p>

  <table>
    <thead><tr><th>Term</th><th>Definition</th><th>Example</th></tr></thead>
    <tbody>
      <tr><td><strong>Call Option</strong></td><td>Right to BUY at strike price</td><td>AAPL $180 Call = right to buy AAPL at $180</td></tr>
      <tr><td><strong>Put Option</strong></td><td>Right to SELL at strike price</td><td>AAPL $180 Put = right to sell AAPL at $180</td></tr>
      <tr><td><strong>Strike Price</strong></td><td>The agreed-upon price</td><td>The $180 in the examples above</td></tr>
      <tr><td><strong>Expiration Date</strong></td><td>When the contract expires</td><td>Jan 17, 2026 ‚Äî after this, the option is worthless</td></tr>
      <tr><td><strong>Premium</strong></td><td>Price you pay for the option</td><td>$5.00 premium √ó 100 shares = $500 cost</td></tr>
      <tr><td><strong>Contract Size</strong></td><td>Each option = 100 shares</td><td>1 contract controls 100 shares of stock</td></tr>
    </tbody>
  </table>

  <div class="warning">
    <strong>Options expire worthless more often than not.</strong> Over 60% of options expire out of the money. This is why selling options (when done correctly) can be more profitable than buying them. But selling naked options carries unlimited risk.
  </div>

  <h3>Intrinsic Value vs. Time Value</h3>
  <table>
    <thead><tr><th>Component</th><th>What It Is</th><th>Key Point</th></tr></thead>
    <tbody>
      <tr><td><strong>Intrinsic Value</strong></td><td>How much the option is "in the money"</td><td>AAPL at $190, $180 Call has $10 intrinsic value</td></tr>
      <tr><td><strong>Time Value (Extrinsic)</strong></td><td>Premium above intrinsic value</td><td>Decays every day ‚Äî accelerates near expiration</td></tr>
      <tr><td><strong>ITM (In The Money)</strong></td><td>Call: stock > strike. Put: stock < strike</td><td>Has intrinsic value, more expensive</td></tr>
      <tr><td><strong>ATM (At The Money)</strong></td><td>Stock price ‚âà strike price</td><td>Maximum time value, most liquid</td></tr>
      <tr><td><strong>OTM (Out of The Money)</strong></td><td>Call: stock < strike. Put: stock > strike</td><td>All time value, cheaper but lower probability</td></tr>
    </tbody>
  </table>

  <h3 id="greeks-ref">The Greeks ‚Äî Your Options Dashboard</h3>
  <p>The Greeks measure how an option's price changes in response to different factors. Master these and you control your risk.</p>

  <table>
    <thead><tr><th>Greek</th><th>Measures</th><th>Range</th><th>Trader's Interpretation</th></tr></thead>
    <tbody>
      <tr><td><strong>Delta (Œî)</strong></td><td>Price change per $1 stock move</td><td>0 to 1 (calls), 0 to -1 (puts)</td><td>0.50 delta = option moves $0.50 per $1 stock move. Also ‚âà probability of expiring ITM.</td></tr>
      <tr><td><strong>Gamma (Œì)</strong></td><td>Rate of change of delta</td><td>Highest ATM, near expiration</td><td>High gamma = delta changes fast. Dangerous near expiration.</td></tr>
      <tr><td><strong>Theta (Œò)</strong></td><td>Time decay per day</td><td>Always negative for buyers</td><td>-0.05 theta = option loses $5/day. Accelerates in last 30 days.</td></tr>
      <tr><td><strong>Vega (ŒΩ)</strong></td><td>Price change per 1% IV change</td><td>Highest ATM, far expiration</td><td>0.10 vega = option gains $10 per 1% IV increase.</td></tr>
      <tr><td><strong>Rho (œÅ)</strong></td><td>Sensitivity to interest rates</td><td>Small effect</td><td>Usually ignorable for short-term trades.</td></tr>
    </tbody>
  </table>

  <div class="pro-tip">
    <strong>Theta is the silent killer of option buyers.</strong> If you buy a call and the stock goes nowhere, you lose money every single day. This is why timing matters more in options than stocks. If you're going to buy options, give yourself enough time ‚Äî at least 45 days to expiration.
  </div>

  <h3>Reading an Options Chain</h3>
  <p>The options chain is your menu. It shows all available strikes, expirations, and their prices. Here's how to read it:</p>
  <ul>
    <li><strong>Calls on the left, Puts on the right</strong> (standard layout)</li>
    <li><strong>ITM options are highlighted</strong> (usually shaded)</li>
    <li><strong>Bid/Ask spread</strong> ‚Äî tighter is better. Wide spreads = illiquid, avoid.</li>
    <li><strong>Open Interest</strong> ‚Äî how many contracts exist. Higher = more liquid.</li>
    <li><strong>Implied Volatility (IV)</strong> ‚Äî market's expectation of future movement. High IV = expensive options.</li>
    <li><strong>Volume</strong> ‚Äî contracts traded today. High volume at a strike = institutional interest.</li>
  </ul>

  <h3>Implied Volatility ‚Äî The Hidden Variable That Makes or Breaks Options Trades</h3>
  <p>Implied Volatility (IV) is the market's forecast of how much a stock will move. It's the single most important factor in options pricing that beginners ignore.</p>

  <table>
    <thead><tr><th>IV Concept</th><th>What It Means</th><th>Trading Implication</th></tr></thead>
    <tbody>
      <tr><td><strong>IV Rank (IVR)</strong></td><td>Current IV vs. its range over past year (0-100)</td><td>IVR > 50 = IV is high ‚Üí favor selling premium. IVR < 30 = IV is low ‚Üí favor buying options.</td></tr>
      <tr><td><strong>IV Percentile (IVP)</strong></td><td>% of days IV was lower than today</td><td>IVP > 80% = options are expensive. IVP < 20% = options are cheap.</td></tr>
      <tr><td><strong>IV Crush</strong></td><td>Sharp IV drop after a known event (earnings, FDA)</td><td>Destroys option value even if you're right on direction. A $5 call can become $2 overnight.</td></tr>
      <tr><td><strong>IV Skew</strong></td><td>Puts often have higher IV than calls</td><td>Market prices in crash risk. OTM puts are relatively expensive.</td></tr>
      <tr><td><strong>Vega Exposure</strong></td><td>How much your position gains/loses per 1% IV change</td><td>Long options = long vega (want IV to rise). Short options = short vega (want IV to fall).</td></tr>
    </tbody>
  </table>

  <div class="warning">
    <strong>The #1 options mistake: buying calls before earnings.</strong> IV inflates 30-50% before earnings. Even if the stock moves in your direction, IV crush can erase your gains. Example: Stock goes up 3% after earnings, but your call LOSES money because IV dropped 40%. This happens constantly. If you want to play earnings, use spreads to reduce vega exposure.
  </div>

  <div class="pro-tip">
    <strong>The professional approach to IV:</strong> When IV is high (IVR > 50), sell premium ‚Äî iron condors, credit spreads, covered calls. When IV is low (IVR < 30), buy premium ‚Äî long calls, long puts, debit spreads. This is how market makers think. Trade with the IV environment, not against it.
  </div>

  <div class="exercise">
    <div class="exercise-header">
      <span class="exercise-badge">Exercise</span>
      <span class="exercise-title">Options Chain Deep Dive</span>
    </div>
    <ol>
      <li>Open the options chain for AAPL on your paper trading platform</li>
      <li>Find the ATM call and put for the nearest monthly expiration</li>
      <li>Calculate: intrinsic value, time value, and break-even price for each</li>
      <li>Compare the same strike at 30 days vs. 90 days ‚Äî how much more does time cost?</li>
      <li>Find the strike with the highest open interest ‚Äî why do you think it's popular?</li>
      <li>Paper trade: Buy 1 ATM call with 45+ DTE. Record all Greeks at entry.</li>
      <li>Check back tomorrow ‚Äî how did theta affect your position overnight?</li>
    </ol>
  </div>

  <!-- Day 4 Interactive Prompt -->
  <div class="prompt-box">
    <div class="prompt-box-header">
      <div class="prompt-box-title">Interactive Learning Session</div>
      <button class="copy-btn" onclick="copyPrompt(this, 'day4-prompt')">
        <span>üìã</span> Copy Prompt
      </button>
    </div>
    <div class="prompt-content" id="day4-prompt">## ROLE
You are a former options market maker on the CBOE floor with 20+ years of experience. You've seen every mistake retail traders make with options and you teach options through the lens of probability and risk, not gambling.

## SUCCESS CRITERIA
Session is complete when I can:
- Explain calls and puts using a real-world analogy (insurance, reservations)
- Calculate intrinsic value and time value for any option
- Classify options as ITM, ATM, or OTM and explain implications of each
- Define all 5 Greeks and explain how each affects my P/L
- Read an options chain and identify the best contract for a given thesis
- Explain why most options expire worthless and what that means for strategy
- Define IV Rank, IV Percentile, and explain the difference between them
- Explain IV Crush and why buying calls before earnings is usually a losing trade
- Understand IV Skew and what it reveals about market sentiment
- Calculate Vega exposure and explain when high IV helps vs. hurts a position

## TEACHING METHOD
- Start with analogies before math: options as insurance policies
- Build from simple (buying calls) to complex (Greeks interaction)
- After each Greek: give me a scenario where that Greek hurts me
- Use concrete dollar examples: "You paid $3.00 premium, stock moves $2..."
- Always ask: "What's the maximum you can lose on this trade?"
- For IV: use earnings events as the primary teaching vehicle ‚Äî show how IV inflates before and crushes after
- Compare two identical options chains: one with 30 IV Rank, one with 90 ‚Äî ask which is better to buy vs. sell

## CONSTRAINTS
- Never let me think buying OTM calls is a good default strategy
- If I can't calculate break-even ‚Üí stop and drill it until I can
- Emphasize theta decay relentlessly ‚Äî it's the #1 beginner killer
- No strategy discussion today ‚Äî pure mechanics, Greeks, and IV
- Always frame options as "probability instruments, not lottery tickets"
- Never let me ignore IV when evaluating an option ‚Äî premium without IV context is meaningless
- If I say "the stock went up but my call lost money" ‚Üí use this as the IV Crush teaching moment

## SESSION STRUCTURE
1. Assess: have I ever traded options? What do I think they are? (2 questions)
2. Calls explained ‚Üí challenge: when would you buy a call vs. just buying stock?
3. Puts explained ‚Üí challenge: when is a put better than a stop loss?
4. ITM/ATM/OTM ‚Üí challenge: classify 5 options and rank by risk
5. Greeks one by one ‚Üí challenge after each: "This Greek just moved against you ‚Äî what happens?"
6. IV Deep-Dive ‚Üí challenge: given IV Rank of 85% and earnings tomorrow, should you buy or sell premium? Why?
7. IV Crush scenario ‚Üí challenge: stock beats earnings by 5%, call option drops 20% ‚Äî explain exactly why
8. Options chain reading ‚Üí challenge: find the best contract for a bullish thesis, factoring in IV
9. Break-even calculation drill: 5 rapid-fire problems
10. Final scenario: "You have $500 to risk on AAPL going up, earnings are in 3 days ‚Äî walk me through your decision"

## PROGRESS TRACKING
After completing each milestone above, tell me:
"‚úÖ Milestone [N]/10 complete ‚Äî [N√ó10]% of Day 4 done!"

## OUTPUT FORMAT
Each concept taught:
1. Real-world analogy first
2. Technical definition (1-2 sentences)
3. Dollar example with real numbers
4. "Now explain this back to me using your own example..."
5. "What's the worst case?" check
6. "Ready for the next concept?" before proceeding

## SELF-CHECK
‚òê Can student calculate break-even without help?
‚òê Does student understand theta is working against option buyers every day?
‚òê Can student read an options chain and pick an appropriate contract?
‚òê Can student explain IV Rank vs. IV Percentile and when each matters?
‚òê Does student know why buying options before earnings is risky even if the stock moves in their favor?</div>
    <div class="prompt-hint">üí° Copy this prompt and paste it into ChatGPT, Claude, or any AI assistant for a personalized tutoring session on Day 4 material.</div>
  </div>

  <div class="checklist">
    <div class="checklist-header">
      <div class="checklist-icon">‚úÖ</div>
      <div class="checklist-title">Day 4 Completion Checklist</div>
    </div>
    <ul class="task-list">
      <li><label><input type="checkbox" /> Can explain calls and puts in plain English</label></li>
      <li><label><input type="checkbox" /> Understand ITM, ATM, OTM and their implications</label></li>
      <li><label><input type="checkbox" /> Know all 5 Greeks and what they measure</label></li>
      <li><label><input type="checkbox" /> Can explain IV Rank vs. IV Percentile and when to buy vs. sell premium</label></li>
      <li><label><input type="checkbox" /> Understand IV Crush and why buying calls before earnings is risky</label></li>
      <li><label><input type="checkbox" /> Can read an options chain and identify key data</label></li>
      <li><label><input type="checkbox" /> Placed first paper options trade with documented Greeks</label></li>
    </ul>
  </div>
</section>
<hr />

<!-- ==================== DAY 5 ==================== -->
<section class="day-section" id="day5">
  <div class="day-header">
    <div class="day-number"><span>Day</span><span>5</span></div>
    <div>
      <div class="day-title">Options Strategies ‚Äî From Simple to Advanced</div>
      <div class="day-time">6‚Äì8 hours</div>
    </div>
  </div>
  <div class="progress-bar"><div class="progress-fill" style="width:71%"></div></div>

  <div class="day-schedule">
    <span class="day-schedule-label">How to spend your time ‚Üí</span>
    <span class="day-schedule-item"><span class="sch-icon">üìñ</span> Read material <span class="sch-time">45 min</span></span>
    <span class="day-schedule-item"><span class="sch-icon">ü§ñ</span> AI tutoring session (strategies + Wheel) <span class="sch-time">2 hr</span></span>
    <span class="day-schedule-item"><span class="sch-icon">üìù</span> Paper trade 3 strategies <span class="sch-time">2 hr</span></span>
    <span class="day-schedule-item"><span class="sch-icon">‚úçÔ∏è</span> Document full trade anatomy <span class="sch-time">1 hr</span></span>
    <span class="day-schedule-item"><span class="sch-icon">üìì</span> Journal all positions <span class="sch-time">30 min</span></span>
  </div>

  <h3>Strategy #1: Covered Call (Beginner-Friendly)</h3>
  <p>Own 100 shares + sell 1 call against them. You collect premium (income) but cap your upside.</p>
  <table>
    <thead><tr><th>Aspect</th><th>Detail</th></tr></thead>
    <tbody>
      <tr><td><strong>Setup</strong></td><td>Own 100 shares + Sell 1 OTM Call</td></tr>
      <tr><td><strong>Max Profit</strong></td><td>(Strike - Stock Price) + Premium received</td></tr>
      <tr><td><strong>Max Loss</strong></td><td>Stock goes to $0 minus premium received</td></tr>
      <tr><td><strong>Best When</strong></td><td>Neutral to slightly bullish, want income</td></tr>
      <tr><td><strong>Risk Level</strong></td><td>Low ‚Äî you already own the stock</td></tr>
    </tbody>
  </table>

  <h3>Strategy #2: Vertical Spreads (The Bread & Butter)</h3>
  <h4>Bull Call Spread (Debit Spread)</h4>
  <p>Buy a call + sell a higher strike call, same expiration. Reduces cost but caps profit.</p>
  <table>
    <thead><tr><th>Aspect</th><th>Detail</th></tr></thead>
    <tbody>
      <tr><td><strong>Setup</strong></td><td>Buy 1 Call (lower strike) + Sell 1 Call (higher strike)</td></tr>
      <tr><td><strong>Max Profit</strong></td><td>Width of strikes - net debit paid</td></tr>
      <tr><td><strong>Max Loss</strong></td><td>Net debit paid (premium spent)</td></tr>
      <tr><td><strong>Best When</strong></td><td>Moderately bullish, want defined risk</td></tr>
      <tr><td><strong>Break-even</strong></td><td>Lower strike + net debit</td></tr>
    </tbody>
  </table>

  <h4>Bear Put Spread (Debit Spread)</h4>
  <table>
    <thead><tr><th>Aspect</th><th>Detail</th></tr></thead>
    <tbody>
      <tr><td><strong>Setup</strong></td><td>Buy 1 Put (higher strike) + Sell 1 Put (lower strike)</td></tr>
      <tr><td><strong>Max Profit</strong></td><td>Width of strikes - net debit paid</td></tr>
      <tr><td><strong>Max Loss</strong></td><td>Net debit paid</td></tr>
      <tr><td><strong>Best When</strong></td><td>Moderately bearish, want defined risk</td></tr>
    </tbody>
  </table>

  <h4>Credit Spreads (Selling Premium)</h4>
  <p>Sell the closer strike, buy the further strike. You collect premium upfront and profit if the stock stays away from your short strike.</p>

  <div class="pro-tip">
    <strong>Credit spreads are how professional traders generate consistent income.</strong> You don't need the stock to move ‚Äî you just need it to NOT move past your short strike. Time decay (theta) works in your favor. Aim for 30-45 DTE and close at 50% profit.
  </div>

  <h3>Rolling Options ‚Äî The Adjustment Tool Pros Use</h3>
  <p>Rolling means closing your current position and simultaneously opening a new one at a different strike and/or expiration. It's how you manage trades that go against you without taking a full loss.</p>
  <table>
    <thead><tr><th>Roll Type</th><th>What You Do</th><th>When to Use It</th></tr></thead>
    <tbody>
      <tr><td><strong>Roll Out</strong></td><td>Same strike, later expiration</td><td>Trade is near break-even at expiry ‚Äî buy more time</td></tr>
      <tr><td><strong>Roll Down (Puts) / Up (Calls)</strong></td><td>Move strike closer to current price, same expiry</td><td>Stock moved against you ‚Äî adjust to collect more credit</td></tr>
      <tr><td><strong>Roll Out and Down/Up</strong></td><td>New strike + later expiration</td><td>Tested position that needs both time and strike adjustment</td></tr>
    </tbody>
  </table>
  <div class="pro-tip">
    <strong>The golden rule of rolling:</strong> Only roll for a net credit (or at worst, even). If you have to pay a debit to roll, you're throwing good money after bad. Rolling is a management tool, not a rescue mission. If the thesis is broken, close the trade and move on.
  </div>

  <h3>Options Liquidity ‚Äî The Hidden Cost Beginners Ignore</h3>
  <p>The bid-ask spread on an option is a real cost that eats into your profits. Illiquid options can have spreads so wide that you're down 10-20% the moment you enter.</p>
  <div class="warning">
    <strong>Before entering any options trade, check the bid-ask spread.</strong> If the spread is more than 10% of the option's price, the option is too illiquid. Stick to high-volume underlyings (SPY, QQQ, AAPL, MSFT, TSLA, AMD, NVDA) and strikes near the money with high open interest. A $0.05 spread on a $2.00 option is fine. A $0.50 spread on a $2.00 option means you lose 25% just getting in and out.
  </div>

  <h3>Strategy #3: Iron Condor (Neutral Strategy)</h3>
  <p>Sell a bull put spread + sell a bear call spread simultaneously. You profit when the stock stays in a range.</p>
  <table>
    <thead><tr><th>Aspect</th><th>Detail</th></tr></thead>
    <tbody>
      <tr><td><strong>Setup</strong></td><td>Sell OTM Put + Buy further OTM Put + Sell OTM Call + Buy further OTM Call</td></tr>
      <tr><td><strong>Max Profit</strong></td><td>Total premium collected</td></tr>
      <tr><td><strong>Max Loss</strong></td><td>Width of widest spread - premium collected</td></tr>
      <tr><td><strong>Best When</strong></td><td>Low volatility, range-bound market</td></tr>
      <tr><td><strong>Win Rate</strong></td><td>High with 1 standard deviation wings ‚Äî 70-80% (narrower wings = lower win rate)</td></tr>
    </tbody>
  </table>

  <h3>Strategy #4: Straddle & Strangle (Volatility Plays)</h3>
  <table>
    <thead><tr><th>Strategy</th><th>Setup</th><th>Best When</th><th>Risk</th></tr></thead>
    <tbody>
      <tr><td><strong>Long Straddle</strong></td><td>Buy ATM Call + Buy ATM Put</td><td>Expecting big move, unsure of direction (earnings)</td><td>Expensive ‚Äî need large move to profit</td></tr>
      <tr><td><strong>Long Strangle</strong></td><td>Buy OTM Call + Buy OTM Put</td><td>Same as straddle but cheaper, needs bigger move</td><td>Both can expire worthless</td></tr>
      <tr><td><strong>Short Straddle</strong></td><td>Sell ATM Call + Sell ATM Put</td><td>Expecting stock to stay flat</td><td>Unlimited risk ‚Äî advanced only</td></tr>
    </tbody>
  </table>

  <div class="warning">
    <strong>Never sell naked straddles or strangles as a beginner.</strong> One unexpected move can wipe out months of gains. Always define your risk with spreads until you have at least 1 year of experience and a large account.
  </div>

  <h3>Strategy #5: The Wheel ‚Äî The Ultimate Income Strategy</h3>
  <p>The Wheel is the most popular income strategy for traders with $5K+ accounts. It combines selling puts and covered calls in a repeating cycle.</p>

  <h4>How the Wheel Works</h4>
  <ol>
    <li><strong>Step 1: Sell a Cash-Secured Put</strong> on a stock you'd be happy to own at a lower price. Collect premium.</li>
    <li><strong>If the put expires OTM:</strong> Keep the premium. Go back to Step 1. Repeat.</li>
    <li><strong>If you get assigned:</strong> You now own 100 shares at the strike price (minus premium collected).</li>
    <li><strong>Step 2: Sell a Covered Call</strong> on your 100 shares at a price you'd be happy to sell. Collect premium.</li>
    <li><strong>If the call expires OTM:</strong> Keep the premium + shares. Go back to Step 2.</li>
    <li><strong>If shares get called away:</strong> You sell at the strike price + keep premium. Go back to Step 1.</li>
  </ol>

  <table>
    <thead><tr><th>Aspect</th><th>Detail</th></tr></thead>
    <tbody>
      <tr><td><strong>Capital Required</strong></td><td>Enough to buy 100 shares (e.g., $5,000 for a $50 stock)</td></tr>
      <tr><td><strong>Ideal Stocks</strong></td><td>Stable, dividend-paying, stocks you'd hold long-term (AAPL, MSFT, KO)</td></tr>
      <tr><td><strong>Target Return</strong></td><td>1-3% per month from premium collection</td></tr>
      <tr><td><strong>Risk</strong></td><td>Stock drops significantly below your put strike ‚Äî you own shares at a loss</td></tr>
      <tr><td><strong>Best IV Environment</strong></td><td>Moderate to high IV (IVR 30-60) for juicy premiums</td></tr>
    </tbody>
  </table>

  <div class="pro-tip">
    <strong>The Wheel works best on stocks you genuinely want to own.</strong> Never wheel a stock just because the premium is high ‚Äî that's how you end up holding a falling knife. Pick quality companies with strong fundamentals. If the stock drops, you should be comfortable holding it for months.
  </div>

  <div class="warning">
    <strong>Early assignment risk:</strong> American-style options (which most stock options are) can be exercised at any time before expiration ‚Äî not just at expiry. This is most likely to happen when your short option is deep ITM, especially near ex-dividend dates. If you're short a call and the stock goes ex-dividend, the call buyer may exercise early to capture the dividend. Don't panic if it happens ‚Äî it just means you move to the next step of the Wheel sooner. But be aware it can happen and keep enough cash/margin to handle it.
  </div>

  <h3>Anatomy of a Real Trade ‚Äî Start to Finish</h3>
  <p>Let's walk through a complete trade from thesis to exit. This is how a professional thinks through every position:</p>

  <div class="exercise">
    <div class="exercise-header">
      <span class="exercise-badge">Example</span>
      <span class="exercise-title">Complete Bull Put Spread on AAPL</span>
    </div>
    <pre><code>‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  TRADE WALKTHROUGH: Bull Put Spread
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

1. THESIS
   AAPL is at $185. It bounced off the 50 SMA, RSI is at 38
   (oversold), and there's a bullish engulfing on the daily.
   Earnings are 45 days away ‚Äî no immediate catalyst risk.
   Fundamental check: EPS growing, revenue up 8% YoY. ‚úì

2. STRATEGY SELECTION
   Moderately bullish ‚Üí Bull Put Spread (credit spread)
   Why not just buy a call? IV Rank is 55 (elevated) ‚Äî 
   selling premium is smarter in high IV.

3. POSITION CONSTRUCTION
   Sell AAPL $175 Put (30 delta) ‚Äî 35 DTE
   Buy AAPL $170 Put (protection)
   Net credit: $1.20 ($120 per contract)
   Width: $5.00 ‚Üí Max loss: $5.00 - $1.20 = $3.80 ($380)

4. RISK MANAGEMENT
   Max loss: $380 (defined by spread width)
   Max profit: $120 (credit received)
   Risk/Reward: 1:0.32 ‚Äî but probability of profit is ~70%
   Account risk: $380 / $25,000 = 1.5% ‚úì

5. EXIT PLAN
   Take profit: Close at 50% of max profit ($60 gain)
   Stop loss: Close if spread reaches 2√ó credit ($240 loss)
   Time stop: Close at 21 DTE regardless (avoid gamma risk)

6. RESULT
   AAPL rallied to $192 over 14 days.
   Closed spread for $0.55 ‚Üí Profit: $65 (54% of max)
   Time in trade: 14 days. Followed the plan exactly.

7. JOURNAL ENTRY
   ‚úì Thesis was correct  ‚úì Followed exit rules
   ‚úó Could have been more patient ‚Äî hit 50% in 10 days
   Lesson: 50% profit target works. Don't get greedy.</code></pre>
  </div>

  <div class="exercise">
    <div class="exercise-header">
      <span class="exercise-badge">Exercise</span>
      <span class="exercise-title">Strategy Simulation Lab</span>
    </div>
    <ol>
      <li>Paper trade a <strong>covered call</strong>: Buy 100 shares of a stock under $50, sell 1 OTM call 30 DTE</li>
      <li>Paper trade a <strong>bull call spread</strong> on SPY: Buy ATM call, sell call $5 higher, 45 DTE</li>
      <li>Paper trade an <strong>iron condor</strong> on QQQ: Sell 1 SD out on both sides, 30 DTE</li>
      <li>Calculate max profit, max loss, and break-even for each trade</li>
      <li>Track all positions daily for the remainder of the course</li>
    </ol>
  </div>

  <!-- Day 5 Interactive Prompt -->
  <div class="prompt-box">
    <div class="prompt-box-header">
      <div class="prompt-box-title">Interactive Learning Session</div>
      <button class="copy-btn" onclick="copyPrompt(this, 'day5-prompt')">
        <span>üìã</span> Copy Prompt
      </button>
    </div>
    <div class="prompt-content" id="day5-prompt">## ROLE
You are a professional options strategist who manages a $50M portfolio using multi-leg options strategies. You teach strategies by starting with the market thesis, then building the position ‚Äî never the other way around.

## SUCCESS CRITERIA
Session is complete when I can:
- Construct a covered call and explain when it's optimal vs. suboptimal
- Build bull call spreads and bear put spreads with correct strike selection
- Set up credit spreads and explain why selling premium can be more consistent
- Construct an iron condor and calculate max profit, max loss, and break-evens
- Choose the right strategy for a given market outlook (bullish/bearish/neutral/volatile)
- Explain the risk/reward tradeoff of each strategy
- Execute the full Wheel Strategy cycle: sell CSP ‚Üí assignment ‚Üí sell CC ‚Üí repeat
- Identify ideal stocks for the Wheel (criteria: price, IV, fundamentals, sector)
- Walk through a complete real trade from thesis to journal entry, including all calculations
- Document a trade with: entry thesis, strike/expiry selection, Greeks snapshot, risk/reward, exit plan, and post-trade review

## TEACHING METHOD
- Start with "What's your market thesis?" before any strategy
- Build each strategy leg by leg ‚Äî never show the full position first
- After each strategy: draw the P/L profile in text/description
- Compare strategies: "Why this spread instead of just buying a call?"
- Use real ticker examples with approximate current prices
- For the Wheel: walk through a full 3-month cycle on a real stock with actual numbers
- For trade anatomy: force me to document every decision as if writing a journal entry

## CONSTRAINTS
- Never teach a strategy without its risk profile
- If I can't calculate max loss ‚Üí stop and drill it
- Always ask: "What market condition would destroy this position?"
- No naked short options for beginners ‚Äî always defined risk
- Emphasize position management: when to close, roll, or adjust
- Wheel Strategy must include capital requirements ‚Äî don't let me try it undercapitalized
- Trade anatomy must include the post-trade review: "What would you do differently?"

## SESSION STRUCTURE
1. Review: quiz me on Greeks from yesterday (3 quick questions)
2. Covered call ‚Üí challenge: set one up on a stock I choose, calculate income
3. Vertical spreads ‚Üí challenge: bull call vs. bull put ‚Äî when to use which?
4. Credit spreads ‚Üí challenge: sell a put spread, calculate probability of profit
5. Iron condor ‚Üí challenge: build one on SPY, calculate all key numbers
6. The Wheel Strategy ‚Üí challenge: pick a stock, calculate capital needed, sell the first CSP, plan the full cycle through assignment and covered calls
7. Anatomy of a Real Trade ‚Üí challenge: walk me through a complete bull put spread from thesis to journal entry ‚Äî I must document every step
8. Strategy selection drill: 7 market scenarios ‚Üí pick the best strategy (include 2 where the Wheel is the answer)
9. Position management: when do you close each strategy? (50% profit rule, etc.)
10. Paper trade: set up 3 different strategies with full documentation including journal entries

## PROGRESS TRACKING
After completing each milestone above, tell me:
"‚úÖ Milestone [N]/10 complete ‚Äî [N√ó10]% of Day 5 done!"

## OUTPUT FORMAT
Each strategy taught:
1. Market thesis required (bullish/bearish/neutral + conviction level)
2. Build leg by leg with strike selection reasoning
3. P/L profile description (max profit, max loss, break-even)
4. "Now build this strategy yourself on [ticker]..."
5. "What kills this trade?" risk check
6. Management rules (when to close, adjust, or take loss)
7. "Document this trade as a journal entry ‚Äî I'll review it"
8. "Ready for the next strategy?" before proceeding

## SELF-CHECK
‚òê Can student build the strategy without step-by-step guidance?
‚òê Does student know max loss BEFORE entering?
‚òê Does student have an exit plan for both profit and loss?
‚òê Can student execute the full Wheel cycle and calculate returns at each step?
‚òê Has student documented at least one complete trade from thesis to post-trade review?</div>
    <div class="prompt-hint">üí° Copy this prompt and paste it into ChatGPT, Claude, or any AI assistant for a personalized tutoring session on Day 5 material.</div>
  </div>

  <div class="checklist">
    <div class="checklist-header">
      <div class="checklist-icon">‚úÖ</div>
      <div class="checklist-title">Day 5 Completion Checklist</div>
    </div>
    <ul class="task-list">
      <li><label><input type="checkbox" /> Can set up a covered call and explain the tradeoffs</label></li>
      <li><label><input type="checkbox" /> Understand debit spreads vs. credit spreads</label></li>
      <li><label><input type="checkbox" /> Can construct an iron condor and calculate P/L</label></li>
      <li><label><input type="checkbox" /> Can execute the full Wheel Strategy cycle (CSP ‚Üí assignment ‚Üí CC)</label></li>
      <li><label><input type="checkbox" /> Documented a complete trade from thesis to journal entry</label></li>
      <li><label><input type="checkbox" /> Know when to use straddles vs. strangles</label></li>
      <li><label><input type="checkbox" /> Have 3 active paper options positions being tracked</label></li>
    </ul>
  </div>
</section>
<hr />

<!-- ==================== DAY 6 ==================== -->
<section class="day-section" id="day6">
  <div class="day-header">
    <div class="day-number"><span>Day</span><span>6</span></div>
    <div>
      <div class="day-title">Risk Management & Trading Psychology</div>
      <div class="day-time">5‚Äì6 hours</div>
    </div>
  </div>
  <div class="progress-bar"><div class="progress-fill" style="width:85%"></div></div>

  <div class="day-schedule">
    <span class="day-schedule-label">How to spend your time ‚Üí</span>
    <span class="day-schedule-item"><span class="sch-icon">üìñ</span> Read material <span class="sch-time">30 min</span></span>
    <span class="day-schedule-item"><span class="sch-icon">ü§ñ</span> AI tutoring session (risk + psychology) <span class="sch-time">1.5 hr</span></span>
    <span class="day-schedule-item"><span class="sch-icon">üßÆ</span> Position sizing drills <span class="sch-time">1 hr</span></span>
    <span class="day-schedule-item"><span class="sch-icon">üß†</span> Psychology scenarios + tax calculations <span class="sch-time">1 hr</span></span>
    <span class="day-schedule-item"><span class="sch-icon">üìã</span> Build pre-trade checklist + set loss limits <span class="sch-time">1 hr</span></span>
  </div>

  <h3>Position Sizing ‚Äî The #1 Survival Skill</h3>
  <p>It doesn't matter how good your strategy is if one bad trade wipes you out. Position sizing keeps you in the game.</p>

  <h4>The 1% Rule</h4>
  <p><strong>Never risk more than 1-2% of your total account on a single trade.</strong></p>
  <pre><code>Account Size: $25,000
Max Risk Per Trade (1%): $250
Stock Price: $150
Stop Loss: $145 (risk = $5/share)
Position Size: $250 √∑ $5 = 50 shares maximum

For Options:
Max Risk = Premium paid (for debit trades)
So max premium = $250 ‚Üí buy options ‚â§ $2.50 per contract</code></pre>

  <table>
    <thead><tr><th>Account Size</th><th>1% Risk</th><th>2% Risk</th><th>Max Concurrent Positions (at 1%)</th></tr></thead>
    <tbody>
      <tr><td>$5,000</td><td>$50</td><td>$100</td><td>3-5 positions</td></tr>
      <tr><td>$25,000</td><td>$250</td><td>$500</td><td>5-8 positions</td></tr>
      <tr><td>$50,000</td><td>$500</td><td>$1,000</td><td>8-10 positions</td></tr>
      <tr><td>$100,000</td><td>$1,000</td><td>$2,000</td><td>10-15 positions</td></tr>
    </tbody>
  </table>

  <div class="warning">
    <strong>The Pattern Day Trader (PDT) rule:</strong> If your account is under $25,000, you're limited to 3 day trades per 5 business days in a margin account. Violate this and your account gets restricted. Solutions: use a cash account (no PDT rule but must wait for settlement), or keep account above $25K.
  </div>

  <h3>Portfolio-Level Risk ‚Äî Correlation Kills</h3>
  <p>The 1% rule protects you per trade, but it doesn't protect you from correlated positions. If you hold 5 tech stocks and sell puts on all of them, a single sector selloff hits every position simultaneously.</p>
  <table>
    <thead><tr><th>Rule</th><th>Guideline</th></tr></thead>
    <tbody>
      <tr><td><strong>Max sector exposure</strong></td><td>No more than 30-40% of portfolio in one sector</td></tr>
      <tr><td><strong>Max total portfolio risk</strong></td><td>6-10% of account at risk across all open positions combined</td></tr>
      <tr><td><strong>Correlation check</strong></td><td>Before adding a new position, ask: "If my other trades lose, does this one lose too?"</td></tr>
      <tr><td><strong>Diversify underlyings</strong></td><td>Spread positions across sectors: tech, healthcare, financials, energy, consumer</td></tr>
    </tbody>
  </table>
  <div class="pro-tip">
    <strong>The 2020 and 2022 crashes taught this lesson brutally.</strong> Traders who had 5 "different" positions ‚Äî all in tech ‚Äî saw every single one go red on the same day. Diversification isn't just about owning different tickers. It's about owning tickers that don't all move in the same direction at the same time.
  </div>

  <h3>Tax Implications Every Trader Must Know</h3>
  <p>The IRS takes a cut of every profitable trade. Ignoring taxes can turn a winning year into a losing one.</p>

  <table>
    <thead><tr><th>Tax Rule</th><th>What It Means</th><th>Impact on Your Trading</th></tr></thead>
    <tbody>
      <tr><td><strong>Short-Term Capital Gains</strong></td><td>Profits on positions held < 1 year</td><td>Taxed as ordinary income (up to 37%). Most day/swing trades fall here.</td></tr>
      <tr><td><strong>Long-Term Capital Gains</strong></td><td>Profits on positions held > 1 year</td><td>Taxed at 0%, 15%, or 20% depending on income. Much more favorable.</td></tr>
      <tr><td><strong>Wash Sale Rule</strong></td><td>Can't claim a loss if you rebuy the same or "substantially identical" security within 30 days</td><td>If you sell AAPL at a loss and buy it back within 30 days, you can't deduct that loss. The loss gets added to your new cost basis.</td></tr>
      <tr><td><strong>$3,000 Loss Deduction</strong></td><td>Max capital loss deduction per year against ordinary income</td><td>Excess losses carry forward to future years. A $10K loss takes 3+ years to fully deduct.</td></tr>
      <tr><td><strong>Options Tax Treatment</strong></td><td>Options are taxed when closed, expired, or exercised</td><td>Expired worthless options = capital loss. Exercised options adjust the stock's cost basis.</td></tr>
    </tbody>
  </table>

  <div class="pro-tip">
    <strong>The wash sale rule is the trap that catches every active trader.</strong> If you're day trading the same stocks repeatedly, you WILL trigger wash sales. Keep meticulous records. Use tax software like TradeLog or GainsKeeper. Consider consulting a CPA who specializes in trader taxation ‚Äî the money you save will pay for their fee many times over.
  </div>

  <h3>Stop Loss Strategies</h3>
  <table>
    <thead><tr><th>Method</th><th>How It Works</th><th>Best For</th></tr></thead>
    <tbody>
      <tr><td><strong>Fixed Percentage</strong></td><td>Exit at 2-5% loss from entry</td><td>Simple, works for beginners</td></tr>
      <tr><td><strong>ATR-Based</strong></td><td>Stop at 1.5-2√ó ATR below entry</td><td>Adapts to volatility ‚Äî professional approach</td></tr>
      <tr><td><strong>Structure-Based</strong></td><td>Stop below support/above resistance</td><td>Most logical ‚Äî invalidates your thesis</td></tr>
      <tr><td><strong>Time-Based</strong></td><td>Exit if trade doesn't work within X days</td><td>Options trades where theta is eating you</td></tr>
    </tbody>
  </table>

  <div class="pro-tip">
    <strong>Set your stop loss BEFORE you enter the trade.</strong> Decide where you're wrong before you put money at risk. If you can't define your stop, you don't have a trade ‚Äî you have a gamble.
  </div>

  <h3>Trading Psychology ‚Äî The Real Edge</h3>
  <p>After 20 years of trading, I can tell you: the strategy is 20% of success. Psychology is 80%. Here are the mental traps that destroy traders:</p>

  <table>
    <thead><tr><th>Trap</th><th>What It Looks Like</th><th>The Fix</th></tr></thead>
    <tbody>
      <tr><td><strong>Revenge Trading</strong></td><td>Taking bigger trades after a loss to "make it back"</td><td>Walk away after 2 consecutive losses. Come back tomorrow.</td></tr>
      <tr><td><strong>FOMO</strong></td><td>Chasing a stock that already moved 10%</td><td>There's always another trade. The market opens every day.</td></tr>
      <tr><td><strong>Overtrading</strong></td><td>Taking 20+ trades a day out of boredom</td><td>Quality over quantity. 2-3 A+ setups per day is plenty.</td></tr>
      <tr><td><strong>Moving Stop Losses</strong></td><td>Widening your stop because "it'll come back"</td><td>Never move a stop further from entry. Only tighten.</td></tr>
      <tr><td><strong>Confirmation Bias</strong></td><td>Only seeing evidence that supports your position</td><td>Actively look for reasons your trade is wrong.</td></tr>
      <tr><td><strong>Anchoring</strong></td><td>"It was at $200 last month, it's cheap at $150"</td><td>Price is what it is NOW. Past prices are irrelevant.</td></tr>
    </tbody>
  </table>

  <blockquote>"The goal of a successful trader is to make the best trades. Money is secondary." ‚Äî Alexander Elder</blockquote>

  <div class="exercise">
    <div class="exercise-header">
      <span class="exercise-badge">Exercise</span>
      <span class="exercise-title">Risk Management Audit</span>
    </div>
    <ol>
      <li>Review all your paper trades from this week</li>
      <li>For each trade, calculate: risk/reward ratio, position size as % of account</li>
      <li>Did any trade risk more than 2%? Flag it.</li>
      <li>Create a <strong>pre-trade checklist</strong> with: entry, stop, target, position size, reasoning</li>
      <li>Write down your 3 biggest emotional triggers and a plan for each</li>
      <li>Set a daily loss limit: if you lose X% in a day, you stop trading. Write it down.</li>
    </ol>
  </div>

  <!-- Day 6 Interactive Prompt -->
  <div class="prompt-box">
    <div class="prompt-box-header">
      <div class="prompt-box-title">Interactive Learning Session</div>
      <button class="copy-btn" onclick="copyPrompt(this, 'day6-prompt')">
        <span>üìã</span> Copy Prompt
      </button>
    </div>
    <div class="prompt-content" id="day6-prompt">## ROLE
You are a trading psychologist and risk management specialist who has coached hundreds of professional traders at prop firms. You've seen every way a trader can self-destruct and you teach survival first, profits second.

## SUCCESS CRITERIA
Session is complete when I can:
- Calculate position size using the 1% rule for any account size
- Choose the correct stop loss method for different trade types
- Explain the PDT rule and 3 ways to work around it
- Identify my top 3 psychological triggers and have a plan for each
- Create a pre-trade checklist I'll actually use
- Set a daily and weekly loss limit in writing
- Explain the tax difference between short-term and long-term capital gains
- Define the wash sale rule and give 2 examples of how traders accidentally trigger it
- Know the $3,000 annual loss deduction and how to carry forward excess losses
- Explain how options are taxed differently from stock trades

## TEACHING METHOD
- Use real blown-account stories (anonymized) to illustrate each concept
- Make me calculate position sizes ‚Äî don't do the math for me
- Present psychological traps as scenarios: "You just lost $500, what do you do?"
- Role-play emotional situations: "The stock is down 8%, your stop was at 5%..."
- Always ask: "Have you ever done this?" to make it personal
- For taxes: use concrete P/L examples showing how the same profit is taxed differently based on holding period
- Present wash sale traps as real scenarios: "You sold AAPL at a loss Monday, bought it back Wednesday..."

## CONSTRAINTS
- Never minimize the emotional difficulty of trading
- If I say "I wouldn't do that" to a psychological trap ‚Üí push harder with a realistic scenario
- Position sizing must be drilled until I can do it in 10 seconds
- Every risk concept must include a concrete dollar example
- No theoretical discussions ‚Äî everything must be actionable
- Tax section must include the disclaimer: "I am not a tax advisor ‚Äî consult a CPA for your specific situation"
- Never let me think taxes are an afterthought ‚Äî they directly impact net profitability

## SESSION STRUCTURE
1. Assess: biggest trading mistake I've made or fear making (1 question)
2. Position sizing ‚Üí challenge: calculate size for 5 different scenarios
3. Stop loss methods ‚Üí challenge: which stop type for each trade setup?
4. PDT rule ‚Üí challenge: plan a week of trades under PDT restrictions
5. Psychology deep-dive ‚Üí challenge: I respond to 5 emotional scenarios
6. Revenge trading drill: simulate a losing streak, test my discipline
7. Tax Implications ‚Üí challenge: given 3 trade scenarios with different holding periods and wash sale situations, calculate the actual tax owed and net profit after taxes
8. Options tax treatment ‚Üí challenge: how is an expired option taxed vs. one you sold for a profit at 11 months vs. 13 months?
9. Build my pre-trade checklist together (including tax considerations) ‚Äî I write it, you validate
10. Set my loss limits: daily, weekly, monthly ‚Äî in writing

## PROGRESS TRACKING
After completing each milestone above, tell me:
"‚úÖ Milestone [N]/10 complete ‚Äî [N√ó10]% of Day 6 done!"

## OUTPUT FORMAT
Each concept taught:
1. Real story or scenario that illustrates the danger
2. The rule/framework to prevent it
3. Concrete calculation or action step
4. "Now you're in this situation ‚Äî what do you do?"
5. Feedback: did you follow your own rules?
6. "Ready for the next survival skill?" before proceeding

## SELF-CHECK
‚òê Can student calculate position size without a calculator prompt?
‚òê Does student have a written plan for their emotional triggers?
‚òê Has student committed to specific loss limits in writing?
‚òê Can student explain the wash sale rule and identify when it applies?
‚òê Does student know the tax rate difference between short-term and long-term gains?
‚òê Can student calculate after-tax profit for a given trade?</div>
    <div class="prompt-hint">üí° Copy this prompt and paste it into ChatGPT, Claude, or any AI assistant for a personalized tutoring session on Day 6 material.</div>
  </div>

  <div class="checklist">
    <div class="checklist-header">
      <div class="checklist-icon">‚úÖ</div>
      <div class="checklist-title">Day 6 Completion Checklist</div>
    </div>
    <ul class="task-list">
      <li><label><input type="checkbox" /> Can calculate position size using the 1% rule</label></li>
      <li><label><input type="checkbox" /> Understand 4 stop loss methods and when to use each</label></li>
      <li><label><input type="checkbox" /> Know the PDT rule and how to work around it</label></li>
      <li><label><input type="checkbox" /> Can explain short-term vs. long-term capital gains tax rates</label></li>
      <li><label><input type="checkbox" /> Understand the wash sale rule and can identify when it applies</label></li>
      <li><label><input type="checkbox" /> Created a pre-trade checklist</label></li>
      <li><label><input type="checkbox" /> Identified personal psychological triggers and mitigation plans</label></li>
      <li><label><input type="checkbox" /> Set a daily loss limit in writing</label></li>
    </ul>
  </div>
</section>
<hr />

<!-- ==================== DAY 7 ==================== -->
<section class="day-section" id="day7">
  <div class="day-header">
    <div class="day-number"><span>Day</span><span>7</span></div>
    <div>
      <div class="day-title">Building Your Trading Plan & Going Live</div>
      <div class="day-time">5‚Äì6 hours</div>
    </div>
  </div>
  <div class="progress-bar"><div class="progress-fill" style="width:100%"></div></div>

  <div class="day-schedule">
    <span class="day-schedule-label">How to spend your time ‚Üí</span>
    <span class="day-schedule-item"><span class="sch-icon">üìñ</span> Read material <span class="sch-time">30 min</span></span>
    <span class="day-schedule-item"><span class="sch-icon">ü§ñ</span> AI tutoring session (plan review) <span class="sch-time">1.5 hr</span></span>
    <span class="day-schedule-item"><span class="sch-icon">‚úçÔ∏è</span> Write complete trading plan <span class="sch-time">1.5 hr</span></span>
    <span class="day-schedule-item"><span class="sch-icon">üìä</span> Review all paper trades + calculate stats <span class="sch-time">1 hr</span></span>
    <span class="day-schedule-item"><span class="sch-icon">üìì</span> Lessons learned + 30-day goals <span class="sch-time">30 min</span></span>
  </div>

  <h3>Your Trading Plan Template</h3>
  <p>Every professional trader has a written plan. No plan = no edge. Here's what yours must include:</p>

  <div class="exercise">
    <div class="exercise-header">
      <span class="exercise-badge">Template</span>
      <span class="exercise-title">Trading Plan Framework</span>
    </div>
    <pre><code>‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
         MY TRADING PLAN
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

1. MARKET & INSTRUMENTS
   - Markets: [Stocks / Options / Both]
   - Preferred tickers: [e.g., SPY, QQQ, AAPL, TSLA]
   - Timeframes: [Daily for swing, 5min for day trades]

2. STRATEGY
   - Primary: [e.g., Credit spreads on high IV stocks]
   - Secondary: [e.g., Momentum breakouts on daily chart]
   - Setups I trade: [List specific patterns/conditions]
   - Setups I AVOID: [List what you won't touch]

3. RISK MANAGEMENT
   - Max risk per trade: [1% / 2%]
   - Max daily loss: [$X or X%]
   - Max weekly loss: [$X or X%]
   - Max concurrent positions: [X]
   - Max portfolio risk: [6-10% total]

4. ENTRY RULES
   - [ ] Setup matches my strategy
   - [ ] Risk/reward is at least 1:2
   - [ ] Stop loss is defined BEFORE entry
   - [ ] Position size calculated
   - [ ] Not revenge trading or FOMO

5. EXIT RULES
   - Take profit at: [Target level or % gain]
   - Stop loss at: [Defined level]
   - Time stop: [Close if no movement in X days]
   - Options: Close at 50% profit or 21 DTE

6. SCHEDULE
   - Pre-market prep: [8:30-9:25 AM ET]
   - Active trading: [9:30-11:00 AM, 3:00-4:00 PM]
   - Review & journal: [After market close]

7. REVIEW PROCESS
   - Daily: Journal every trade
   - Weekly: Review win rate, avg P/L, mistakes
   - Monthly: Adjust strategy based on data
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê</code></pre>
  </div>

  <h3>The Trading Journal ‚Äî Your Most Valuable Tool</h3>
  <p>Every trade gets logged. No exceptions. Here's what to record:</p>
  <table>
    <thead><tr><th>Field</th><th>Example</th></tr></thead>
    <tbody>
      <tr><td>Date & Time</td><td>2026-02-16, 9:45 AM ET</td></tr>
      <tr><td>Ticker</td><td>SPY</td></tr>
      <tr><td>Direction</td><td>Long (Bull Call Spread)</td></tr>
      <tr><td>Entry Price</td><td>$2.50 debit</td></tr>
      <tr><td>Stop Loss</td><td>Close at $1.25 (50% loss)</td></tr>
      <tr><td>Target</td><td>Close at $4.00 (60% gain)</td></tr>
      <tr><td>Position Size</td><td>2 contracts ($500 risk)</td></tr>
      <tr><td>Setup/Reason</td><td>Bounce off 50 SMA + RSI oversold + bullish engulfing</td></tr>
      <tr><td>Result</td><td>+$280 (closed at $3.90)</td></tr>
      <tr><td>Lessons</td><td>Should have held longer ‚Äî hit $4.50 next day</td></tr>
      <tr><td>Emotional State</td><td>Calm, followed plan</td></tr>
    </tbody>
  </table>

  <h3>Transitioning to Real Money</h3>
  <p>Do NOT go live until you can answer YES to all of these:</p>
  <div class="checklist">
    <div class="checklist-header">
      <div class="checklist-icon">üö¶</div>
      <div class="checklist-title">Go-Live Readiness Check</div>
    </div>
    <ul class="task-list">
      <li><label><input type="checkbox" /> Paper traded profitably for at least 30 days</label></li>
      <li><label><input type="checkbox" /> Win rate above 50% with positive expectancy</label></li>
      <li><label><input type="checkbox" /> Written trading plan completed and tested</label></li>
      <li><label><input type="checkbox" /> Can calculate position size in under 10 seconds</label></li>
      <li><label><input type="checkbox" /> Have a funded account with money you can afford to lose</label></li>
      <li><label><input type="checkbox" /> Start with 25% of your normal position size for first month</label></li>
      <li><label><input type="checkbox" /> Emergency fund is separate and untouchable</label></li>
    </ul>
  </div>

  <div class="pro-tip">
    <strong>When you go live, trade SMALL.</strong> Your first month with real money will feel completely different from paper trading. Emotions hit different when it's real. Start with 25% of your planned size and scale up only after proving consistency.
  </div>

  <div class="exercise">
    <div class="exercise-header">
      <span class="exercise-badge">Capstone</span>
      <span class="exercise-title">Complete Trading Plan & Review</span>
    </div>
    <ol>
      <li>Fill out the complete trading plan template above ‚Äî every field</li>
      <li>Review all paper trades from this week: calculate total P/L, win rate, avg winner vs. avg loser</li>
      <li>Identify your best trade and worst trade ‚Äî what made the difference?</li>
      <li>Write a 1-page "lessons learned" summary</li>
      <li>Set 3 specific goals for your first month of continued paper trading</li>
      <li>Schedule your daily trading routine in your calendar</li>
    </ol>
  </div>

  <!-- Day 7 Interactive Prompt -->
  <div class="prompt-box">
    <div class="prompt-box-header">
      <div class="prompt-box-title">Interactive Learning Session</div>
      <button class="copy-btn" onclick="copyPrompt(this, 'day7-prompt')">
        <span>üìã</span> Copy Prompt
      </button>
    </div>
    <div class="prompt-content" id="day7-prompt">## ROLE
You are a retired hedge fund portfolio manager who now mentors aspiring traders. You've built and refined trading plans for 25+ years and you know that the plan IS the edge ‚Äî not any single strategy.

## SUCCESS CRITERIA
Session is complete when I can:
- Present a complete, written trading plan covering all 7 sections
- Explain my strategy selection and why it fits my personality/schedule
- Show a properly formatted trading journal with all required fields
- Pass the "go-live readiness" checklist with honest self-assessment
- Articulate my 30-day paper trading continuation plan with specific goals
- Describe my daily routine from pre-market prep to post-market review

## TEACHING METHOD
- Review and critique my trading plan section by section
- Ask "Why?" for every choice I make ‚Äî force me to justify decisions
- Challenge weak spots: "What happens to your plan when you have 5 losers in a row?"
- Compare my plan to professional standards ‚Äî where does it fall short?
- Simulate my first week: walk through Monday-Friday with my plan

## CONSTRAINTS
- Do not let me skip any section of the trading plan
- If my risk parameters are too aggressive ‚Üí push back with math
- If my strategy is vague ‚Üí demand specific entry/exit criteria
- The journal must have emotional state tracking ‚Äî non-negotiable
- Be honest about readiness: if I'm not ready for real money, say so

## SESSION STRUCTURE
1. Review my trading plan draft section by section (I present, you critique)
2. Strategy stress-test ‚Üí challenge: 3 market scenarios that break my plan
3. Journal review ‚Üí challenge: log a hypothetical trade with all fields
4. Go-live readiness assessment ‚Üí honest evaluation with specific gaps
5. 30-day plan ‚Üí challenge: set 3 measurable goals with deadlines
6. Daily routine design ‚Üí challenge: build my exact schedule
7. Simulate Week 1: walk through 5 trading days using my plan
8. Final reflection: "What's the one thing that will make or break you as a trader?"

## PROGRESS TRACKING
After completing each milestone above, tell me:
"‚úÖ Milestone [N]/8 complete ‚Äî [round(N/8√ó100)]% of Day 7 done!"

## OUTPUT FORMAT
Each section reviewed:
1. Read my plan section
2. Strengths identified (what's good)
3. Gaps or weaknesses (what's missing or vague)
4. Specific improvement suggestions
5. "Revise this section and show me again..."
6. Approval or further revision needed
7. "Ready for the next section?" before proceeding

## SELF-CHECK
‚òê Is every section of the trading plan specific and actionable?
‚òê Does the student have realistic expectations about timeline to profitability?
‚òê Is the student genuinely ready, or do they need more paper trading time?</div>
    <div class="prompt-hint">üí° Copy this prompt and paste it into ChatGPT, Claude, or any AI assistant for a personalized tutoring session on Day 7 material.</div>
  </div>

  <div class="checklist">
    <div class="checklist-header">
      <div class="checklist-icon">‚úÖ</div>
      <div class="checklist-title">Day 7 Completion Checklist</div>
    </div>
    <ul class="task-list">
      <li><label><input type="checkbox" /> Written trading plan is complete</label></li>
      <li><label><input type="checkbox" /> Trading journal system is set up and populated</label></li>
      <li><label><input type="checkbox" /> Reviewed all paper trades with statistics</label></li>
      <li><label><input type="checkbox" /> Know the go-live readiness criteria</label></li>
      <li><label><input type="checkbox" /> Have a 30-day paper trading continuation plan</label></li>
    </ul>
  </div>
</section>

<hr />
<!-- ==================== REFERENCE SECTIONS ==================== -->

<section id="glossary">
<h2>üìñ Glossary of Key Terms</h2>
<table>
  <thead><tr><th>Term</th><th>Definition</th></tr></thead>
  <tbody>
    <tr><td><strong>Ask</strong></td><td>Lowest price a seller will accept</td></tr>
    <tr><td><strong>ATR</strong></td><td>Average True Range ‚Äî measures volatility over N periods</td></tr>
    <tr><td><strong>Bearish</strong></td><td>Expecting price to go down</td></tr>
    <tr><td><strong>Bid</strong></td><td>Highest price a buyer will pay</td></tr>
    <tr><td><strong>Bullish</strong></td><td>Expecting price to go up</td></tr>
    <tr><td><strong>DTE</strong></td><td>Days to expiration (for options)</td></tr>
    <tr><td><strong>EMA</strong></td><td>Exponential Moving Average ‚Äî weights recent prices more</td></tr>
    <tr><td><strong>Fill</strong></td><td>When your order gets executed</td></tr>
    <tr><td><strong>Gap</strong></td><td>Price jump between previous close and next open</td></tr>
    <tr><td><strong>IV</strong></td><td>Implied Volatility ‚Äî market's expected future movement</td></tr>
    <tr><td><strong>Liquidity</strong></td><td>How easily you can buy/sell without moving the price</td></tr>
    <tr><td><strong>MACD</strong></td><td>Moving Average Convergence Divergence ‚Äî momentum indicator</td></tr>
    <tr><td><strong>RSI</strong></td><td>Relative Strength Index ‚Äî momentum oscillator (0-100)</td></tr>
    <tr><td><strong>SMA</strong></td><td>Simple Moving Average ‚Äî equal weight to all periods</td></tr>
    <tr><td><strong>Spread</strong></td><td>Difference between bid and ask; also an options strategy</td></tr>
    <tr><td><strong>VWAP</strong></td><td>Volume Weighted Average Price ‚Äî institutional benchmark</td></tr>
    <tr><td><strong>IV Rank (IVR)</strong></td><td>Current IV relative to its 52-week range (0-100)</td></tr>
    <tr><td><strong>IV Percentile (IVP)</strong></td><td>Percentage of days IV was lower than today over past year</td></tr>
    <tr><td><strong>IV Crush</strong></td><td>Sharp drop in implied volatility after a known event (earnings, FDA)</td></tr>
    <tr><td><strong>IV Skew</strong></td><td>Difference in IV between OTM puts and OTM calls</td></tr>
    <tr><td><strong>Wash Sale</strong></td><td>IRS rule disallowing loss deduction if same security is repurchased within 30 days</td></tr>
    <tr><td><strong>CSP</strong></td><td>Cash-Secured Put ‚Äî selling a put with enough cash to buy shares if assigned</td></tr>
    <tr><td><strong>Wheel Strategy</strong></td><td>Income strategy cycling between selling CSPs and covered calls</td></tr>
    <tr><td><strong>P/E Ratio</strong></td><td>Price-to-Earnings ‚Äî stock price divided by earnings per share</td></tr>
    <tr><td><strong>EPS</strong></td><td>Earnings Per Share ‚Äî company's profit divided by outstanding shares</td></tr>
    <tr><td><strong>Free Cash Flow (FCF)</strong></td><td>Cash remaining after operating expenses and capital expenditures</td></tr>
    <tr><td><strong>Debt-to-Equity</strong></td><td>Ratio of total debt to shareholder equity ‚Äî measures leverage</td></tr>
    <tr><td><strong>Golden Cross</strong></td><td>50-day SMA crosses above 200-day SMA ‚Äî bullish long-term signal</td></tr>
    <tr><td><strong>Death Cross</strong></td><td>50-day SMA crosses below 200-day SMA ‚Äî bearish long-term signal</td></tr>
    <tr><td><strong>PDT</strong></td><td>Pattern Day Trader ‚Äî FINRA rule limiting accounts under $25K to 3 day trades per 5 business days</td></tr>
    <tr><td><strong>LEAPS</strong></td><td>Long-Term Equity Anticipation Securities ‚Äî options with expiration dates 1+ years out</td></tr>
    <tr><td><strong>Theta Decay</strong></td><td>The daily erosion of an option's time value ‚Äî accelerates in the last 30 days before expiration</td></tr>
    <tr><td><strong>Rolling</strong></td><td>Closing a current option position and opening a new one at a different strike/expiration</td></tr>
    <tr><td><strong>Bid-Ask Spread</strong></td><td>The difference between the highest buy price and lowest sell price ‚Äî wider spread = less liquid, higher cost to trade</td></tr>
  </tbody>
</table>
</section>

<section id="patterns-ref">
<h2>üïØÔ∏è Candlestick Patterns Quick Reference</h2>
<table>
  <thead><tr><th>Pattern</th><th>Type</th><th>Signal</th><th>Confirmation Needed</th></tr></thead>
  <tbody>
    <tr><td>Hammer</td><td>Single</td><td>Bullish reversal</td><td>Next candle closes above hammer's body</td></tr>
    <tr><td>Inverted Hammer</td><td>Single</td><td>Bullish reversal</td><td>Next candle confirms with higher close</td></tr>
    <tr><td>Shooting Star</td><td>Single</td><td>Bearish reversal</td><td>Next candle closes below star's body</td></tr>
    <tr><td>Hanging Man</td><td>Single</td><td>Bearish reversal</td><td>Next candle closes below hanging man</td></tr>
    <tr><td>Doji</td><td>Single</td><td>Indecision</td><td>Direction of next candle determines bias</td></tr>
    <tr><td>Bullish Engulfing</td><td>Double</td><td>Bullish reversal</td><td>Volume should be above average</td></tr>
    <tr><td>Bearish Engulfing</td><td>Double</td><td>Bearish reversal</td><td>Volume should be above average</td></tr>
    <tr><td>Morning Star</td><td>Triple</td><td>Bullish reversal</td><td>3rd candle should close above midpoint of 1st</td></tr>
    <tr><td>Evening Star</td><td>Triple</td><td>Bearish reversal</td><td>3rd candle should close below midpoint of 1st</td></tr>
    <tr><td>Three White Soldiers</td><td>Triple</td><td>Bullish continuation</td><td>Each candle opens within prior body, closes higher</td></tr>
    <tr><td>Three Black Crows</td><td>Triple</td><td>Bearish continuation</td><td>Each candle opens within prior body, closes lower</td></tr>
  </tbody>
</table>
</section>

<section id="mistakes">
<h2>üö´ Top 10 Mistakes That Blow Up Accounts</h2>
<ol>
  <li><strong>No stop loss</strong> ‚Äî "It'll come back" is the most expensive phrase in trading</li>
  <li><strong>Oversizing positions</strong> ‚Äî One trade should never make or break your account</li>
  <li><strong>Trading without a plan</strong> ‚Äî If you don't know your exit before entry, you're gambling</li>
  <li><strong>Buying OTM weekly options</strong> ‚Äî Lottery tickets with terrible odds</li>
  <li><strong>Ignoring IV before buying options</strong> ‚Äî High IV = expensive options = harder to profit</li>
  <li><strong>Holding through earnings without a strategy</strong> ‚Äî IV crush destroys option buyers</li>
  <li><strong>Averaging down on losers</strong> ‚Äî Adding to a losing position is doubling your mistake</li>
  <li><strong>Trading every day</strong> ‚Äî Sometimes the best trade is no trade</li>
  <li><strong>Following "stock tips" from social media</strong> ‚Äî By the time you see it, the move is done</li>
  <li><strong>Not journaling</strong> ‚Äî You can't improve what you don't measure</li>
</ol>
</section>

<section id="rules-of-the-game">
<h2>üèõÔ∏è Timeless Rules From Legendary Investors</h2>
<p>These principles have survived every crash, bubble, and black swan event in market history. Tattoo them on your brain.</p>

<div class="exercise">
  <div class="exercise-header">
    <span class="exercise-badge">Wisdom</span>
    <span class="exercise-title">The 15 Rules That Separate Survivors From Statistics</span>
  </div>
  <ol>
    <li><strong>Preserve capital above all else.</strong> You can't trade if you're broke. Defense wins championships.</li>
    <li><strong>Cut losses short, let winners run.</strong> The hardest rule to follow and the most important.</li>
    <li><strong>The trend is your friend ‚Äî until it ends.</strong> Don't fight the market. Swim with the current.</li>
    <li><strong>Be fearful when others are greedy, greedy when others are fearful.</strong> Contrarian thinking at extremes pays.</li>
    <li><strong>The market can stay irrational longer than you can stay solvent.</strong> Never bet the farm on being "right."</li>
    <li><strong>Risk/reward must be at least 1:2.</strong> If you're risking $1 to make $1, the math doesn't work long-term.</li>
    <li><strong>Never add to a losing position.</strong> Averaging down is how small losses become account-ending losses. (Note: this applies to speculative trades. Dollar-cost averaging into long-term holdings or selling another CSP at a lower strike as part of the Wheel strategy is a different, deliberate approach.)</li>
    <li><strong>Cash is a position.</strong> Not being in the market IS a strategy. The best traders sit out 70% of the time.</li>
    <li><strong>Plan the trade, trade the plan.</strong> Deviating from your plan in the heat of the moment is how you lose.</li>
    <li><strong>The first loss is the best loss.</strong> Take it quickly. The second and third losses are always bigger.</li>
    <li><strong>Don't confuse a bull market with brains.</strong> Everyone's a genius in a rising market. The real test is drawdowns.</li>
    <li><strong>Diversify your strategies, not just your stocks.</strong> One strategy won't work in all market conditions.</li>
    <li><strong>Time in the market beats timing the market</strong> ‚Äî for investors. For traders, timing IS the game.</li>
    <li><strong>Your edge is discipline, not intelligence.</strong> The smartest traders aren't the most profitable. The most disciplined are.</li>
    <li><strong>It takes 2-3 years to become consistently profitable.</strong> Anyone who tells you otherwise is selling something.</li>
  </ol>
</div>

<blockquote>"Rule No. 1: Never lose money. Rule No. 2: Never forget Rule No. 1." ‚Äî Warren Buffett</blockquote>
<blockquote>"In investing, what is comfortable is rarely profitable." ‚Äî Robert Arnott</blockquote>
<blockquote>"The four most dangerous words in investing are: 'This time it's different.'" ‚Äî Sir John Templeton</blockquote>
</section>

<!-- ==================== GREEKS CHEATSHEET ==================== -->
<section id="greeks-cheat">
<h2>üî¢ The Greeks Cheatsheet</h2>
<p>A quick-reference card for the five Greeks. Print this, bookmark it, tape it to your monitor.</p>
<table>
  <thead><tr><th>Greek</th><th>Symbol</th><th>Measures</th><th>Range</th><th>Key Rule of Thumb</th></tr></thead>
  <tbody>
    <tr><td><strong>Delta</strong></td><td>Œî</td><td>Price change per $1 stock move</td><td>0 to ¬±1</td><td>‚âà probability of expiring ITM. ATM ‚âà 0.50 delta.</td></tr>
    <tr><td><strong>Gamma</strong></td><td>Œì</td><td>Rate of change of delta</td><td>Highest ATM, near expiry</td><td>High gamma near expiration = delta swings wildly. Dangerous for sellers.</td></tr>
    <tr><td><strong>Theta</strong></td><td>Œò</td><td>Time decay per day</td><td>Always negative for buyers</td><td>Accelerates in last 30 days. Sellers love theta; buyers fight it.</td></tr>
    <tr><td><strong>Vega</strong></td><td>ŒΩ</td><td>Price change per 1% IV change</td><td>Highest ATM, far expiry</td><td>Long options = long vega (want IV up). Short options = short vega (want IV down).</td></tr>
    <tr><td><strong>Rho</strong></td><td>œÅ</td><td>Sensitivity to interest rates</td><td>Small effect</td><td>Mostly ignorable for short-term trades. Matters on LEAPS.</td></tr>
  </tbody>
</table>

<h3>Greeks Interaction Cheat Sheet</h3>
<table>
  <thead><tr><th>Scenario</th><th>Delta</th><th>Gamma</th><th>Theta</th><th>Vega</th></tr></thead>
  <tbody>
    <tr><td><strong>Long Call</strong></td><td>+ (positive)</td><td>+ (positive)</td><td>‚àí (negative)</td><td>+ (positive)</td></tr>
    <tr><td><strong>Long Put</strong></td><td>‚àí (negative)</td><td>+ (positive)</td><td>‚àí (negative)</td><td>+ (positive)</td></tr>
    <tr><td><strong>Short Call</strong></td><td>‚àí (negative)</td><td>‚àí (negative)</td><td>+ (positive)</td><td>‚àí (negative)</td></tr>
    <tr><td><strong>Short Put</strong></td><td>+ (positive)</td><td>‚àí (negative)</td><td>+ (positive)</td><td>‚àí (negative)</td></tr>
    <tr><td><strong>Bull Call Spread</strong></td><td>+ (small)</td><td>‚âà neutral</td><td>‚âà neutral</td><td>‚âà neutral</td></tr>
    <tr><td><strong>Iron Condor</strong></td><td>‚âà neutral</td><td>‚àí (negative)</td><td>+ (positive)</td><td>‚àí (negative)</td></tr>
  </tbody>
</table>

<div class="pro-tip">
  <strong>The one-sentence summary for each Greek:</strong> Delta = how much you make per $1 move. Gamma = how fast delta changes. Theta = how much you lose per day waiting. Vega = how much IV helps or hurts you. Rho = ignore it (usually).
</div>
</section>

<!-- ==================== DASHBOARD GUIDE ==================== -->
<section id="dashboard-guide">
<h2>üìä How to Use the Stock Dashboard</h2>
<p>The built-in dashboard is your practice arena. It pulls live market data and gives you real charting tools to apply everything you've learned. Here's how to get the most out of every feature.</p>

<h3>Getting Started</h3>
<p>Click the <strong>üìä Dashboard</strong> button in the top navigation bar. Type any ticker symbol (e.g., AAPL, TSLA, SPY) into the input field and press Enter or click "Add Stock." Your watchlist is saved automatically ‚Äî it'll be there when you come back.</p>

<h3>Reading the Stock Cards</h3>
<p>Each card in your watchlist shows:</p>
<ul>
  <li><strong>Price</strong> ‚Äî The current (or last) market price, color-coded green (up) or red (down)</li>
  <li><strong>Change</strong> ‚Äî Dollar and percentage change from previous close</li>
  <li><strong>H / L</strong> ‚Äî Today's high and low prices. Wide range = volatile day</li>
  <li><strong>Vol</strong> ‚Äî Trading volume. Compare to average ‚Äî high volume confirms moves</li>
</ul>

<h3>Chart Types</h3>
<div class="dash-guide-section">
<h4>üïØÔ∏è Candlestick (Default)</h4>
<p>Each candle shows open, high, low, close for one period. Green/hollow = bullish (close > open). Red/filled = bearish (close < open). The wicks show the full price range. This is the chart type professional traders use ‚Äî learn it well.</p>

<h4>üìà Line Chart</h4>
<p>Connects closing prices only. Best for seeing the overall trend without noise. Use this when you want a clean view of direction, especially on longer timeframes (3M, 1Y).</p>

<h4>üìä OHLC Bars</h4>
<p>Similar to candlesticks but uses horizontal ticks. Left tick = open, right tick = close. Some traders prefer these for less visual clutter.</p>
</div>

<h3>Timeframes</h3>
<p>Switch between 1D, 1W, 1M, 3M, and 1Y to see different perspectives:</p>
<table>
  <thead><tr><th>Timeframe</th><th>Each Candle</th><th>Best For</th></tr></thead>
  <tbody>
    <tr><td><strong>1D</strong></td><td>5 minutes</td><td>Day trading, intraday patterns</td></tr>
    <tr><td><strong>1W</strong></td><td>15 minutes</td><td>Short-term swing setups</td></tr>
    <tr><td><strong>1M</strong></td><td>1 day</td><td>Swing trading, pattern recognition</td></tr>
    <tr><td><strong>3M</strong></td><td>1 day</td><td>Medium-term trends, support/resistance</td></tr>
    <tr><td><strong>6M</strong></td><td>1 day</td><td>Longer swing trades, seasonal patterns</td></tr>
    <tr><td><strong>1Y</strong></td><td>1 week</td><td>Long-term trend, 200 SMA analysis</td></tr>
  </tbody>
</table>

<h3>Technical Indicators</h3>
<p>Toggle indicators on/off using the buttons above the chart. Here's what each one tells you:</p>

<div class="dash-guide-section">
<h4>Moving Averages (SMA 20, SMA 50, SMA 200, EMA 9)</h4>
<p><strong>SMA (Simple Moving Average)</strong> smooths price over N periods. <strong>EMA (Exponential)</strong> weights recent prices more heavily.</p>
<ul>
  <li><strong>EMA 9</strong> (cyan) ‚Äî Fast signal line. Day traders watch this closely</li>
  <li><strong>SMA 20</strong> (amber) ‚Äî Short-term trend. Price above = bullish short-term</li>
  <li><strong>SMA 50</strong> (purple) ‚Äî Medium-term trend. Institutional traders watch this</li>
  <li><strong>SMA 200</strong> (white) ‚Äî The big one. Price above 200 SMA = bull market. Below = bear market. This is the line that separates the bulls from the bears</li>
  <li><strong>Golden Cross</strong> ‚Äî 50 SMA crosses above 200 SMA ‚Üí bullish signal</li>
  <li><strong>Death Cross</strong> ‚Äî 50 SMA crosses below 200 SMA ‚Üí bearish signal</li>
</ul>

<h4>Bollinger Bands</h4>
<p>A 20-period SMA with bands at ¬±2 standard deviations. When price touches the upper band, it may be overbought. Lower band = potentially oversold. When bands squeeze tight, expect a big move coming (but you don't know which direction).</p>

<h4>VWAP (Volume Weighted Average Price)</h4>
<p>The average price weighted by volume. Institutional traders use VWAP as a benchmark. Price above VWAP = buyers in control. Below = sellers winning. Most useful on intraday (1D) timeframe.</p>

<h4>RSI (Relative Strength Index)</h4>
<p>Shown in its own panel below the chart. Ranges from 0‚Äì100:</p>
<ul>
  <li><strong>Above 70</strong> ‚Äî Overbought. Price may pull back. Don't blindly sell though ‚Äî strong trends can stay overbought for weeks</li>
  <li><strong>Below 30</strong> ‚Äî Oversold. Potential bounce. But in a downtrend, stocks can stay oversold</li>
  <li><strong>50 line</strong> ‚Äî The midpoint. In uptrends, RSI tends to bounce off 40‚Äì50. In downtrends, it gets rejected at 50‚Äì60</li>
  <li><strong>Divergence</strong> ‚Äî Price makes new high but RSI doesn't ‚Üí bearish divergence (weakening momentum). Opposite for bullish</li>
</ul>

<h4>MACD (Moving Average Convergence Divergence)</h4>
<p>Shown below RSI. Three components:</p>
<ul>
  <li><strong>MACD Line</strong> (blue) ‚Äî Difference between 12 EMA and 26 EMA</li>
  <li><strong>Signal Line</strong> (orange) ‚Äî 9-period EMA of the MACD line</li>
  <li><strong>Histogram</strong> ‚Äî The difference between MACD and Signal. Green bars growing = bullish momentum increasing</li>
  <li><strong>Bullish crossover</strong> ‚Äî MACD crosses above signal line ‚Üí buy signal</li>
  <li><strong>Bearish crossover</strong> ‚Äî MACD crosses below signal line ‚Üí sell signal</li>
  <li><strong>Zero line cross</strong> ‚Äî MACD crossing above zero confirms uptrend</li>
</ul>
</div>

<h3>Key Stats Panel</h3>
<p>When you select a stock, the stats panel shows real-time data pulled from Yahoo Finance's chart API:</p>
<ul>
  <li><strong>Price</strong> ‚Äî Current regular market price</li>
  <li><strong>Prev Close</strong> ‚Äî Previous session's closing price. Compare to current price for today's move</li>
  <li><strong>52-Week High/Low</strong> ‚Äî Where price sits relative to its yearly range. Near the high? Momentum. Near the low? Value trap or opportunity</li>
  <li><strong>Avg Volume</strong> ‚Äî 3-month average daily volume. Baseline for comparing today's activity. 2x average = significant interest</li>
  <li><strong>Day High / Day Low</strong> ‚Äî Today's intraday range. Useful for gauging volatility and setting stop levels</li>
  <li><strong>Day Volume</strong> ‚Äî Current session's total volume. Compare to Avg Volume to spot unusual activity</li>
</ul>

<h3>Comparison Overlay</h3>
<p>Add a second ticker to overlay on the chart for relative performance comparison. Both are normalized to percentage change from the start of the period. Use this to:</p>
<ul>
  <li>Compare a stock vs SPY to see if it's outperforming the market</li>
  <li>Compare two competitors (e.g., AAPL vs MSFT)</li>
  <li>Understand correlation ‚Äî do they move together or diverge?</li>
</ul>

<h3>Drawing Tools</h3>
<p>Click the trendline or horizontal line tool, then click two points on the chart to draw. These help you practice:</p>
<ul>
  <li><strong>Trendlines</strong> ‚Äî Connect swing lows (uptrend) or swing highs (downtrend). A break of the trendline signals a potential reversal</li>
  <li><strong>Horizontal Lines</strong> ‚Äî Mark support and resistance levels. These are prices where buying or selling pressure has historically appeared</li>
  <li><strong>Clear All</strong> ‚Äî Remove all drawings and start fresh</li>
</ul>

<h3>Paper Trading Simulator</h3>
<p>The built-in paper trader gives you a $100,000 virtual portfolio with two modes: Stocks and Options. Switch between them using the tabs.</p>

<h4>Stock Trading</h4>
<ul>
  <li><strong>Buy/Sell</strong> ‚Äî Enter shares quantity, click Buy or Sell. Uses the stock's current price</li>
  <li><strong>Open Positions</strong> ‚Äî Shows your current holdings with real-time P&L calculated from live prices</li>
  <li><strong>Trade History</strong> ‚Äî Every trade is logged with timestamp, price, and quantity</li>
</ul>

<h4>Options Trading</h4>
<p>Switch to the Options tab to trade calls and puts with simulated Black-Scholes pricing:</p>
<ul>
  <li><strong>Call/Put</strong> ‚Äî Select the option type</li>
  <li><strong>Buy/Sell</strong> ‚Äî Buy (go long) or Sell (write/short) the option. Selling requires 20% margin collateral</li>
  <li><strong>Strike</strong> ‚Äî Auto-fills to ATM when you select a ticker. Adjust for ITM/OTM</li>
  <li><strong>DTE</strong> ‚Äî Days to expiration. Theta decay accelerates below 30 DTE</li>
  <li><strong>Contracts</strong> ‚Äî Each contract represents 100 shares</li>
  <li><strong>Premium Preview</strong> ‚Äî Live Black-Scholes estimate updates as you change inputs</li>
  <li><strong>Greeks Display</strong> ‚Äî Shows Delta, Gamma, Theta, Vega, IV, intrinsic and time value before you trade</li>
  <li><strong>Close Button</strong> ‚Äî Each open option position has a Close button that calculates current premium based on time elapsed and price movement</li>
</ul>

<div class="pro-tip">
  <strong>Options practice ideas:</strong> (1) Buy an ATM call 30 DTE, check back daily to watch theta decay. (2) Sell an OTM put on a stock you'd want to own ‚Äî this is the start of the Wheel strategy. (3) Open a bull call spread: buy ATM call, sell OTM call same expiry. Compare the net premium to a naked call. (4) Watch how IV affects premium ‚Äî same strike/DTE on a volatile stock vs. a stable one.
</div>

<p><strong>Total P&L</strong> ‚Äî Your running profit/loss across all stock AND option trades combined. This is your report card.</p>
<p><strong>Reset</strong> ‚Äî Clears everything (stocks + options) back to $100K.</p>

<div class="pro-tip">
  <strong>Practice routine:</strong> Each day during the course, open the dashboard and do the following: (1) Add 3‚Äì5 stocks from different sectors, (2) identify the trend using SMA 20/50/200, (3) check RSI for overbought/oversold, (4) look for MACD crossovers, (5) draw support/resistance lines, (6) make a paper trade with a thesis, (7) journal why you entered and where your stop-loss would be.
</div>

<div class="warning">
  The dashboard uses a free CORS proxy for Yahoo Finance data. Prices may be delayed 15+ minutes and the proxy may occasionally be slow or unavailable. This is fine for learning ‚Äî you're studying patterns, not scalping pennies. For real-time data, use TradingView or your broker's platform.
</div>
</section>

<section id="resources">
<h2>üìö Recommended Resources</h2>
<h4>Books</h4>
<ul>
  <li><strong>"Trading in the Zone"</strong> by Mark Douglas ‚Äî The psychology bible</li>
  <li><strong>"Options as a Strategic Investment"</strong> by Lawrence McMillan ‚Äî The options encyclopedia</li>
  <li><strong>"Technical Analysis of the Financial Markets"</strong> by John Murphy ‚Äî The TA textbook</li>
  <li><strong>"The Intelligent Investor"</strong> by Benjamin Graham ‚Äî Foundational investing wisdom</li>
  <li><strong>"Market Wizards"</strong> by Jack Schwager ‚Äî Interviews with legendary traders</li>
</ul>
<h4>Free Tools</h4>
<ul>
  <li><strong>TradingView</strong> ‚Äî Best charting platform (free tier is excellent)</li>
  <li><strong>ThinkorSwim</strong> ‚Äî Professional-grade platform with paper trading</li>
  <li><strong>Barchart.com</strong> ‚Äî Options flow, unusual activity scanner</li>
  <li><strong>CBOE</strong> ‚Äî Options education and VIX data</li>
  <li><strong>Investopedia</strong> ‚Äî Reference for any term you don't know</li>
  <li><strong>tastylive (formerly tastytrade)</strong> ‚Äî Free research and education on selling premium, credit spreads, and the Wheel</li>
  <li><strong>OptionAlpha</strong> ‚Äî Free options trading education with structured courses and automation tools</li>
  <li><strong>FRED (Federal Reserve Economic Data)</strong> ‚Äî Free macro data: interest rates, GDP, unemployment, inflation ‚Äî essential for fundamental analysis</li>
</ul>
</section>

<!-- Final Section -->
<div class="final-section">
  <h2>üéì You've Completed the 7-Day Trading Mastery Plan</h2>
  <p style="position:relative; color:var(--text-muted); max-width:600px; margin:16px auto 0; font-size:1.05rem; line-height:1.7;">
    You now have the knowledge foundation. But knowledge without practice is worthless. Commit to 30 more days of paper trading before risking real capital. The market will always be there. Your job is to be ready when opportunity knocks.
  </p>
  <p style="position:relative; margin-top:20px; font-size:0.9rem; color:var(--text-muted);">
    <em>"The stock market is a device for transferring money from the impatient to the patient." ‚Äî Warren Buffett</em>
  </p>
</div>

</main>
</div>
<!-- ==================== DASHBOARD SECTION ==================== -->
<div class="dashboard-section" id="dashboardSection">
<div class="container-wide">
  <div class="dash-header">
    <div class="dash-title">üìä Stock Dashboard</div>
    <div class="dash-controls">
      <input type="text" class="dash-input" id="symbolInput" placeholder="Enter symbol (e.g. AAPL)" onkeydown="if(event.key==='Enter')addStock()" />
      <button class="dash-btn" onclick="addStock()">+ Add Stock</button>
      <button class="dash-btn secondary" onclick="showCourse()">‚Üê Back to Course</button>
      <button class="dash-btn secondary" onclick="showCourse();setTimeout(()=>document.getElementById('dashboard-guide').scrollIntoView({behavior:'smooth'}),100)">‚ùì Guide</button>
    </div>
  </div>

  <!-- Watchlist Cards -->
  <div class="watchlist-grid" id="watchlistGrid"></div>

  <!-- Key Stats Panel -->
  <div class="stats-panel" id="statsPanel" style="display:none;">
    <div class="stat-item"><div class="stat-item-label">Price</div><div class="stat-item-value" id="statPrice">‚Äî</div></div>
    <div class="stat-item"><div class="stat-item-label">Prev Close</div><div class="stat-item-value" id="statPrevClose">‚Äî</div></div>
    <div class="stat-item"><div class="stat-item-label">52-Wk High</div><div class="stat-item-value" id="stat52H">‚Äî</div></div>
    <div class="stat-item"><div class="stat-item-label">52-Wk Low</div><div class="stat-item-value" id="stat52L">‚Äî</div></div>
    <div class="stat-item"><div class="stat-item-label">Avg Volume</div><div class="stat-item-value" id="statAvgVol">‚Äî</div></div>
    <div class="stat-item"><div class="stat-item-label">Day High</div><div class="stat-item-value" id="statDayHigh">‚Äî</div></div>
    <div class="stat-item"><div class="stat-item-label">Day Low</div><div class="stat-item-value" id="statDayLow">‚Äî</div></div>
    <div class="stat-item"><div class="stat-item-label">Day Volume</div><div class="stat-item-value" id="statDayVol">‚Äî</div></div>
  </div>

  <!-- Chart Area -->
  <div class="chart-container" id="chartArea" style="display:none;">
    <div class="chart-toolbar">
      <div style="display:flex;align-items:center;gap:16px;flex-wrap:wrap;">
        <div class="chart-symbol-display" id="chartSymbolDisplay">SPY</div>
        <div class="chart-timeframes">
          <button class="tf-btn" data-tf="1D" onclick="setTimeframe('1D',this)">1D</button>
          <button class="tf-btn" data-tf="1W" onclick="setTimeframe('1W',this)">1W</button>
          <button class="tf-btn active" data-tf="1M" onclick="setTimeframe('1M',this)">1M</button>
          <button class="tf-btn" data-tf="3M" onclick="setTimeframe('3M',this)">3M</button>
          <button class="tf-btn" data-tf="6M" onclick="setTimeframe('6M',this)">6M</button>
          <button class="tf-btn" data-tf="1Y" onclick="setTimeframe('1Y',this)">1Y</button>
        </div>
        <select class="interval-select" id="intervalSelect" onchange="setChartInterval(this.value)" title="Candle aggregation period">
          <option value="auto">Auto</option>
          <option value="5m">5 min</option>
          <option value="15m">15 min</option>
          <option value="60m">1 hour</option>
          <option value="1d">1 day</option>
          <option value="1wk">1 week</option>
          <option value="1mo">1 month</option>
        </select>
      </div>
      <div style="display:flex;align-items:center;gap:12px;flex-wrap:wrap;">
        <div class="chart-types">
          <button class="ct-btn active" title="Candlestick" onclick="setChartType('candle',this)">üïØÔ∏è</button>
          <button class="ct-btn" title="Line" onclick="setChartType('line',this)">üìà</button>
          <button class="ct-btn" title="OHLC Bars" onclick="setChartType('ohlc',this)">üìä</button>
        </div>
        <div class="drawing-toolbar">
          <button class="draw-btn" id="drawTrendBtn" onclick="setDrawingMode('trendline',this)" title="Draw Trendline">üìê Trend</button>
          <button class="draw-btn" id="drawHLineBtn" onclick="setDrawingMode('hline',this)" title="Horizontal Line">‚ûñ H-Line</button>
          <button class="draw-btn" onclick="clearDrawings()" title="Clear All Drawings">üóëÔ∏è Clear</button>
        </div>
      </div>
    </div>
    <div class="indicators-panel">
      <button class="ind-toggle" data-ind="sma20" onclick="toggleIndicator('sma20',this)">SMA 20</button>
      <button class="ind-toggle" data-ind="sma50" onclick="toggleIndicator('sma50',this)">SMA 50</button>
      <button class="ind-toggle" data-ind="sma200" onclick="toggleIndicator('sma200',this)">SMA 200</button>
      <button class="ind-toggle" data-ind="ema9" onclick="toggleIndicator('ema9',this)">EMA 9</button>
      <button class="ind-toggle" data-ind="bb" onclick="toggleIndicator('bb',this)">Bollinger</button>
      <button class="ind-toggle" data-ind="vwap" onclick="toggleIndicator('vwap',this)">VWAP</button>
      <button class="ind-toggle" data-ind="rsi" onclick="toggleIndicator('rsi',this)">RSI</button>
      <button class="ind-toggle" data-ind="macd" onclick="toggleIndicator('macd',this)">MACD</button>
    </div>
    <!-- Comparison bar -->
    <div class="compare-bar">
      <span style="font-size:11px;font-weight:600;color:var(--text-muted);text-transform:uppercase;letter-spacing:.5px;">Compare:</span>
      <input type="text" class="compare-input" id="compareInput" placeholder="e.g. SPY" onkeydown="if(event.key==='Enter')addComparison()" />
      <button class="dash-btn" style="padding:6px 12px;font-size:12px;" onclick="addComparison()">+ Add</button>
      <span id="compareTags"></span>
    </div>
    <div style="position:relative;">
      <canvas id="mainChart"></canvas>
      <div class="chart-tooltip" id="chartTooltip"></div>
    </div>
    <canvas class="volume-chart" id="volumeChart"></canvas>
    <!-- RSI Panel -->
    <div class="sub-indicator-panel" id="rsiPanel" style="display:none;">
      <span class="sub-indicator-label">RSI (14)</span>
      <canvas id="rsiChart" style="width:100%;height:100px;"></canvas>
    </div>
    <!-- MACD Panel -->
    <div class="sub-indicator-panel" id="macdPanel" style="display:none;">
      <span class="sub-indicator-label">MACD (12,26,9)</span>
      <canvas id="macdChart" style="width:100%;height:120px;"></canvas>
    </div>
  </div>

  <!-- Paper Trading Panel -->
  <div class="paper-trade-panel" id="paperTradePanel">
    <div class="paper-trade-header">
      <div class="paper-trade-title">üìù Paper Trading Simulator</div>
      <div class="paper-balance">$<span id="paperBalance">100,000.00</span></div>
    </div>

    <!-- Tabs: Stocks / Options -->
    <div class="paper-tabs">
      <div class="paper-tab active" id="tabStocks" onclick="switchPaperTab('stocks')">Stocks</div>
      <div class="paper-tab" id="tabOptions" onclick="switchPaperTab('options')">Options</div>
    </div>

    <!-- Stock Trading Controls (existing) -->
    <div id="stockTradePane">
      <div class="paper-trade-controls">
        <label class="pt-label">Symbol<select id="tradeSymbolSelect" style="width:100px;"><option value="">Select...</option></select></label>
        <label class="pt-label">Shares<input type="number" id="tradeShares" placeholder="Qty" min="1" value="10" style="width:80px;" /></label>
        <button class="trade-btn-buy" onclick="paperBuy()">BUY</button>
        <button class="trade-btn-sell" onclick="paperSell()">SELL</button>
        <span style="font-size:12px;color:var(--text-muted);margin-left:8px;">Total P&L: <span id="totalPnl" style="font-weight:700;">$0.00</span></span>
        <button class="trade-btn-reset" onclick="resetPaperTrading()">üîÑ Reset</button>
      </div>
    </div>

    <!-- Options Trading Controls -->
    <div id="optionsTradePane" style="display:none;">
      <div class="options-controls">
        <label class="pt-label">Ticker<select id="optSymbolSelect" style="width:100px;"><option value="">Select...</option></select></label>
        <label class="pt-label">Type<select id="optType" style="width:80px;">
          <option value="call">Call</option>
          <option value="put">Put</option>
        </select></label>
        <label class="pt-label">Action<select id="optAction" style="width:80px;">
          <option value="buy">Buy</option>
          <option value="sell">Sell</option>
        </select></label>
        <label class="pt-label">Strike $<input type="number" id="optStrike" placeholder="$" min="1" step="1" style="width:90px;" /></label>
        <label class="pt-label">DTE<input type="number" id="optDTE" placeholder="Days" min="1" max="365" value="30" style="width:70px;" title="Days to expiration" /></label>
        <label class="pt-label">Contracts<input type="number" id="optContracts" placeholder="Qty" min="1" value="1" style="width:60px;" title="Number of contracts (√ó100 shares)" /></label>
        <div class="est-premium-display" id="estPremiumDisplay" title="Estimated premium per share">‚Äî</div>
        <button class="trade-btn-buy" onclick="paperOptionTrade()">EXECUTE</button>
        <button class="trade-btn-reset" onclick="resetPaperTrading()">üîÑ Reset</button>
      </div>
      <div class="option-greeks" id="optionGreeksPreview">
        <div class="greek-item">Œî Delta: <span id="prevDelta">‚Äî</span></div>
        <div class="greek-item">Œì Gamma: <span id="prevGamma">‚Äî</span></div>
        <div class="greek-item">Œò Theta: <span id="prevTheta">‚Äî</span></div>
        <div class="greek-item">V Vega: <span id="prevVega">‚Äî</span></div>
        <div class="greek-item">IV: <span id="prevIV">‚Äî</span></div>
        <div class="greek-item">Intrinsic: <span id="prevIntrinsic">‚Äî</span></div>
        <div class="greek-item">Time Val: <span id="prevTimeVal">‚Äî</span></div>
      </div>
    </div>

    <div class="positions-grid">
      <div class="positions-box">
        <div class="positions-box-title" id="positionsTitle">Open Positions</div>
        <div id="openPositions"><div style="font-size:13px;color:var(--text-muted);padding:8px 0;">No open positions</div></div>
      </div>
      <div class="positions-box">
        <div class="positions-box-title">Trade History</div>
        <div id="tradeHistory" style="max-height:200px;overflow-y:auto;"><div style="font-size:13px;color:var(--text-muted);padding:8px 0;">No trades yet</div></div>
      </div>
    </div>
  </div>

  <!-- Empty state -->
  <div id="emptyState" style="text-align:center;padding:80px 20px;">
    <div style="font-size:3rem;margin-bottom:16px;">üìà</div>
    <div style="font-family:'Space Grotesk',sans-serif;font-size:1.25rem;font-weight:700;color:var(--text-heading);margin-bottom:8px;">Add stocks to your watchlist</div>
    <div style="color:var(--text-muted);font-size:14px;">Type a ticker symbol above and click "Add Stock" to start tracking</div>
  </div>
</div>
</div>
<script>
  // ===== THEME TOGGLE =====
  const themeToggle = document.getElementById('themeToggle');
  const thumb = document.querySelector('.theme-toggle-thumb');
  const savedTheme = localStorage.getItem('trading-theme') || 'dark';
  if (savedTheme === 'light') { document.documentElement.setAttribute('data-theme','light'); thumb.textContent='‚òÄÔ∏è'; }
  themeToggle.addEventListener('click', () => {
    const isLight = document.documentElement.getAttribute('data-theme') === 'light';
    document.documentElement.setAttribute('data-theme', isLight ? '' : 'light');
    thumb.textContent = isLight ? 'üåô' : '‚òÄÔ∏è';
    localStorage.setItem('trading-theme', isLight ? 'dark' : 'light');
    if (currentChartData.length) drawChart();
  });

  // ===== TOC =====
  const tocToggle = document.getElementById('tocToggle');
  const tocSidebar = document.getElementById('tocSidebar');
  const tocOverlay = document.getElementById('tocOverlay');
  function openTOC() { tocSidebar.classList.add('open'); tocOverlay.classList.add('open'); }
  function closeTOC() { tocSidebar.classList.remove('open'); tocOverlay.classList.remove('open'); }
  tocToggle.addEventListener('click', () => tocSidebar.classList.contains('open') ? closeTOC() : openTOC());
  tocOverlay.addEventListener('click', closeTOC);
  document.querySelectorAll('.toc-link').forEach(l => l.addEventListener('click', closeTOC));
  document.addEventListener('keydown', e => { if(e.key==='Escape') closeTOC(); });
  function scrollToHero() { window.scrollTo({top:0,behavior:'smooth'}); }

  // ===== COPY PROMPT FUNCTION =====
  function copyPrompt(button, promptId) {
    const promptContent = document.getElementById(promptId);
    const text = promptContent.textContent;
    navigator.clipboard.writeText(text).then(() => {
      const originalText = button.innerHTML;
      button.innerHTML = '<span>‚úì</span> Copied!';
      button.classList.add('copied');
      setTimeout(() => { button.innerHTML = originalText; button.classList.remove('copied'); }, 2000);
    }).catch(() => {
      const textArea = document.createElement('textarea');
      textArea.value = text;
      document.body.appendChild(textArea);
      textArea.select();
      document.execCommand('copy');
      document.body.removeChild(textArea);
      const originalText = button.innerHTML;
      button.innerHTML = '<span>‚úì</span> Copied!';
      button.classList.add('copied');
      setTimeout(() => { button.innerHTML = originalText; button.classList.remove('copied'); }, 2000);
    });
  }

  // ===== NAVIGATION =====
  function showCourse() {
    document.getElementById('courseContent').classList.remove('hidden');
    document.getElementById('dashboardSection').classList.remove('active');
  }
  function showDashboard() {
    document.getElementById('courseContent').classList.add('hidden');
    document.getElementById('dashboardSection').classList.add('active');
    closeTOC();
    window.scrollTo({top:0,behavior:'smooth'});
    updateIntervalHint();
  }
  function toggleDashboard() {
    const dash = document.getElementById('dashboardSection');
    if (dash.classList.contains('active')) showCourse(); else showDashboard();
  }
  // Open dashboard in a new tab so course scroll position is preserved
  function openDashboardTab() {
    const url = window.location.pathname + '#dashboard';
    window.open(url, '_blank');
  }
  // On page load, auto-show dashboard if #dashboard hash is present
  if (window.location.hash === '#dashboard') {
    // Small delay to let DOM settle
    setTimeout(() => showDashboard(), 100);
  }

  // Smooth scroll + active nav
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function(e) {
      const href = this.getAttribute('href');
      if (href !== '#') { e.preventDefault(); const t = document.querySelector(href); if(t) t.scrollIntoView({behavior:'smooth'}); }
    });
  });
  const sections = document.querySelectorAll('.day-section');
  const navDays = document.querySelectorAll('.nav-day');
  window.addEventListener('scroll', () => {
    if (document.getElementById('dashboardSection').classList.contains('active')) {
      navDays.forEach(d => { d.style.background = ''; d.style.color = ''; });
      return;
    }
    let current = '';
    sections.forEach(s => { if(scrollY >= s.offsetTop - 200) current = s.getAttribute('id'); });
    navDays.forEach(d => {
      d.style.background = ''; d.style.color = '';
      if(d.getAttribute('href') === '#' + current) { d.style.background='var(--primary)'; d.style.color='white'; }
    });
  });
</script>
<script>
  // ===== DASHBOARD STATE =====
  let watchlist = JSON.parse(localStorage.getItem('trading-watchlist') || '[]');
  let selectedSymbol = null;
  let currentChartData = [];
  let currentTimeframe = '1M';
  let currentInterval = 'auto';
  let currentChartType = 'candle';
  let activeIndicators = new Set();
  let stockDataCache = {};
  let comparisonSymbol = null;
  let comparisonData = [];
  let drawingMode = null; // 'trendline' | 'hline' | null
  let drawings = JSON.parse(localStorage.getItem('trading-drawings') || '[]');
  let drawingStart = null; // temp point for trendline
  let chartLayout = {}; // stored layout params for coordinate mapping

  // ===== PAPER TRADING STATE =====
  let paperPortfolio = JSON.parse(localStorage.getItem('trading-paper') || 'null') || {
    cash: 100000, positions: [], history: [], optionPositions: [], optionHistory: []
  };
  // Migrate old portfolios that lack options arrays
  if (!paperPortfolio.optionPositions) paperPortfolio.optionPositions = [];
  if (!paperPortfolio.optionHistory) paperPortfolio.optionHistory = [];
  function savePaper() { localStorage.setItem('trading-paper', JSON.stringify(paperPortfolio)); }

  // ===== STOCK DATA via Yahoo Finance (CORS proxy) =====
  const PROXY = 'https://corsproxy.io/?url=';

  async function fetchStockQuote(symbol) {
    try {
      const yahooUrl = `https://query1.finance.yahoo.com/v8/finance/chart/${encodeURIComponent(symbol)}?interval=1d&range=5d`;
      const url = PROXY + encodeURIComponent(yahooUrl);
      const res = await fetch(url);
      if (!res.ok) throw new Error('Not found');
      const data = await res.json();
      const result = data.chart.result[0];
      const meta = result.meta;
      const quote = result.indicators.quote[0];
      const closes = quote.close.filter(c => c !== null);
      const prevClose = meta.chartPreviousClose || closes[closes.length - 2] || meta.regularMarketPrice;
      const price = meta.regularMarketPrice;
      const change = price - prevClose;
      const changePct = (change / prevClose) * 100;
      return {
        symbol: meta.symbol, name: meta.shortName || meta.symbol,
        price, change, changePct,
        high: meta.regularMarketDayHigh || Math.max(...closes),
        low: meta.regularMarketDayLow || Math.min(...closes),
        volume: meta.regularMarketVolume || 0
      };
    } catch(e) { console.error('Quote fetch error:', symbol, e); return null; }
  }

  async function fetchKeyStats(symbol) {
    try {
      const now = Math.floor(Date.now() / 1000);
      const period1 = now - 90 * 86400;
      const yahooUrl = `https://query1.finance.yahoo.com/v8/finance/chart/${encodeURIComponent(symbol)}?interval=1d&period1=${period1}&period2=${now}&includePrePost=false`;
      const url = PROXY + encodeURIComponent(yahooUrl);
      const res = await fetch(url);
      if (!res.ok) return null;
      const data = await res.json();
      const result = data.chart.result[0];
      const meta = result.meta;
      const volumes = result.indicators.quote[0].volume || [];
      const fmtNum = (n, d=2) => n != null ? Number(n).toLocaleString(undefined, {minimumFractionDigits:d, maximumFractionDigits:d}) : '‚Äî';
      const fmtVol = (n) => {
        if (n == null) return '‚Äî';
        if (n >= 1e9) return (n/1e9).toFixed(2) + 'B';
        if (n >= 1e6) return (n/1e6).toFixed(2) + 'M';
        if (n >= 1e3) return (n/1e3).toFixed(1) + 'K';
        return n.toLocaleString();
      };
      // Calculate avg volume from actual 3-month daily data
      const validVols = volumes.filter(v => v != null && v > 0);
      const avgVol = validVols.length > 0 ? validVols.reduce((a,b) => a+b, 0) / validVols.length : null;
      // Day high/low from last candle
      const quotes = result.indicators.quote[0];
      const lastIdx = (result.timestamp || []).length - 1;
      const dayHigh = lastIdx >= 0 ? quotes.high[lastIdx] : null;
      const dayLow = lastIdx >= 0 ? quotes.low[lastIdx] : null;
      const dayVol = lastIdx >= 0 ? quotes.volume[lastIdx] : null;
      return {
        price: fmtNum(meta.regularMarketPrice),
        prevClose: fmtNum(meta.chartPreviousClose || meta.previousClose),
        fiftyTwoWeekHigh: fmtNum(meta.fiftyTwoWeekHigh),
        fiftyTwoWeekLow: fmtNum(meta.fiftyTwoWeekLow),
        avgVolume: fmtVol(avgVol),
        dayHigh: fmtNum(dayHigh),
        dayLow: fmtNum(dayLow),
        dayVolume: fmtVol(dayVol)
      };
    } catch(e) { console.error('Stats fetch error:', symbol, e); return null; }
  }

  async function fetchChartData(symbol, range) {
    const autoIntervalMap = { '1D':'5m', '1W':'15m', '1M':'1d', '3M':'1d', '6M':'1d', '1Y':'1wk' };
    let interval = currentInterval === 'auto' ? (autoIntervalMap[range] || '1d') : currentInterval;
    // Yahoo limits intraday intervals: 5m/15m max ~7d, 60m max ~60d
    const maxRangeForInterval = { '5m':['1D','1W'], '15m':['1D','1W'], '60m':['1D','1W','1M','3M'] };
    if (maxRangeForInterval[interval] && !maxRangeForInterval[interval].includes(range)) {
      interval = autoIntervalMap[range] || '1d';
      const sel = document.getElementById('intervalSelect');
      if (sel) { sel.value = 'auto'; currentInterval = 'auto'; updateIntervalHint(); }
      console.warn('Interval incompatible with range ‚Äî reverted to auto');
    }
    // Use period1/period2 for all ranges to guarantee correct date span
    const daysMap = { '1D':1, '1W':7, '1M':30, '3M':90, '6M':180, '1Y':365 };
    const now = Math.floor(Date.now() / 1000);
    const period1 = now - (daysMap[range] || 30) * 86400;
    try {
      const yahooUrl = `https://query1.finance.yahoo.com/v8/finance/chart/${encodeURIComponent(symbol)}?interval=${interval}&period1=${period1}&period2=${now}&includePrePost=false`;
      const url = PROXY + encodeURIComponent(yahooUrl);
      const res = await fetch(url);
      if (!res.ok) throw new Error('Chart data not found');
      const data = await res.json();
      const result = data.chart.result[0];
      const timestamps = result.timestamp || [];
      const quote = result.indicators.quote[0];
      const candles = [];
      for (let i = 0; i < timestamps.length; i++) {
        if (quote.open[i] == null || quote.close[i] == null) continue;
        candles.push({ time: timestamps[i]*1000, open: quote.open[i], high: quote.high[i], low: quote.low[i], close: quote.close[i], volume: quote.volume[i]||0 });
      }
      return candles;
    } catch(e) { console.error('Chart fetch error:', symbol, e); return []; }
  }
</script>
<script>
  // ===== WATCHLIST MANAGEMENT =====
  function saveWatchlist() { localStorage.setItem('trading-watchlist', JSON.stringify(watchlist)); }

  async function addStock() {
    const input = document.getElementById('symbolInput');
    const symbol = input.value.trim().toUpperCase();
    if (!symbol) return;
    if (watchlist.find(s => s.symbol === symbol)) { input.value = ''; selectStock(symbol); return; }
    input.value = '';
    watchlist.push({ symbol, name: 'Loading...', price: 0, change: 0, changePct: 0, high: 0, low: 0, volume: 0 });
    saveWatchlist(); renderWatchlist();
    const quote = await fetchStockQuote(symbol);
    if (quote) {
      const idx = watchlist.findIndex(s => s.symbol === symbol);
      if (idx !== -1) { watchlist[idx] = quote; saveWatchlist(); renderWatchlist(); }
      selectStock(symbol);
    } else {
      watchlist = watchlist.filter(s => s.symbol !== symbol);
      saveWatchlist(); renderWatchlist();
      alert(`Could not find stock: ${symbol}. Check the ticker symbol.`);
    }
  }

  function removeStock(symbol, e) {
    e.stopPropagation();
    watchlist = watchlist.filter(s => s.symbol !== symbol);
    saveWatchlist();
    if (selectedSymbol === symbol) { selectedSymbol = null; document.getElementById('chartArea').style.display = 'none'; document.getElementById('statsPanel').style.display = 'none'; }
    renderWatchlist(); updateEmptyState(); updateTradeSelect();
  }

  async function selectStock(symbol) {
    selectedSymbol = symbol;
    document.querySelectorAll('.stock-card').forEach(c => c.classList.remove('selected'));
    const card = document.querySelector(`[data-symbol="${symbol}"]`);
    if (card) card.classList.add('selected');
    document.getElementById('chartSymbolDisplay').textContent = symbol;
    document.getElementById('chartArea').style.display = 'block';
    document.getElementById('statsPanel').style.display = 'grid';
    document.getElementById('emptyState').style.display = 'none';
    fetchKeyStats(symbol).then(stats => {
      if (!stats) return;
      document.getElementById('statPrice').textContent = stats.price;
      document.getElementById('statPrevClose').textContent = stats.prevClose;
      document.getElementById('stat52H').textContent = stats.fiftyTwoWeekHigh;
      document.getElementById('stat52L').textContent = stats.fiftyTwoWeekLow;
      document.getElementById('statAvgVol').textContent = stats.avgVolume;
      document.getElementById('statDayHigh').textContent = stats.dayHigh;
      document.getElementById('statDayLow').textContent = stats.dayLow;
      document.getElementById('statDayVol').textContent = stats.dayVolume;
    });
    if (comparisonSymbol) comparisonData = await fetchChartData(comparisonSymbol, currentTimeframe);
    await loadChart(symbol, currentTimeframe);
  }

  async function loadChart(symbol, range) {
    currentChartData = await fetchChartData(symbol, range);
    if (comparisonSymbol) comparisonData = await fetchChartData(comparisonSymbol, range);
    if (currentChartData.length) drawChart();
  }

  function renderWatchlist() {
    const grid = document.getElementById('watchlistGrid');
    grid.innerHTML = '';
    watchlist.forEach(stock => {
      const isUp = stock.change >= 0;
      const card = document.createElement('div');
      card.className = `stock-card${selectedSymbol === stock.symbol ? ' selected' : ''}`;
      card.setAttribute('data-symbol', stock.symbol);
      card.onclick = () => selectStock(stock.symbol);
      card.innerHTML = `
        <div class="stock-card-header">
          <div><div class="stock-symbol">${stock.symbol}</div><div class="stock-name">${stock.name}</div></div>
          <button class="stock-remove" onclick="removeStock('${stock.symbol}',event)" title="Remove">‚úï</button>
        </div>
        <div class="stock-price" style="color:${isUp ? 'var(--bull)' : 'var(--bear)'}">${stock.price.toFixed(2)}</div>
        <div class="stock-change ${isUp ? 'up' : 'down'}">${isUp ? '‚ñ≤' : '‚ñº'} ${Math.abs(stock.change).toFixed(2)} (${Math.abs(stock.changePct).toFixed(2)}%)</div>
        <div class="stock-meta">
          <div class="stock-meta-item">H <span>${stock.high.toFixed(2)}</span></div>
          <div class="stock-meta-item">L <span>${stock.low.toFixed(2)}</span></div>
          <div class="stock-meta-item">Vol <span>${formatVolume(stock.volume)}</span></div>
        </div>`;
      grid.appendChild(card);
    });
    updateEmptyState(); updateTradeSelect();
  }

  function updateEmptyState() {
    document.getElementById('emptyState').style.display = watchlist.length ? 'none' : 'block';
  }
  function formatVolume(v) {
    if (v >= 1e9) return (v/1e9).toFixed(1) + 'B';
    if (v >= 1e6) return (v/1e6).toFixed(1) + 'M';
    if (v >= 1e3) return (v/1e3).toFixed(1) + 'K';
    return v.toString();
  }
  function setTimeframe(tf, btn) {
    currentTimeframe = tf;
    document.querySelectorAll('.tf-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    if (currentInterval === 'auto') updateIntervalHint();
    if (selectedSymbol) loadChart(selectedSymbol, tf);
  }
  function setChartInterval(val) {
    currentInterval = val;
    if (selectedSymbol) loadChart(selectedSymbol, currentTimeframe);
  }
  function updateIntervalHint() {
    const autoMap = { '1D':'5m', '1W':'15m', '1M':'1d', '3M':'1d', '6M':'1d', '1Y':'1wk' };
    const sel = document.getElementById('intervalSelect');
    sel.options[0].textContent = 'Auto (' + (autoMap[currentTimeframe] || '1d') + ')';
  }
  function setChartType(type, btn) {
    currentChartType = type;
    document.querySelectorAll('.ct-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    if (currentChartData.length) drawChart();
  }
  function toggleIndicator(ind, btn) {
    if (activeIndicators.has(ind)) { activeIndicators.delete(ind); btn.classList.remove('active'); }
    else { activeIndicators.add(ind); btn.classList.add('active'); }
    document.getElementById('rsiPanel').style.display = activeIndicators.has('rsi') ? 'block' : 'none';
    document.getElementById('macdPanel').style.display = activeIndicators.has('macd') ? 'block' : 'none';
    if (currentChartData.length) drawChart();
  }

  // ===== COMPARISON =====
  async function addComparison() {
    const input = document.getElementById('compareInput');
    const sym = input.value.trim().toUpperCase();
    if (!sym || sym === selectedSymbol) { input.value = ''; return; }
    input.value = '';
    comparisonSymbol = sym;
    comparisonData = await fetchChartData(sym, currentTimeframe);
    renderCompareTags();
    if (currentChartData.length) drawChart();
  }
  function removeComparison() {
    comparisonSymbol = null; comparisonData = [];
    renderCompareTags();
    if (currentChartData.length) drawChart();
  }
  function renderCompareTags() {
    const el = document.getElementById('compareTags');
    if (!comparisonSymbol) { el.innerHTML = ''; return; }
    el.innerHTML = `<span class="compare-tag">${comparisonSymbol} <button onclick="removeComparison()">‚úï</button></span>`;
  }

  // ===== DRAWING TOOLS =====
  function setDrawingMode(mode, btn) {
    if (drawingMode === mode) { drawingMode = null; btn.classList.remove('active'); document.getElementById('mainChart').style.cursor = ''; return; }
    drawingMode = mode; drawingStart = null;
    document.querySelectorAll('.draw-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById('mainChart').style.cursor = 'crosshair';
  }
  function clearDrawings() {
    drawings = []; drawingMode = null; drawingStart = null;
    document.querySelectorAll('.draw-btn').forEach(b => b.classList.remove('active'));
    document.getElementById('mainChart').style.cursor = '';
    localStorage.setItem('trading-drawings', '[]');
    if (currentChartData.length) drawChart();
  }
  function saveDrawings() { localStorage.setItem('trading-drawings', JSON.stringify(drawings)); }
</script>
<script>
  // ===== INDICATOR CALCULATIONS =====
  function calcSMA(data, period) {
    const sma = [];
    for (let i = 0; i < data.length; i++) {
      if (i < period - 1) { sma.push(null); continue; }
      let sum = 0;
      for (let j = i - period + 1; j <= i; j++) sum += data[j].close;
      sma.push(sum / period);
    }
    return sma;
  }
  function calcEMA(data, period) {
    const ema = []; const k = 2 / (period + 1);
    for (let i = 0; i < data.length; i++) {
      if (i === 0) { ema.push(data[i].close); continue; }
      ema.push(data[i].close * k + ema[i-1] * (1 - k));
    }
    return ema;
  }
  function calcEMAFromValues(values, period) {
    const ema = []; const k = 2 / (period + 1);
    for (let i = 0; i < values.length; i++) {
      if (values[i] === null) { ema.push(null); continue; }
      if (ema.length === 0 || ema.every(v => v === null)) { ema.push(values[i]); continue; }
      const prev = ema[i-1] !== null ? ema[i-1] : values[i];
      ema.push(values[i] * k + prev * (1 - k));
    }
    return ema;
  }
  function calcRSI(data, period) {
    const rsi = [];
    if (data.length < period + 1) return data.map(() => null);
    let avgGain = 0, avgLoss = 0;
    for (let i = 1; i <= period; i++) {
      const diff = data[i].close - data[i-1].close;
      if (diff > 0) avgGain += diff; else avgLoss += Math.abs(diff);
    }
    avgGain /= period; avgLoss /= period;
    for (let i = 0; i < period; i++) rsi.push(null);
    rsi.push(avgLoss === 0 ? 100 : 100 - 100 / (1 + avgGain / avgLoss));
    for (let i = period + 1; i < data.length; i++) {
      const diff = data[i].close - data[i-1].close;
      const gain = diff > 0 ? diff : 0;
      const loss = diff < 0 ? Math.abs(diff) : 0;
      avgGain = (avgGain * (period - 1) + gain) / period;
      avgLoss = (avgLoss * (period - 1) + loss) / period;
      rsi.push(avgLoss === 0 ? 100 : 100 - 100 / (1 + avgGain / avgLoss));
    }
    return rsi;
  }
  function calcMACD(data) {
    const ema12 = calcEMA(data, 12);
    const ema26 = calcEMA(data, 26);
    const macdLine = [];
    for (let i = 0; i < data.length; i++) {
      macdLine.push(ema12[i] - ema26[i]);
    }
    const signalLine = calcEMAFromValues(macdLine, 9);
    const histogram = [];
    for (let i = 0; i < data.length; i++) {
      histogram.push(macdLine[i] !== null && signalLine[i] !== null ? macdLine[i] - signalLine[i] : null);
    }
    return { macdLine, signalLine, histogram };
  }

  // ===== CHART DRAWING ENGINE =====
  function drawChart() {
    const canvas = document.getElementById('mainChart');
    const ctx = canvas.getContext('2d');
    const volCanvas = document.getElementById('volumeChart');
    const volCtx = volCanvas.getContext('2d');
    const dpr = window.devicePixelRatio || 1;
    const rect = canvas.parentElement.getBoundingClientRect();
    const cW = rect.width - 48;

    canvas.width = cW * dpr; canvas.height = 420 * dpr;
    canvas.style.width = cW + 'px'; canvas.style.height = '420px';
    volCanvas.width = cW * dpr; volCanvas.height = 100 * dpr;
    volCanvas.style.width = cW + 'px'; volCanvas.style.height = '100px';
    ctx.scale(dpr, dpr); volCtx.scale(dpr, dpr);

    const W = cW, H = 420, VH = 100;
    const data = currentChartData;
    if (!data.length) return;

    const isLight = document.documentElement.getAttribute('data-theme') === 'light';
    const colors = {
      bg: isLight ? '#ffffff' : '#0a0a0a',
      grid: isLight ? 'rgba(0,0,0,0.06)' : 'rgba(255,255,255,0.06)',
      text: isLight ? '#71717a' : '#71717a',
      bull: '#22c55e', bear: '#ef4444',
      bullVol: 'rgba(34,197,94,0.4)', bearVol: 'rgba(239,68,68,0.4)',
      line: '#10b981',
      sma20: '#f59e0b', sma50: '#8b5cf6', sma200: isLight ? '#374151' : '#e5e7eb', ema9: '#06b6d4',
      bbUpper: 'rgba(168,85,247,0.4)', bbLower: 'rgba(168,85,247,0.4)', bbFill: 'rgba(168,85,247,0.05)',
      vwap: '#ec4899', compare: '#a855f7',
      rsi: '#f59e0b', macdLine: '#3b82f6', macdSignal: '#f97316', macdHistPos: 'rgba(34,197,94,0.6)', macdHistNeg: 'rgba(239,68,68,0.6)',
      drawing: '#fbbf24'
    };

    const padding = { top: 20, bottom: 30, left: 10, right: 70 };
    let minPrice = Infinity, maxPrice = -Infinity, maxVol = 0;
    data.forEach(d => {
      if (d.low < minPrice) minPrice = d.low;
      if (d.high > maxPrice) maxPrice = d.high;
      if (d.volume > maxVol) maxVol = d.volume;
    });
    const pricePad = (maxPrice - minPrice) * 0.08;
    minPrice -= pricePad; maxPrice += pricePad;

    const chartW = W - padding.left - padding.right;
    const chartH = H - padding.top - padding.bottom;
    const candleW = Math.max(1, Math.min(12, (chartW / data.length) * 0.7));
    const gap = chartW / data.length;

    function priceToY(p) { return padding.top + chartH * (1 - (p - minPrice) / (maxPrice - minPrice)); }
    function xForIndex(i) { return padding.left + gap * i + gap / 2; }

    // Store layout for crosshair & drawing tools
    chartLayout = { W, H, VH, padding, minPrice, maxPrice, chartW, chartH, gap, candleW, data, xForIndex, priceToY };

    ctx.clearRect(0, 0, W, H);
    volCtx.clearRect(0, 0, W, VH);

    // Grid
    ctx.strokeStyle = colors.grid; ctx.lineWidth = 0.5;
    const gridLines = 6;
    for (let i = 0; i <= gridLines; i++) {
      const y = padding.top + (chartH / gridLines) * i;
      ctx.beginPath(); ctx.moveTo(padding.left, y); ctx.lineTo(W - padding.right, y); ctx.stroke();
      const price = maxPrice - ((maxPrice - minPrice) / gridLines) * i;
      ctx.fillStyle = colors.text; ctx.font = '11px Inter, sans-serif'; ctx.textAlign = 'left';
      ctx.fillText('$' + price.toFixed(2), W - padding.right + 8, y + 4);
    }
    volCtx.strokeStyle = colors.grid; volCtx.lineWidth = 0.5;
    volCtx.beginPath(); volCtx.moveTo(padding.left, 0); volCtx.lineTo(W - padding.right, 0); volCtx.stroke();

    // X-axis date labels ‚Äî adapt format to actual data time span (use UTC to avoid timezone day-shift)
    const xLabelCount = Math.min(8, data.length);
    const xStep = Math.max(1, Math.floor(data.length / xLabelCount));
    ctx.fillStyle = colors.text; ctx.font = '10px Inter, sans-serif'; ctx.textAlign = 'center';
    const dataSpanMs = data[data.length-1].time - data[0].time;
    const dataSpanDays = dataSpanMs / 86400000;
    const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
    const weekdays = ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
    let prevLabel = '';
    for (let i = 0; i < data.length; i += xStep) {
      const x = xForIndex(i);
      const d = new Date(data[i].time);
      let label;
      if (dataSpanDays <= 1) {
        label = d.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
      } else if (dataSpanDays <= 10) {
        label = weekdays[d.getUTCDay()] + ' ' + d.getUTCDate();
      } else if (dataSpanDays <= 120) {
        label = months[d.getUTCMonth()] + ' ' + d.getUTCDate();
      } else {
        label = months[d.getUTCMonth()] + " '" + String(d.getUTCFullYear()).slice(-2);
      }
      if (label === prevLabel) continue;
      prevLabel = label;
      ctx.fillText(label, x, H - padding.bottom + 16);
      ctx.strokeStyle = colors.grid; ctx.lineWidth = 0.3;
      ctx.beginPath(); ctx.moveTo(x, padding.top); ctx.lineTo(x, H - padding.bottom); ctx.stroke();
    }

    function drawLine(values, color, lineWidth) {
      ctx.strokeStyle = color; ctx.lineWidth = lineWidth || 1.5;
      ctx.beginPath(); let started = false;
      for (let i = 0; i < values.length; i++) {
        if (values[i] === null) continue;
        const x = xForIndex(i), y = priceToY(values[i]);
        if (!started) { ctx.moveTo(x, y); started = true; } else ctx.lineTo(x, y);
      }
      ctx.stroke();
    }

    // Bollinger Bands
    if (activeIndicators.has('bb')) {
      const sma = calcSMA(data, 20);
      const upper = [], lower = [];
      for (let i = 0; i < data.length; i++) {
        if (sma[i] === null) { upper.push(null); lower.push(null); continue; }
        let sumSq = 0;
        for (let j = i - 19; j <= i; j++) sumSq += Math.pow(data[j].close - sma[i], 2);
        const std = Math.sqrt(sumSq / 20);
        upper.push(sma[i] + 2 * std); lower.push(sma[i] - 2 * std);
      }
      ctx.fillStyle = colors.bbFill; ctx.beginPath(); let started = false;
      for (let i = 0; i < upper.length; i++) {
        if (upper[i] === null) continue;
        const x = xForIndex(i);
        if (!started) { ctx.moveTo(x, priceToY(upper[i])); started = true; } else ctx.lineTo(x, priceToY(upper[i]));
      }
      for (let i = lower.length - 1; i >= 0; i--) { if (lower[i] === null) continue; ctx.lineTo(xForIndex(i), priceToY(lower[i])); }
      ctx.closePath(); ctx.fill();
      drawLine(upper, colors.bbUpper, 1); drawLine(lower, colors.bbLower, 1); drawLine(sma, colors.sma20, 1);
    }

    if (activeIndicators.has('sma20') && !activeIndicators.has('bb')) drawLine(calcSMA(data, 20), colors.sma20);
    if (activeIndicators.has('sma50')) drawLine(calcSMA(data, 50), colors.sma50);
    if (activeIndicators.has('sma200')) drawLine(calcSMA(data, 200), colors.sma200, 2);
    if (activeIndicators.has('ema9')) drawLine(calcEMA(data, 9), colors.ema9);
    if (activeIndicators.has('vwap')) {
      const vwap = []; let cumVol = 0, cumTP = 0;
      for (let i = 0; i < data.length; i++) {
        const tp = (data[i].high + data[i].low + data[i].close) / 3;
        cumTP += tp * data[i].volume; cumVol += data[i].volume;
        vwap.push(cumVol > 0 ? cumTP / cumVol : null);
      }
      drawLine(vwap, colors.vwap);
    }

    // Comparison overlay (normalized %)
    if (comparisonSymbol && comparisonData.length > 1 && data.length > 1) {
      const baseStart = data[0].close;
      const compStart = comparisonData[0].close;
      const len = Math.min(data.length, comparisonData.length);
      ctx.strokeStyle = colors.compare; ctx.lineWidth = 2; ctx.setLineDash([4, 3]);
      ctx.beginPath();
      for (let i = 0; i < len; i++) {
        const mainPct = ((data[i].close - baseStart) / baseStart);
        const compPct = ((comparisonData[i].close - compStart) / compStart);
        const normalizedPrice = baseStart * (1 + compPct);
        const x = xForIndex(i), y = priceToY(normalizedPrice);
        i === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y);
      }
      ctx.stroke(); ctx.setLineDash([]);
      // Label
      ctx.fillStyle = colors.compare; ctx.font = 'bold 11px Inter, sans-serif'; ctx.textAlign = 'left';
      const lastComp = comparisonData[len-1];
      const compPctFinal = ((lastComp.close - compStart) / compStart * 100).toFixed(1);
      const normalizedEnd = baseStart * (1 + (lastComp.close - compStart) / compStart);
      ctx.fillText(comparisonSymbol + ' ' + (compPctFinal >= 0 ? '+' : '') + compPctFinal + '%', xForIndex(len-1) + 6, priceToY(normalizedEnd));
    }

    // Draw candles / line / OHLC
    if (currentChartType === 'candle') {
      data.forEach((d, i) => {
        const x = xForIndex(i), isBull = d.close >= d.open, color = isBull ? colors.bull : colors.bear;
        ctx.strokeStyle = color; ctx.lineWidth = 1;
        ctx.beginPath(); ctx.moveTo(x, priceToY(d.high)); ctx.lineTo(x, priceToY(d.low)); ctx.stroke();
        const bodyTop = priceToY(Math.max(d.open, d.close)), bodyBot = priceToY(Math.min(d.open, d.close));
        const bodyH = Math.max(1, bodyBot - bodyTop);
        if (isBull) { ctx.strokeStyle = color; ctx.lineWidth = 1; ctx.strokeRect(x - candleW/2, bodyTop, candleW, bodyH); }
        else { ctx.fillStyle = color; ctx.fillRect(x - candleW/2, bodyTop, candleW, bodyH); }
      });
    } else if (currentChartType === 'line') {
      ctx.strokeStyle = colors.line; ctx.lineWidth = 2; ctx.beginPath();
      data.forEach((d, i) => { const x = xForIndex(i), y = priceToY(d.close); i === 0 ? ctx.moveTo(x, y) : ctx.lineTo(x, y); });
      ctx.stroke();
      const lastX = xForIndex(data.length - 1);
      ctx.lineTo(lastX, H - padding.bottom); ctx.lineTo(xForIndex(0), H - padding.bottom); ctx.closePath();
      const grad = ctx.createLinearGradient(0, padding.top, 0, H - padding.bottom);
      grad.addColorStop(0, 'rgba(16,185,129,0.15)'); grad.addColorStop(1, 'rgba(16,185,129,0)');
      ctx.fillStyle = grad; ctx.fill();
    } else if (currentChartType === 'ohlc') {
      data.forEach((d, i) => {
        const x = xForIndex(i), isBull = d.close >= d.open, color = isBull ? colors.bull : colors.bear;
        ctx.strokeStyle = color; ctx.lineWidth = 1.5;
        ctx.beginPath(); ctx.moveTo(x, priceToY(d.high)); ctx.lineTo(x, priceToY(d.low)); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(x - candleW/2, priceToY(d.open)); ctx.lineTo(x, priceToY(d.open)); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(x, priceToY(d.close)); ctx.lineTo(x + candleW/2, priceToY(d.close)); ctx.stroke();
      });
    }

    // Drawings (trendlines & horizontal lines)
    drawings.forEach(dr => {
      ctx.strokeStyle = colors.drawing; ctx.lineWidth = 1.5; ctx.setLineDash([6, 3]);
      if (dr.type === 'hline') {
        const y = priceToY(dr.price);
        ctx.beginPath(); ctx.moveTo(padding.left, y); ctx.lineTo(W - padding.right, y); ctx.stroke();
        ctx.fillStyle = colors.drawing; ctx.font = '10px Inter, sans-serif'; ctx.textAlign = 'right';
        ctx.fillText('$' + dr.price.toFixed(2), W - padding.right - 4, y - 4);
      } else if (dr.type === 'trendline') {
        if (dr.idx1 !== undefined) {
          // Data-coordinate trendlines (new format)
          ctx.beginPath(); ctx.moveTo(xForIndex(dr.idx1), priceToY(dr.price1)); ctx.lineTo(xForIndex(dr.idx2), priceToY(dr.price2)); ctx.stroke();
        } else {
          // Legacy pixel-coordinate trendlines (old format)
          ctx.beginPath(); ctx.moveTo(dr.x1, dr.y1); ctx.lineTo(dr.x2, dr.y2); ctx.stroke();
        }
      }
      ctx.setLineDash([]);
    });

    // Volume bars
    data.forEach((d, i) => {
      const x = xForIndex(i), isBull = d.close >= d.open;
      const barH = VH * (d.volume / (maxVol * 1.1));
      volCtx.fillStyle = isBull ? colors.bullVol : colors.bearVol;
      volCtx.fillRect(x - candleW/2, VH - barH, candleW, barH);
    });
    volCtx.fillStyle = colors.text; volCtx.font = '10px Inter, sans-serif'; volCtx.textAlign = 'left';
    volCtx.fillText('Volume', padding.left, 14);

    // RSI panel
    if (activeIndicators.has('rsi')) drawRSI(data, colors);
    // MACD panel
    if (activeIndicators.has('macd')) drawMACD(data, colors);

    // Setup crosshair & drawing event handlers
    setupChartInteraction(canvas, ctx, colors);
  }
</script>
<script>
  // ===== RSI PANEL =====
  function drawRSI(data, colors) {
    const rsiCanvas = document.getElementById('rsiChart');
    const rCtx = rsiCanvas.getContext('2d');
    const dpr = window.devicePixelRatio || 1;
    const rect = rsiCanvas.parentElement.getBoundingClientRect();
    const cW = rect.width - 32;
    rsiCanvas.width = cW * dpr; rsiCanvas.height = 100 * dpr;
    rsiCanvas.style.width = cW + 'px'; rsiCanvas.style.height = '100px';
    rCtx.scale(dpr, dpr);
    const W = cW, H = 100;
    const pad = { top: 18, bottom: 5, left: chartLayout.padding.left, right: chartLayout.padding.right };
    const rsiValues = calcRSI(data, 14);
    rCtx.clearRect(0, 0, W, H);

    function rsiToY(v) { return pad.top + (H - pad.top - pad.bottom) * (1 - v / 100); }
    const gap = (W - pad.left - pad.right) / data.length;
    function xI(i) { return pad.left + gap * i + gap / 2; }

    // Overbought/oversold zones
    rCtx.fillStyle = 'rgba(239,68,68,0.06)';
    rCtx.fillRect(pad.left, rsiToY(100), W - pad.left - pad.right, rsiToY(70) - rsiToY(100));
    rCtx.fillStyle = 'rgba(34,197,94,0.06)';
    rCtx.fillRect(pad.left, rsiToY(30), W - pad.left - pad.right, rsiToY(0) - rsiToY(30));

    // Grid lines at 30, 50, 70
    rCtx.strokeStyle = colors.grid; rCtx.lineWidth = 0.5;
    [30, 50, 70].forEach(v => {
      const y = rsiToY(v);
      rCtx.beginPath(); rCtx.moveTo(pad.left, y); rCtx.lineTo(W - pad.right, y); rCtx.stroke();
      rCtx.fillStyle = colors.text; rCtx.font = '9px Inter, sans-serif'; rCtx.textAlign = 'left';
      rCtx.fillText(v, W - pad.right + 4, y + 3);
    });

    // RSI line
    rCtx.strokeStyle = colors.rsi; rCtx.lineWidth = 1.5; rCtx.beginPath();
    let started = false;
    for (let i = 0; i < rsiValues.length; i++) {
      if (rsiValues[i] === null) continue;
      const x = xI(i), y = rsiToY(rsiValues[i]);
      if (!started) { rCtx.moveTo(x, y); started = true; } else rCtx.lineTo(x, y);
    }
    rCtx.stroke();
  }

  // ===== MACD PANEL =====
  function drawMACD(data, colors) {
    const macdCanvas = document.getElementById('macdChart');
    const mCtx = macdCanvas.getContext('2d');
    const dpr = window.devicePixelRatio || 1;
    const rect = macdCanvas.parentElement.getBoundingClientRect();
    const cW = rect.width - 32;
    macdCanvas.width = cW * dpr; macdCanvas.height = 120 * dpr;
    macdCanvas.style.width = cW + 'px'; macdCanvas.style.height = '120px';
    mCtx.scale(dpr, dpr);
    const W = cW, H = 120;
    const pad = { top: 18, bottom: 5, left: chartLayout.padding.left, right: chartLayout.padding.right };
    const { macdLine, signalLine, histogram } = calcMACD(data);
    mCtx.clearRect(0, 0, W, H);

    // Find range
    let minV = Infinity, maxV = -Infinity;
    for (let i = 25; i < data.length; i++) {
      const vals = [macdLine[i], signalLine[i], histogram[i]].filter(v => v !== null);
      vals.forEach(v => { if (v < minV) minV = v; if (v > maxV) maxV = v; });
    }
    if (minV === Infinity) return;
    const range = maxV - minV || 1;
    const vPad = range * 0.1; minV -= vPad; maxV += vPad;

    function macdToY(v) { return pad.top + (H - pad.top - pad.bottom) * (1 - (v - minV) / (maxV - minV)); }
    const gap = (W - pad.left - pad.right) / data.length;
    function xI(i) { return pad.left + gap * i + gap / 2; }

    // Zero line
    const zeroY = macdToY(0);
    mCtx.strokeStyle = colors.grid; mCtx.lineWidth = 0.5;
    mCtx.beginPath(); mCtx.moveTo(pad.left, zeroY); mCtx.lineTo(W - pad.right, zeroY); mCtx.stroke();
    mCtx.fillStyle = colors.text; mCtx.font = '9px Inter, sans-serif'; mCtx.textAlign = 'left';
    mCtx.fillText('0', W - pad.right + 4, zeroY + 3);

    // Histogram
    const barW = Math.max(1, gap * 0.6);
    for (let i = 0; i < histogram.length; i++) {
      if (histogram[i] === null) continue;
      const x = xI(i), y = macdToY(histogram[i]);
      mCtx.fillStyle = histogram[i] >= 0 ? colors.macdHistPos : colors.macdHistNeg;
      mCtx.fillRect(x - barW/2, Math.min(y, zeroY), barW, Math.abs(y - zeroY));
    }

    // MACD line
    mCtx.strokeStyle = colors.macdLine; mCtx.lineWidth = 1.5; mCtx.beginPath();
    let started = false;
    for (let i = 0; i < macdLine.length; i++) {
      if (macdLine[i] === null || i < 25) continue;
      const x = xI(i), y = macdToY(macdLine[i]);
      if (!started) { mCtx.moveTo(x, y); started = true; } else mCtx.lineTo(x, y);
    }
    mCtx.stroke();

    // Signal line
    mCtx.strokeStyle = colors.macdSignal; mCtx.lineWidth = 1.5; mCtx.beginPath();
    started = false;
    for (let i = 0; i < signalLine.length; i++) {
      if (signalLine[i] === null || i < 25) continue;
      const x = xI(i), y = macdToY(signalLine[i]);
      if (!started) { mCtx.moveTo(x, y); started = true; } else mCtx.lineTo(x, y);
    }
    mCtx.stroke();
  }

  // ===== CROSSHAIR & DRAWING INTERACTION =====
  function setupChartInteraction(canvas, ctx, colors) {
    const tooltip = document.getElementById('chartTooltip');

    canvas.onmousemove = function(e) {
      const r = canvas.getBoundingClientRect();
      const mx = e.clientX - r.left;
      const my = e.clientY - r.top;
      const { data, gap, padding, W, H, priceToY, xForIndex, minPrice, maxPrice, chartH } = chartLayout;

      // Find nearest candle
      const idx = Math.round((mx - padding.left - gap / 2) / gap);
      if (idx < 0 || idx >= data.length) { tooltip.style.display = 'none'; return; }
      const d = data[idx];
      const x = xForIndex(idx);

      // Draw crosshair overlay (we redraw chart then overlay ‚Äî simpler approach: just show tooltip)
      tooltip.style.display = 'block';
      const date = new Date(d.time);
      const mo = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
      const dateStr = mo[date.getUTCMonth()] + ' ' + date.getUTCDate() + ', ' + date.getUTCFullYear();
      const timeStr = currentTimeframe === '1D' || currentTimeframe === '1W' ? ' ' + date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' }) : '';
      tooltip.innerHTML = `
        <div class="tt-date">${dateStr}${timeStr}</div>
        <div class="tt-row"><span class="tt-label">O</span><span class="tt-val">${d.open.toFixed(2)}</span></div>
        <div class="tt-row"><span class="tt-label">H</span><span class="tt-val">${d.high.toFixed(2)}</span></div>
        <div class="tt-row"><span class="tt-label">L</span><span class="tt-val">${d.low.toFixed(2)}</span></div>
        <div class="tt-row"><span class="tt-label">C</span><span class="tt-val" style="color:${d.close >= d.open ? 'var(--bull)' : 'var(--bear)'}">${d.close.toFixed(2)}</span></div>
        <div class="tt-row"><span class="tt-label">Vol</span><span class="tt-val">${formatVolume(d.volume)}</span></div>`;

      // Position tooltip
      let tx = e.clientX - r.left + 16;
      let ty = e.clientY - r.top - 40;
      if (tx + 180 > W) tx = e.clientX - r.left - 180;
      if (ty < 0) ty = 10;
      tooltip.style.left = tx + 'px';
      tooltip.style.top = ty + 'px';
    };

    canvas.onmouseleave = function() { tooltip.style.display = 'none'; };

    canvas.onclick = function(e) {
      if (!drawingMode) return;
      const r = canvas.getBoundingClientRect();
      const mx = e.clientX - r.left;
      const my = e.clientY - r.top;
      const { padding, minPrice, maxPrice, chartH, data, gap } = chartLayout;

      if (drawingMode === 'hline') {
        const price = maxPrice - (my - padding.top) / chartH * (maxPrice - minPrice);
        drawings.push({ type: 'hline', price });
        saveDrawings(); drawChart();
        drawingMode = null;
        document.querySelectorAll('.draw-btn').forEach(b => b.classList.remove('active'));
        canvas.style.cursor = '';
      } else if (drawingMode === 'trendline') {
        const idx = Math.round((mx - padding.left - gap / 2) / gap);
        const price = maxPrice - (my - padding.top) / chartH * (maxPrice - minPrice);
        const clampedIdx = Math.max(0, Math.min(idx, data.length - 1));
        if (!drawingStart) {
          drawingStart = { idx: clampedIdx, price };
        } else {
          drawings.push({ type: 'trendline', idx1: drawingStart.idx, price1: drawingStart.price, idx2: clampedIdx, price2: price });
          drawingStart = null;
          saveDrawings(); drawChart();
          drawingMode = null;
          document.querySelectorAll('.draw-btn').forEach(b => b.classList.remove('active'));
          canvas.style.cursor = '';
        }
      }
    };
  }
</script>
<script>
  // ===== PAPER TRADING =====
  function updateTradeSelect() {
    const sel = document.getElementById('tradeSymbolSelect');
    const current = sel.value;
    sel.innerHTML = '<option value="">Select...</option>';
    watchlist.forEach(s => {
      const opt = document.createElement('option');
      opt.value = s.symbol; opt.textContent = s.symbol + ' ($' + s.price.toFixed(2) + ')';
      sel.appendChild(opt);
    });
    if (current && watchlist.find(s => s.symbol === current)) sel.value = current;
    updateOptSymbolSelect();
  }

  function getStockPrice(symbol) {
    const s = watchlist.find(w => w.symbol === symbol);
    return s ? s.price : 0;
  }

  function paperBuy() {
    const symbol = document.getElementById('tradeSymbolSelect').value;
    const shares = parseInt(document.getElementById('tradeShares').value) || 0;
    if (!symbol || shares <= 0) { alert('Select a stock and enter shares.'); return; }
    const price = getStockPrice(symbol);
    if (price <= 0) { alert('Price not available.'); return; }
    const cost = price * shares;
    if (cost > paperPortfolio.cash) { alert('Insufficient funds. You need $' + cost.toFixed(2) + ' but have $' + paperPortfolio.cash.toFixed(2)); return; }
    paperPortfolio.cash -= cost;
    const existing = paperPortfolio.positions.find(p => p.symbol === symbol);
    if (existing) {
      existing.avgPrice = (existing.avgPrice * existing.shares + price * shares) / (existing.shares + shares);
      existing.shares += shares;
    } else {
      paperPortfolio.positions.push({ symbol, shares, avgPrice: price });
    }
    paperPortfolio.history.unshift({ type: 'BUY', symbol, shares, price, time: Date.now() });
    savePaper(); renderPaperTrading();
  }

  function paperSell() {
    const symbol = document.getElementById('tradeSymbolSelect').value;
    const shares = parseInt(document.getElementById('tradeShares').value) || 0;
    if (!symbol || shares <= 0) { alert('Select a stock and enter shares.'); return; }
    const pos = paperPortfolio.positions.find(p => p.symbol === symbol);
    if (!pos || pos.shares < shares) { alert('You don\'t own enough shares of ' + symbol + '.'); return; }
    const price = getStockPrice(symbol);
    if (price <= 0) { alert('Price not available.'); return; }
    paperPortfolio.cash += price * shares;
    pos.shares -= shares;
    if (pos.shares === 0) paperPortfolio.positions = paperPortfolio.positions.filter(p => p.symbol !== symbol);
    paperPortfolio.history.unshift({ type: 'SELL', symbol, shares, price, time: Date.now() });
    savePaper(); renderPaperTrading();
  }

  function resetPaperTrading() {
    if (!confirm('Reset paper trading? This will clear all positions and history (stocks + options).')) return;
    paperPortfolio = { cash: 100000, positions: [], history: [], optionPositions: [], optionHistory: [] };
    savePaper(); renderPaperTrading();
  }

  function renderPaperTrading() {
    // Balance ‚Äî include both stock and option positions
    let totalValue = paperPortfolio.cash;
    let totalPnl = 0;
    paperPortfolio.positions.forEach(p => {
      const currentPrice = getStockPrice(p.symbol);
      totalValue += currentPrice * p.shares;
      totalPnl += (currentPrice - p.avgPrice) * p.shares;
    });
    paperPortfolio.optionPositions.forEach(pos => {
      const S = getStockPrice(pos.symbol);
      const elapsed = (Date.now() - pos.openedAt) / 86400000;
      const remainingDTE = Math.max(0, pos.dte - elapsed);
      const T = remainingDTE / 365;
      const iv = estimateIV(pos.symbol);
      const curPrem = bsPrice(S, pos.strike, T, 0.05, iv, pos.type);
      const posValue = curPrem * 100 * pos.contracts;
      if (pos.action === 'long') {
        totalValue += posValue;
        totalPnl += (curPrem - pos.entryPremium) * 100 * pos.contracts;
      } else {
        totalValue += (pos.marginHeld || 0) - posValue;
        totalPnl += (pos.entryPremium - curPrem) * 100 * pos.contracts;
      }
    });
    document.getElementById('paperBalance').textContent = totalValue.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
    const pnlEl = document.getElementById('totalPnl');
    pnlEl.textContent = (totalPnl >= 0 ? '+' : '') + '$' + totalPnl.toFixed(2);
    pnlEl.style.color = totalPnl >= 0 ? 'var(--bull)' : 'var(--bear)';

    if (activePaperTab === 'options') {
      document.getElementById('positionsTitle').textContent = 'Open Option Positions';
      renderOptionPositions();
      renderOptionHistory();
      return;
    }
    document.getElementById('positionsTitle').textContent = 'Open Positions';

    // Open stock positions
    const posEl = document.getElementById('openPositions');
    if (paperPortfolio.positions.length === 0) {
      posEl.innerHTML = '<div style="font-size:13px;color:var(--text-muted);padding:8px 0;">No open positions</div>';
    } else {
      posEl.innerHTML = paperPortfolio.positions.map(p => {
        const currentPrice = getStockPrice(p.symbol);
        const pnl = (currentPrice - p.avgPrice) * p.shares;
        const pnlPct = ((currentPrice - p.avgPrice) / p.avgPrice * 100).toFixed(1);
        const isPos = pnl >= 0;
        return `<div class="position-row">
          <div><span class="position-symbol">${p.symbol}</span> <span class="position-detail">${p.shares} @ $${p.avgPrice.toFixed(2)}</span></div>
          <div class="position-pnl ${isPos ? 'pnl-positive' : 'pnl-negative'}">${isPos ? '+' : ''}$${pnl.toFixed(2)} (${isPos ? '+' : ''}${pnlPct}%)</div>
        </div>`;
      }).join('');
    }

    // Stock trade history (last 20)
    const histEl = document.getElementById('tradeHistory');
    const recent = paperPortfolio.history.slice(0, 20);
    if (recent.length === 0) {
      histEl.innerHTML = '<div style="font-size:13px;color:var(--text-muted);padding:8px 0;">No trades yet</div>';
    } else {
      histEl.innerHTML = recent.map(t => {
        const d = new Date(t.time);
        const dateStr = d.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }) + ' ' + d.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
        return `<div class="trade-history-row">
          <span class="trade-type-${t.type.toLowerCase()}">${t.type}</span>
          <span>${t.symbol} √ó ${t.shares}</span>
          <span style="color:var(--text-muted);">$${t.price.toFixed(2)}</span>
          <span style="color:var(--text-muted);font-size:11px;">${dateStr}</span>
        </div>`;
      }).join('');
    }
  }

  // ===== OPTIONS PAPER TRADING =====
  let activePaperTab = 'stocks';

  function switchPaperTab(tab) {
    activePaperTab = tab;
    document.getElementById('tabStocks').classList.toggle('active', tab === 'stocks');
    document.getElementById('tabOptions').classList.toggle('active', tab === 'options');
    document.getElementById('stockTradePane').style.display = tab === 'stocks' ? '' : 'none';
    document.getElementById('optionsTradePane').style.display = tab === 'options' ? '' : 'none';
    renderPaperTrading();
  }

  // --- Black-Scholes pricing ---
  function normCDF(x) {
    const a1=0.254829592, a2=-0.284496736, a3=1.421413741, a4=-1.453152027, a5=1.061405429, p=0.3275911;
    const sign = x < 0 ? -1 : 1;
    x = Math.abs(x) / Math.SQRT2;
    const t = 1 / (1 + p * x);
    const y = 1 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t * Math.exp(-x*x);
    return 0.5 * (1 + sign * y);
  }

  function bsPrice(S, K, T, r, sigma, type) {
    if (T <= 0) return Math.max(0, type === 'call' ? S - K : K - S);
    const d1 = (Math.log(S/K) + (r + sigma*sigma/2)*T) / (sigma*Math.sqrt(T));
    const d2 = d1 - sigma*Math.sqrt(T);
    if (type === 'call') return S*normCDF(d1) - K*Math.exp(-r*T)*normCDF(d2);
    return K*Math.exp(-r*T)*normCDF(-d2) - S*normCDF(-d1);
  }

  function bsGreeks(S, K, T, r, sigma, type) {
    if (T <= 0) {
      const itm = type === 'call' ? S > K : S < K;
      return { delta: itm ? (type==='call'?1:-1) : 0, gamma:0, theta:0, vega:0 };
    }
    const d1 = (Math.log(S/K) + (r + sigma*sigma/2)*T) / (sigma*Math.sqrt(T));
    const d2 = d1 - sigma*Math.sqrt(T);
    const nd1 = Math.exp(-d1*d1/2) / Math.sqrt(2*Math.PI);
    const gamma = nd1 / (S * sigma * Math.sqrt(T));
    const vega = S * nd1 * Math.sqrt(T) / 100; // per 1% IV move
    let delta, theta;
    if (type === 'call') {
      delta = normCDF(d1);
      theta = (-(S*nd1*sigma)/(2*Math.sqrt(T)) - r*K*Math.exp(-r*T)*normCDF(d2)) / 365;
    } else {
      delta = normCDF(d1) - 1;
      theta = (-(S*nd1*sigma)/(2*Math.sqrt(T)) + r*K*Math.exp(-r*T)*normCDF(-d2)) / 365;
    }
    return { delta, gamma, theta, vega };
  }

  function estimateIV(symbol) {
    // Simple IV estimate from recent price movement
    const stock = watchlist.find(w => w.symbol === symbol);
    if (!stock || !stock.price) return 0.30;
    const changePct = Math.abs(stock.changePct || 2);
    // Annualize daily move: daily_vol * sqrt(252)
    const dailyVol = changePct / 100;
    const annualVol = Math.max(0.15, Math.min(1.5, dailyVol * Math.sqrt(252)));
    return annualVol;
  }

  function updateOptionsPreview() {
    const symbol = document.getElementById('optSymbolSelect').value;
    const strike = parseFloat(document.getElementById('optStrike').value);
    const dte = parseInt(document.getElementById('optDTE').value);
    const type = document.getElementById('optType').value;
    if (!symbol || !strike || !dte) {
      document.getElementById('estPremiumDisplay').textContent = '‚Äî';
      ['prevDelta','prevGamma','prevTheta','prevVega','prevIV','prevIntrinsic','prevTimeVal'].forEach(id => document.getElementById(id).textContent = '‚Äî');
      return;
    }
    const S = getStockPrice(symbol);
    if (S <= 0) return;
    const iv = estimateIV(symbol);
    const T = dte / 365;
    const r = 0.05;
    const premium = bsPrice(S, strike, T, r, iv, type);
    const greeks = bsGreeks(S, strike, T, r, iv, type);
    const intrinsic = Math.max(0, type === 'call' ? S - strike : strike - S);
    const timeVal = Math.max(0, premium - intrinsic);

    document.getElementById('estPremiumDisplay').textContent = '$' + premium.toFixed(2);
    document.getElementById('prevDelta').textContent = greeks.delta.toFixed(3);
    document.getElementById('prevGamma').textContent = greeks.gamma.toFixed(4);
    document.getElementById('prevTheta').textContent = greeks.theta.toFixed(3);
    document.getElementById('prevVega').textContent = greeks.vega.toFixed(3);
    document.getElementById('prevIV').textContent = (iv * 100).toFixed(1) + '%';
    document.getElementById('prevIntrinsic').textContent = '$' + intrinsic.toFixed(2);
    document.getElementById('prevTimeVal').textContent = '$' + timeVal.toFixed(2);
  }

  // Attach live preview updates
  ['optSymbolSelect','optType','optStrike','optDTE'].forEach(id => {
    document.getElementById(id).addEventListener('change', updateOptionsPreview);
    document.getElementById(id).addEventListener('input', updateOptionsPreview);
  });

  // Auto-fill strike when symbol changes
  document.getElementById('optSymbolSelect').addEventListener('change', function() {
    const S = getStockPrice(this.value);
    if (S > 0) document.getElementById('optStrike').value = Math.round(S);
  });

  function updateOptSymbolSelect() {
    const sel = document.getElementById('optSymbolSelect');
    const current = sel.value;
    sel.innerHTML = '<option value="">Ticker...</option>';
    watchlist.forEach(s => {
      const opt = document.createElement('option');
      opt.value = s.symbol; opt.textContent = s.symbol + ' ($' + s.price.toFixed(2) + ')';
      sel.appendChild(opt);
    });
    if (current && watchlist.find(s => s.symbol === current)) sel.value = current;
  }

  function paperOptionTrade() {
    const symbol = document.getElementById('optSymbolSelect').value;
    const type = document.getElementById('optType').value;
    const action = document.getElementById('optAction').value;
    const strike = parseFloat(document.getElementById('optStrike').value);
    const dte = parseInt(document.getElementById('optDTE').value);
    const contracts = parseInt(document.getElementById('optContracts').value) || 0;
    if (!symbol || !strike || !dte || contracts <= 0) { alert('Fill in all option fields.'); return; }
    const S = getStockPrice(symbol);
    if (S <= 0) { alert('Price not available for ' + symbol); return; }
    const iv = estimateIV(symbol);
    const T = dte / 365;
    const r = 0.05;
    const premium = bsPrice(S, strike, T, r, iv, type);
    const greeks = bsGreeks(S, strike, T, r, iv, type);
    const totalCost = premium * 100 * contracts; // each contract = 100 shares
    const expiry = Date.now() + dte * 86400000;

    if (action === 'buy') {
      if (totalCost > paperPortfolio.cash) {
        alert('Insufficient funds. Need $' + totalCost.toFixed(2) + ', have $' + paperPortfolio.cash.toFixed(2));
        return;
      }
      paperPortfolio.cash -= totalCost;
      paperPortfolio.optionPositions.push({
        id: Date.now(), symbol, type, action: 'long', strike, dte, expiry,
        contracts, entryPremium: premium, entryIV: iv, entryPrice: S,
        entryGreeks: { ...greeks }, openedAt: Date.now()
      });
    } else {
      // Selling (writing) ‚Äî collect premium, but need margin (we'll use 20% of underlying as collateral)
      const margin = S * 100 * contracts * 0.20;
      if (margin > paperPortfolio.cash) {
        alert('Insufficient margin. Need $' + margin.toFixed(2) + ' collateral, have $' + paperPortfolio.cash.toFixed(2));
        return;
      }
      paperPortfolio.cash += totalCost; // collect premium
      paperPortfolio.optionPositions.push({
        id: Date.now(), symbol, type, action: 'short', strike, dte, expiry,
        contracts, entryPremium: premium, entryIV: iv, entryPrice: S,
        entryGreeks: { ...greeks }, openedAt: Date.now(), marginHeld: margin
      });
      paperPortfolio.cash -= margin; // hold margin
    }

    paperPortfolio.optionHistory.unshift({
      action: action === 'buy' ? 'BUY' : 'SELL', type, symbol, strike, dte, contracts,
      premium, total: totalCost, time: Date.now()
    });

    savePaper(); renderPaperTrading();
  }

  function closeOptionPosition(posId) {
    const pos = paperPortfolio.optionPositions.find(p => p.id === posId);
    if (!pos) return;
    const S = getStockPrice(pos.symbol);
    const elapsed = (Date.now() - pos.openedAt) / 86400000;
    const remainingDTE = Math.max(0, pos.dte - elapsed);
    const T = remainingDTE / 365;
    const iv = estimateIV(pos.symbol);
    const currentPremium = bsPrice(S, pos.strike, T, 0.05, iv, pos.type);
    const totalValue = currentPremium * 100 * pos.contracts;

    if (pos.action === 'long') {
      paperPortfolio.cash += totalValue;
    } else {
      // Close short: buy back
      if (totalValue > paperPortfolio.cash + (pos.marginHeld || 0)) {
        alert('Insufficient funds to buy back this option.'); return;
      }
      paperPortfolio.cash -= totalValue;
      paperPortfolio.cash += pos.marginHeld || 0; // release margin
    }

    const pnl = pos.action === 'long'
      ? (currentPremium - pos.entryPremium) * 100 * pos.contracts
      : (pos.entryPremium - currentPremium) * 100 * pos.contracts;

    paperPortfolio.optionHistory.unshift({
      action: 'CLOSE', type: pos.type, symbol: pos.symbol, strike: pos.strike,
      dte: Math.round(remainingDTE), contracts: pos.contracts,
      premium: currentPremium, pnl, time: Date.now()
    });

    paperPortfolio.optionPositions = paperPortfolio.optionPositions.filter(p => p.id !== posId);
    savePaper(); renderPaperTrading();
  }

  function renderOptionPositions() {
    const posEl = document.getElementById('openPositions');
    const opts = paperPortfolio.optionPositions;
    if (opts.length === 0) {
      posEl.innerHTML = '<div style="font-size:13px;color:var(--text-muted);padding:8px 0;">No open option positions</div>';
      return;
    }
    posEl.innerHTML = opts.map(pos => {
      const S = getStockPrice(pos.symbol);
      const elapsed = (Date.now() - pos.openedAt) / 86400000;
      const remainingDTE = Math.max(0, pos.dte - elapsed);
      const T = remainingDTE / 365;
      const iv = estimateIV(pos.symbol);
      const currentPremium = bsPrice(S, pos.strike, T, 0.05, iv, pos.type);
      const greeks = bsGreeks(S, pos.strike, T, 0.05, iv, pos.type);
      const pnl = pos.action === 'long'
        ? (currentPremium - pos.entryPremium) * 100 * pos.contracts
        : (pos.entryPremium - currentPremium) * 100 * pos.contracts;
      const pnlPct = pos.action === 'long'
        ? ((currentPremium - pos.entryPremium) / pos.entryPremium * 100)
        : ((pos.entryPremium - currentPremium) / pos.entryPremium * 100);
      const isPos = pnl >= 0;
      const dir = pos.action === 'long' ? 'Long' : 'Short';
      return `<div class="option-position-row">
        <div class="option-pos-header">
          <div>
            <span class="position-symbol">${pos.symbol}</span>
            <span class="option-badge ${pos.type}">${pos.type.toUpperCase()}</span>
            <span class="position-detail">${dir} ${pos.contracts}√ó $${pos.strike} | ${Math.round(remainingDTE)}d left</span>
          </div>
          <div style="display:flex;align-items:center;gap:10px;">
            <span class="position-pnl ${isPos ? 'pnl-positive' : 'pnl-negative'}">${isPos?'+':''}${pnl.toFixed(2)} (${isPos?'+':''}${pnlPct.toFixed(1)}%)</span>
            <button onclick="closeOptionPosition(${pos.id})" style="padding:3px 10px;font-size:11px;border-radius:4px;border:1px solid var(--border);background:var(--bg-tertiary);color:var(--text-muted);cursor:pointer;font-weight:600;">Close</button>
          </div>
        </div>
        <div class="option-pos-details">
          <span>Entry: $${pos.entryPremium.toFixed(2)} ‚Üí Now: $${currentPremium.toFixed(2)}</span>
          <span>Œî${greeks.delta.toFixed(2)} Œì${greeks.gamma.toFixed(3)} Œò${greeks.theta.toFixed(2)} V${greeks.vega.toFixed(2)}</span>
          <span>IV: ${(iv*100).toFixed(0)}%</span>
        </div>
      </div>`;
    }).join('');
  }

  function renderOptionHistory() {
    const histEl = document.getElementById('tradeHistory');
    const recent = paperPortfolio.optionHistory.slice(0, 20);
    if (recent.length === 0) {
      histEl.innerHTML = '<div style="font-size:13px;color:var(--text-muted);padding:8px 0;">No option trades yet</div>';
      return;
    }
    histEl.innerHTML = recent.map(t => {
      const d = new Date(t.time);
      const dateStr = d.toLocaleDateString('en-US',{month:'short',day:'numeric'}) + ' ' + d.toLocaleTimeString('en-US',{hour:'2-digit',minute:'2-digit'});
      const label = t.action === 'CLOSE'
        ? `CLOSE ${t.type.toUpperCase()} ${t.symbol} $${t.strike}`
        : `${t.action} ${t.type.toUpperCase()} ${t.symbol} $${t.strike} ${t.dte}d`;
      const pnlStr = t.pnl != null ? ` P&L: ${t.pnl >= 0 ? '+' : ''}${t.pnl.toFixed(2)}` : '';
      return `<div class="trade-history-row">
        <span class="trade-type-${t.action.toLowerCase()}">${t.action}</span>
        <span>${t.contracts}√ó ${t.type.toUpperCase()} ${t.symbol} $${t.strike}</span>
        <span style="color:var(--text-muted);">@$${t.premium.toFixed(2)}${pnlStr}</span>
        <span style="color:var(--text-muted);font-size:11px;">${dateStr}</span>
      </div>`;
    }).join('');
  }

  // ===== REFRESH QUOTES =====
  async function refreshAllQuotes() {
    for (let i = 0; i < watchlist.length; i++) {
      const quote = await fetchStockQuote(watchlist[i].symbol);
      if (quote) watchlist[i] = quote;
    }
    saveWatchlist(); renderWatchlist(); renderPaperTrading();
  }

  // ===== INIT =====
  renderWatchlist();
  renderPaperTrading();
  if (watchlist.length) {
    refreshAllQuotes();
    updateEmptyState();
  }
  setInterval(refreshAllQuotes, 60000);
  window.addEventListener('resize', () => { if (currentChartData.length) drawChart(); });
</script>

</body>
</html>
